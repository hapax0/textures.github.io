<!DOCTYPE html>
<html>
<head>
<style>
  div[class=buttons] {margin-top:8px}
  body {background-color:#eee;}
  button {background-color:#fff;}
  svg {background-color:#fff;}
</style>
</head>
<body>
<div style="margin-left:8px;">
<div style="font-size:32px;font-weight:bold;">Brush/Texture tool</div>
<table border="0" cellpadding="6" style="margin-left:6px;">
  <tr><td style="text-align:right;"></td><td></td><td style="text-align:right;"><input type='file' name='img' size='65' id='uploadimage' style="display:none;"><button onclick="openFile()" id="imgloader">Load image...</button></td><td>
  </td>
  <td rowspan='6' style="vertical-align:bottom;border:solid #ccc;">
    <span id='bdate'>Oct 25, 2021</span><br>
    canvas size [<span id='cs'>1024px</span>]<br>
    <input type="range" id="canvas_size" min="1" max="5" value="4" onchange="resizeCanvas()">
    <br>
    distribution:<br><select id="distro">
      <option value="gaussian">gaussian</option>
      <option value="circle">circle</option>
      <option value="strip">vertcal strip</option>
      <option value="square" selected>no clipping</option>
    </select><br><br>
    closeness:<br>
    <input type="range" id="rows" min="2" max="8" value="5"><br>
    <a href="javascript:halftone()" title="halftone">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-dice-5" viewBox="0 0 16 16">
  <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"/>
  <path d="M5.5 4a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm4-4a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
</svg></a>
&nbsp;
<a href="javascript:hatches()" title="hatches">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-justify" viewBox="0 0 16 16">
  <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path22" />
  <path id="rect34" style="fill:#000000;stroke-width:1.53603" d="M 5.3389697,0.1722603 6.8283029,0.3699369 0.5926235,6.484002 0.25474446,5.241983 Z" sodipodi:nodetypes="ccccc" />
  <path id="rect34-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 10.131673,0.13484473 11.808452,0.2254094 0.7694323,11.142815 0.2441071,10.141798 Z" sodipodi:nodetypes="ccccc" />
  <path id="rect34-1-3" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 14.549484,0.55265691 15.396145,1.3930058 1.5889135,15.480293 0.74225221,14.639944 Z" sodipodi:nodetypes="ccccc" />
  <path id="rect34-1-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 15.95808,4.3813511 16.001402,6.1589303 6.0870581,15.978437 5.2403968,15.138088 Z" sodipodi:nodetypes="ccccc" />
  <path id="rect34-1-37" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="m 15.420234,9.8887104 -0.117347,1.8311356 -4.182124,4.1944 -1.382221,-0.278011 z" sodipodi:nodetypes="ccccc" />
</svg></a>
&nbsp;
<a href="javascript:hatches(true)" title="cross hatches">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-justify" viewBox="0 0 16 16">
    <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path22" />
    <path id="rect34" style="fill:#000000;stroke-width:1.53603" d="M 5.3389697,0.1722603 6.8283029,0.3699369 0.5926235,6.484002 0.25474446,5.241983 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 10.131673,0.13484473 11.808452,0.2254094 0.7694323,11.142815 0.2441071,10.141798 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-3" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 14.549484,0.55265691 15.396145,1.3930058 1.5889135,15.480293 0.74225221,14.639944 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="M 15.95808,4.3813511 16.001402,6.1589303 6.0870581,15.978437 5.2403968,15.138088 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-37" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="0.20828402" inkscape:transform-center-y="-1.8745562" d="m 15.420234,9.8887104 -0.117347,1.8311356 -4.182124,4.1944 -1.382221,-0.278011 z" sodipodi:nodetypes="ccccc" />
    <path id="rect34" style="fill:#000000;stroke-width:1.53603" d="M 10.662432,0.1722603 9.1730991,0.3699369 15.408778,6.484002 15.746658,5.241983 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="-0.20828407" inkscape:transform-center-y="-1.8745562" d="M 5.869729,0.13484473 4.19295,0.2254094 15.23197,11.142815 15.757295,10.141798 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-3" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="-0.20828412" inkscape:transform-center-y="-1.8745562" d="M 1.451918,0.55265691 0.605257,1.3930058 14.412488,15.480293 15.25915,14.639944 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-1" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="-0.20828392" inkscape:transform-center-y="-1.8745562" d="M 0.043322,4.3813511 0,6.1589303 9.9143439,15.978437 10.761005,15.138088 Z" sodipodi:nodetypes="ccccc" />
    <path id="rect34-1-37" style="fill:#000000;stroke-width:1.53603" inkscape:transform-center-x="-0.20828402" inkscape:transform-center-y="-1.8745562" d="m 0.581168,9.8887104 0.117347,1.8311356 4.182124,4.1944 1.382221,-0.278011 z" sodipodi:nodetypes="ccccc" />
  </svg></a>
  &nbsp;
  <a href="javascript:straightLines()" title="lines">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-justify" viewBox="0 0 16 16">  <path  d="m 3.001402,1 a -2,2 0 0 0 -2,2 v 10 a -2,2 0 0 0 2,2 h 10 a -2,2 0 0 0 2,-2 V 3 a -2,2 0 0 0 -2,-2 z m 10,-1 a -3,3 0 0 1 3,3 v 10 a -3,3 0 0 1 -3,3 h -10 a -3,3 0 0 1 -3,-3 V 3 a -3,3 0 0 1 3,-3 z"  id="path22" />
  <g id="g20" transform="rotate(90,7.9463744,8.0066245)">
    <path id="path22" d="M 3.001402,1" inkscape:connector-curvature="0" />
    <rect y="0.56233817" x="2.945581" height="14.888573" width="1.1514543" id="rect844" style="fill:#000000;stroke-width:0.66666698" />
    <rect y="0.56233817" x="5.8956251" height="14.888573" width="1.1514543" id="rect844-0" style="fill:#000000;stroke-width:0.66666698" />
    <rect y="0.56233817" x="8.8456688" height="14.888573" width="1.1514543" id="rect844-6" style="fill:#000000;stroke-width:0.66666698" />
    <rect y="0.56233817" x="11.795713" height="14.888573" width="1.1514543" id="rect844-4" style="fill:#000000;stroke-width:0.66666698" />
  </g>
    </svg></a>
&nbsp;
<a href="javascript:straightLines(true)" title="crossed lines">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-justify" viewBox="0 0 16 16">    <path d="m 3.001402,1 a -2,2 0 0 0 -2,2 v 10 a -2,2 0 0 0 2,2 h 10 a -2,2 0 0 0 2,-2 V 3 a -2,2 0 0 0 -2,-2 z m 10,-1 a -3,3 0 0 1 3,3 v 10 a -3,3 0 0 1 -3,3 h -10 a -3,3 0 0 1 -3,-3 V 3 a -3,3 0 0 1 3,-3 z" id="path22" />
  <rect style="fill:#000000;stroke-width:0.666667" id="rect844" width="1.1514543" height="14.888573" x="2.945581" y="0.56233817" />
  <rect style="fill:#000000;stroke-width:0.666667" id="rect844-0" width="1.1514543" height="14.888573" x="5.8956251" y="0.56233817" />
  <rect style="fill:#000000;stroke-width:0.666667" id="rect844-6" width="1.1514543" height="14.888573" x="8.8456688" y="0.56233817" />
  <rect style="fill:#000000;stroke-width:0.666667" id="rect844-4" width="1.1514543" height="14.888573" x="11.795713" y="0.56233817" />
  <g id="g922" transform="rotate(90,15.303631,2.7179677)">
    <rect   style="fill:#000000;stroke-width:0.666667"   id="rect844-3"   width="1.1514543"   height="14.888573"   x="15.671829"   y="2.6242449" />
    <rect   style="fill:#000000;stroke-width:0.666667"   id="rect844-0-1"   width="1.1514543"   height="14.888573"   x="18.621874"   y="2.6242449" />
    <rect   style="fill:#000000;stroke-width:0.666667"   id="rect844-6-3"   width="1.1514543"   height="14.888573"   x="21.571917"   y="2.6242449" />
    <rect   style="fill:#000000;stroke-width:0.666667"   id="rect844-4-8"   width="1.1514543"   height="14.888573"   x="24.521961"   y="2.6242449" />
  </g></svg></a>
  </td>
  
  </tr>
  <tr><td style="text-align:right;">feature size</td><td><input type="range" id="speck_size" min="0" max="500" value="25"></td><td style="text-align:right;">saturation</td><td><button onclick="saturationScale(1.1)">+</button>&nbsp;&nbsp;<button onclick="saturationScale(0.9)">-</button>
  </td></tr>
  <tr><td style="text-align:right;">quantity</td><td><input type="range" id="number" min="9" max="20000" value="10000"><td style="text-align:right;">sharpness</td><td><button onclick="sharpenCanvas()">+</button>&nbsp;&nbsp;<button onclick="blurCanvas()">-</button><!--input type="range" id="flatten" min="1" max="100" value="1"--></td>
   
  </tr>
  <tr><td style="text-align:right;">opacity</td><td><input type="range" id="speck_opacity" min="1" max="100" value="100" >
  </td><td style="text-align:right;">contrast</td><td><button onclick="contrastImage(5)">+</button>&nbsp;&nbsp;<button onclick="contrastImage(-5)">-</button></td></tr>
  <tr><td style="text-align:right;">grungy patterns: <input type="checkbox" id="grungy"></td><td>
    mode: <select id="mode">
      <option value="source-over" selected>source-over</option>
      <option value="soucce-in">source-in</option>
      <option value="source-out">source-out</option>
      <option value="source-atop">source-atop</option>
      <option value="destination-over">destination-over</option>
      <option value="destination-in">destination-in</option>
      <option value="destination-out">destination-out</option>
      <option value="destination-atop">destination-atop</option>
      <option value="color">color</option>
      <option value="hue">hue</option>
      <option value="saturation">saturation</option>
      <option value="luminosity">luminosity</option>
      <option value="xor">xor</option>
    </select>
  </td><td style="text-align:right;">&nbsp;brightness
</td><td>
  <button onclick="adjustBrightness(5)">+</button>&nbsp;&nbsp;<button onclick="adjustBrightness(-5)">-</button>
</td>
</tr>
<tr><td>color: <input type="color" id="paintcolor">&nbsp;
<a href="javascript:randomPickColor()" title='random color'>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-palette" viewBox="0 0 16 16">
  <path d="M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
  <path d="M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8zm-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7z"/>
</svg></a>
</td><td>background: <a href="javascript:background()" title="toggle background color"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-circle-half" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
</svg></a>&nbsp;&nbsp;
</td><td style="text-align:right;">
  <button onclick="testImage()">Test:</button></td>
  <td>
  <select id="functions">
    <option value="reverse">reversible</option>
    <option value="pasta">pasta</option>
    <option value="checkerboard">checkerboard</option>
    <option value="diamonds">diamonds</option>
    <option value="dots">dots</option>
    <option value="dashes">dashes</option>
    <option value="holes">holes</option>
    <option value="holes2">holes2</option>
    <option value="swap">swap squares</option>
    <option value="swapDiag">swap diagonal</option>
    <option value="rectify">shade squares</option>
    <option value="tatter">tatter</option>
    <option value="leftFade">fade left</option>
    <option value="downFade">fade dowm</option>
    <option value="edgeBlur">blur edges</option>
    <option value="edgeGrey">gray edges</option>
    <option value="edgeDarken">darken edges</option>
    <option value="posterize">posterize</option>
    <option value="showColors">simplify colors</option>
    <option value="colorFilter">filter color</option>
    <option value="colorFilterOut">filter out</option>
    <option value="separation">separation</option>
    <option value="sampleImageData">sample lightness</option>
    <option value="sampleImageDataColor">sample colors</option>
    <option value="sampleImageDataColor2" selected>sample colors2</option>
    
    <!--option value="rotateCent">rotate centered</option>
    <option value="rotateCirc">rotate grid</option-->
    <!--option value="samplec">sample circ</option>
    <option value="sample">sample rect</option-->
    <option value="randomTexture" >random texture</option>
    <option value="edgeSmear">streak left</option>
    <option value="smeardownOff">vertical streaks</option>
    <option value="strokes">strokes</option>
    <option value="chair">chair</option>
    <option value="house">house</option>
    <option value="textTool">text tool</option>
    
    <!--option value="pyramid">pyramid</option>
    <option value="flower">flower</option>
    <option value="rothko">rothko</option>
    <option value="albers">albers</option>
    <option value="elle">kelley</option>
    <option value="drips">louis</option>
    <option value="folded">folded</option>
    <option value="card">card</option>
    <option value="card2">card2</option>
    <option value="tile">tile</option-->
  </select>
</td></tr>
</table>
<div class='buttons'>
<a href="javascript:specksRadial()" title="specks">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-droplet-fill" viewBox="0 0 16 16">
  <defs
     id="defs10">
    <linearGradient inkscape:collect="always" id="linearGradient1002">
      <stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop998" />
      <stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop1000" />
    </linearGradient>
    <radialGradient inkscape:collect="always"  xlink:href="#linearGradient1002" id="radialGradient1004" cx="-4.8200417" cy="6.4534998" fx="-4.8200417" fy="6.4534998"  r="5.3288236" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.2110553,0,0,1.2110553,13.977852,0.3517474)" />
  </defs>
  <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"/>
  <circle style="fill:url(#radialGradient1004);fill-opacity:1;stroke-width:1.21106" id="path171" cx="8.1405144" cy="8.1672916" r="6.4534998" />
</svg></a>
&nbsp;
<a href="javascript:haze()" title="haze"><svg  xmlns:dc="http://purl.org/dc/elements/1.1/"  xmlns:cc="http://creativecommons.org/ns#"  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"  xmlns:svg="http://www.w3.org/2000/svg"  xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"  width="24"  height="24"  fill="black"  class="bi bi-hand-index"  viewBox="0 0 16 16"  version="1.1"  id="svg7"  sodipodi:docname="icon.svg"  inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">  <metadata  id="metadata13">  <rdf:RDF>  <cc:Work  rdf:about="">  <dc:format>image/svg+xml</dc:format>  <dc:type  rdf:resource="http://purl.org/dc/dcmitype/StillImage" />  <dc:title></dc:title>  </cc:Work>  </rdf:RDF>  </metadata>  <defs  id="defs11">  <linearGradient  inkscape:collect="always"  id="linearGradient848">  <stop  style="stop-color:#000000;stop-opacity:1;"  offset="0"  id="stop844" />  <stop  style="stop-color:#000000;stop-opacity:0;"  offset="1"  id="stop846" />  </linearGradient>  <linearGradient  inkscape:collect="always"  xlink:href="#linearGradient848"  id="linearGradient850"  x1="1.9881659"  y1="13.140828"  x2="9.9597635"  y2="5.1976333"  gradientUnits="userSpaceOnUse"  gradientTransform="translate(0.32189349,0.56804734)" />  </defs>  <sodipodi:namedview  pagecolor="#ffffff"  bordercolor="#666666"  borderopacity="1"  objecttolerance="10"  gridtolerance="10"  guidetolerance="10"  inkscape:pageopacity="0"  inkscape:pageshadow="2"  inkscape:window-width="1920"  inkscape:window-height="1010"  id="namedview9"  showgrid="false"  inkscape:zoom="35.208333"  inkscape:cx="12"  inkscape:cy="12"  inkscape:window-x="-7"  inkscape:window-y="-7"  inkscape:window-maximized="1"  inkscape:current-layer="svg7" />  <path  d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"  id="path848" />  <rect  style="fill:url(#linearGradient850);fill-opacity:1;stroke:none;stroke-width:1.33333;stroke-opacity:0.477912"  id="rect840"  width="11.323077"  height="11.228402"  x="2.3100593"  y="2.4804733" />
</svg></a>
&nbsp;
<a href="javascript:hrips()" title="rips">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-dice-5" viewBox="0 0 16 16">
<path
d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"
id="path848" />
 <path
     style="fill:#666666;stroke-width:0.66666669"
     d="M 1.7041421,7.6686393 2.4804735,5.5100594 3.5218936,6.5514795 4.1656806,5.8887576 4.7526628,4.8094677 5.5857989,6.8433927 6.3621303,5.5100594 7.1384617,7.6875742 7.8579883,5.0556215 l 0.6816568,0.7763314 0.9467456,-1.287574 0.7573963,0.9656805 0.927811,1.495858 0.624852,-2.2911243 0.814201,2.6130178 0.624853,-1.8556213 0.833135,1.8745562 -0.0568,2.1506907 -0.681662,-1.060355 -0.719527,2.2721895 -1.00355,-0.454438 L 11.057988,9.1944779 10.300592,10.254833 9.6757398,9.0319532 8.7479291,10.83077 7.9905327,12.345563 6.8355031,10.71716 6.3431954,11.701776 5.5857989,10.103354 4.8094676,10.925444 4.0331362,12.77002 3.2568048,11.436687 2.7076924,10.698225 1.7041421,11.436687 Z"
     id="rect12"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccc" />
</svg></a>
&nbsp;
<a href="javascript:shape()" title="mass">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-dice-5" viewBox="0 0 16 16">
<path
d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"
id="path848" />
<path
 id="path833"
 style="fill:#000000;stroke-width:0.0337984"
 d="m 15.994998,9.2406499 c 0.182687,0.8765861 -0.09498,1.6343481 -0.09498,1.6343481 0,0 0.299794,3.020173 -0.361402,2.763837 -1.675844,-0.649697 -0.161569,0.02962 -1.122432,0.847039 -0.530685,0.451483 -1.111659,-0.929828 -1.729969,-0.953679 -0.720028,-0.02776 -2.126617,1.862041 -2.054005,0.953679 C 11.045202,9.3194988 9.5268178,13.627745 9.0871916,13.005736 8.6470545,12.382982 8.9718014,11.558097 8.6530963,10.925493 8.1853617,9.9970772 6.6234466,9.6352048 6.5787875,8.5965821 6.5331559,7.5353402 7.7307471,6.0690741 8.4861854,6.0438027 10.120993,5.9891141 6.6645616,4.6632167 10.383368,3.8618377 11.073643,3.7130878 9.1608615,2.596912 10.63221,1.7581421 c 0.730681,-0.4165429 1.584514,1.1635819 2.297037,0.7810217 0.463683,-0.2489557 -0.09975,-1.3685411 0.402191,-1.5267844 1.095303,-0.34531136 2.20318,1.1596346 2.629763,2.2259154 0.388064,0.9699982 -0.770262,1.4487893 -0.335502,3.1162234 0.391721,1.5024125 0.0074,0.8347436 0.267625,2.3098605 z"
 sodipodi:nodetypes="ccssassaasssaaassc"
 inkscape:connector-curvature="0" />
</svg></a>
&nbsp;
<a href="javascript:blobs()" title="blobs">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-dice-5" viewBox="0 0 16 16">
<path
d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"
id="path848" />
<path
id="path833"
style="fill:#000000;stroke-width:0.0281575"
d="m 12.842599,7.9431211 c 0.181423,0.612643 -0.90225,1.7582163 -0.90225,1.7582163 0,0 0.66802,2.2766266 0.0114,2.0974736 -1.664243,-0.45407 -1.103033,0.0207 -2.0572456,0.591993 C 9.367493,12.706344 8.79054,11.740951 8.1765097,11.724281 7.4614667,11.704881 6.0646134,13.025654 6.1367234,12.390804 6.5468564,8.7800444 5.0389831,11.791061 4.6024001,11.356341 4.1653098,10.921101 4.3571901,10.372528 4.1713098,9.9024674 c -0.26869,-0.679463 -0.885933,-1.235123 -0.982713,-1.9593463 -0.0846,-0.6333 -0.12656,-1.4886233 0.37933,-1.8788933 1.1858633,-0.9148033 1.7646463,0.37344 2.3216766,-0.1666603 0.577883,-0.56033 -1.2140433,-1.8159133 0.24712,-2.4021263 0.725623,-0.2911203 1.5006863,0.592423 2.2811366,0.545853 0.52384,-0.0313 0.955623,-0.608453 1.4766434,-0.545853 0.6124226,0.0736 1.2868126,0.46948 1.5343226,1.034473 0.294693,0.6727003 -0.76493,1.0125533 -0.33318,2.1779166 0.38901,1.0500303 1.443503,0.21043 1.746973,1.2352903 z"
sodipodi:nodetypes="scssassaasasaaass" />
</svg></a>
&nbsp;
<a href="javascript:smudge()" title="smudges">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
 <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.41206031;stroke:none;stroke-width:1.22943723" id="path4637-09-5-6" cx="5.613524" cy="2.2444313" r="1.3753028" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.61809046;stroke:none;stroke-width:1.49288809" id="path4637-09-5-6-2" cx="6.7432356" cy="3.6688507" r="1.6700106" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.42713569;stroke:none;stroke-width:1.49288809" id="path4637-09-5-6-0" cx="8.8061895" cy="5.0441546" r="1.6700106" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.61809046;stroke:none;stroke-width:1.49288809" id="path4637-09-5-6-1" cx="11.163854" cy="3.8653235" r="1.6700106" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.53768843;stroke:none;stroke-width:1.49288809" id="path4637-09-5-6-3" cx="11.556795" cy="5.7318058" r="1.6700106" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.61809046;stroke:none;stroke-width:1.22943723" id="path4637-09-5-6-11" cx="12.539156" cy="7.500052" r="1.3753028" transform="rotate(20.626897)" />
  <circle style="opacity:1;fill:#000000;fill-opacity:0.21105526;stroke:none;stroke-width:1.49288809" id="path4637-09-5-6-6" cx="14.602109" cy="6.1247497" r="1.6700106" transform="rotate(20.626897)" />
</svg></a>
&nbsp;
<a href="javascript:smudge('streaks')" title="fibers">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
    <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.654022" id="rect841" width="0.69664574" height="12.05399" x="3.5993249" y="4.6972952" transform="matrix(0.88837003,-0.45912818,0.4245383,0.90540998,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.623441" id="rect841-2" width="0.6385653" height="11.949315" x="-2.1143453" y="4.4052281" transform="matrix(0.57123738,-0.8207849,0.81562576,0.57857983,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62348" id="rect841-2-7" width="0.63969785" height="11.929672" x="-1.4828149" y="4.5550318" transform="matrix(0.46056491,-0.88762603,0.87905962,0.47671185,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.623563" id="rect841-20" width="0.64251626" height="11.880497" x="-7.0637074" y="4.3288779" transform="matrix(0.29186591,-0.95645925,0.94746224,0.31986765,0,0)" />
  </svg></a>
  &nbsp;
  <a href="javascript:smudge('horizontal')" title="horizontal">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
    <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.65402198" id="rect841" width="0.69664574" height="12.05399" x="-8.4759226" y="1.4935923" transform="matrix(-0.06671683,-0.99777195,0.99960227,-0.028201,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62344098" id="rect841-2" width="0.6385653" height="11.949315" x="-11.171784" y="2.2563994" transform="matrix(0.07043409,-0.99751644,0.99684422,0.07938263,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62348002" id="rect841-2-7" width="0.63969785" height="11.929672" x="-4.9212289" y="2.3130665" transform="matrix(0.06194753,-0.99807941,0.99678041,0.0801799,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62356299" id="rect841-20" width="0.64251626" height="11.880497" x="-10.070452" y="1.5205224" transform="matrix(-0.03086979,-0.99952341,0.99999893,-0.00146201,0,0)" />
</svg></a>
  &nbsp;
  
  <a href="javascript:smudge('horizontal2')" title="horizontal longer">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
    <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.65402198" id="rect841" width="0.69664574" height="12.05399" x="-8.4759226" y="1.4935923" transform="matrix(-0.06671683,-0.99777195,0.99960227,-0.028201,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62344098" id="rect841-2" width="0.6385653" height="11.949315" x="-11.171784" y="2.2563994" transform="matrix(0.07043409,-0.99751644,0.99684422,0.07938263,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62348002" id="rect841-2-7" width="0.63969785" height="11.929672" x="-4.9212289" y="2.3130665" transform="matrix(0.06194753,-0.99807941,0.99678041,0.0801799,0,0)" />
  <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62356299" id="rect841-20" width="0.64251626" height="11.880497" x="-10.070452" y="1.5205224" transform="matrix(-0.03086979,-0.99952341,0.99999893,-0.00146201,0,0)" />
</svg></a>
  &nbsp;
  <a href="javascript:smudge('stars')" title="stars">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
    <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.654022"  id="rect841"  width="0.69664574"  height="12.05399"  x="-11.603054"  y="-5.5392923"  transform="matrix(-0.68337516,-0.73006739,0.75587022,-0.65472148,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.623441"  id="rect841-2"  width="0.6385653"  height="11.949315"  x="3.6144073"  y="4.5241499"  transform="matrix(0.92348512,-0.38363424,0.37533174,0.92689054,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.62348"  id="rect841-2-7"  width="0.63969785"  height="11.929672"  x="-3.3901684"  y="4.7668967"  transform="matrix(0.49756191,-0.86742847,0.85818921,0.51333349,0,0)" />
    <rect style="fill:#000000;fill-opacity:0.7;stroke-width:0.623563"  id="rect841-20"  width="0.64251626"  height="11.880497"  x="-9.9883776"  y="-0.33512011"  transform="matrix(-0.24235796,-0.9701869,0.97689464,-0.21372145,0,0)" />
  </svg></a>
    &nbsp;
  <a href="javascript:smudge('arcs')" title="arcs">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-hand-index" viewBox="0 0 16 16">
      <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z" id="path848" />
      <path id="path871" style="fill:none;stroke:#000000;stroke-width:0.606794px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.7" d="M 4.8169469,12.410196 C 4.2811252,8.2270075 9.8342734,5.2442926 13.247814,7.6225477 13.772118,7.8887603 14.255119,8.25548 14.596317,8.7360536" />
      <path id="path871-4" style="fill:none;stroke:#000000;stroke-width:0.606794px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.0.7" d="M 8.6534269,2.4544621 C 11.29696,5.7648169 8.0975604,11.150387 3.9314383,10.852992 3.3432805,10.892183 2.7380183,10.824232 2.194773,10.586463" />
      <path id="path871-40" style="fill:none;stroke:#000000;stroke-width:0.606794px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.7" d="M 9.7379895,13.198235 C 5.815277,11.536833 6.0232215,5.295592 9.8274009,3.5914404 10.325222,3.2795292 10.889865,3.0536933 11.482093,3.0063126" />
      <path id="path871-40-6" style="fill:none;stroke:#000000;stroke-width:0.534552px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.7" d="m 2.4447444,8.8205486 c 1.3427716,-3.4634512 6.7717188,-3.116928 8.3505396,0.3272078 0.283861,0.4529943 0.494644,0.9634996 0.551065,1.4940676" />
      </svg></a>
&nbsp;
      
<a href="javascript:skinnyLines()" title="skinny lines">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="spiral.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
 <metadata id="metadata10"> <rdf:RDF> <cc:Work  rdf:about="">  <dc:format>image/svg+xml</dc:format>  <dc:type   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />  <dc:title /> </cc:Work> </rdf:RDF>
 </metadata>
 <defs id="defs8" />
 <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="2072" inkscape:window-height="1160" id="namedview6" showgrid="false" inkscape:zoom="19.666667" inkscape:cx="-8.5677957" inkscape:cy="11.18644" inkscape:window-x="30" inkscape:window-y="20" inkscape:window-maximized="1" inkscape:current-layer="svg4" />
 <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851851" id="rect822" width="0.033160582" height="13.791817" x="-7.937367" y="1.1320852" transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" y="1.2602887" x="-7.055162" height="13.791817" width="0.033160582" id="rect820" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.21866688;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.28533362;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" id="rect823" width="0.033160582" height="13.791817" x="-5.8691759" y="1.1825527" transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" y="1.0901393" x="-11.022489" height="13.791817" width="0.033160582" id="rect831" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" id="rect833" width="0.033160582" height="13.791817" x="-10.140284" y="1.2183428" transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,-0.99996489,0.99997963,0.00638296,0,0)" y="1.1406068" x="-8.954298" height="13.791817" width="0.033160582" id="rect835" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.28533362;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" id="rect837" width="0.033160582" height="13.791817" x="2.5824299" y="1.0778327" transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" y="1.2060362" x="3.4646347" height="13.791817" width="0.033160582" id="rect839" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" id="rect841" width="0.033160582" height="13.791817" x="4.65062" y="1.1283002" transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" y="0.99716288" x="12.209372" height="13.791817" width="0.033160582" id="rect843" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.28533362;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" id="rect845" width="0.033160582" height="13.791817" x="13.091577" y="1.1253663" transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" />
 <rect transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" y="1.0476303" x="14.277561" height="13.791817" width="0.033160582" id="rect847" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
 <rect transform="matrix(0.00837942,0.99996489,0.99997963,-0.00638296,0,0)" y="0.88240296" x="1.6319965" height="13.791817" width="0.033160582" id="rect849" style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.41884229;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
</svg></a>
&nbsp;
<a href="javascript:rays()" title="rays">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="spiral.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-8.5677957"   inkscape:cy="11.38983"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
  <rect   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"   id="rect816"   width="0.033898305"   height="12.305084"   x="11.439552"   y="-5.9131536"   transform="rotate(42.884062)" />
  <rect   transform="rotate(-16.209718)"   y="3.8001976"   x="5.6621056"   height="12.305084"   width="0.033898305"   id="rect818"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
  <rect   transform="rotate(42.884062)"   y="-5.9131536"   x="11.439552"   height="12.305084"   width="0.033898305"   id="rect820"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
  <rect   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"   id="rect822"   width="0.033898305"   height="12.305084"   x="5.6621056"   y="3.8001976"   transform="rotate(-16.209718)" />
  <rect   transform="matrix(-0.42940643,-0.90311136,-0.90311136,0.42940643,0,0)"   y="-10.163505"   x="-10.751047"   height="12.305084"   width="0.033898305"   id="rect824"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
  <rect   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"   id="rect826"   width="0.033898305"   height="12.305084"   x="-2.0889094"   y="-17.422668"   transform="matrix(0.5543199,-0.8323037,-0.8323037,-0.5543199,0,0)" />
  <rect   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"   id="rect828"   width="0.033898305"   height="12.305084"   x="-10.751047"   y="-10.163505"   transform="matrix(-0.42940643,-0.90311136,-0.90311136,0.42940643,0,0)" />
  <rect   transform="matrix(0.5543199,-0.8323037,-0.8323037,-0.5543199,0,0)"   y="-17.422668"   x="-2.0889094"   height="12.305084"   width="0.033898305"   id="rect830"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.4;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
</svg></a>
&nbsp;
<a href="javascript:spiral()" title="spiral 1">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="frame (1).svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-9.3305082"   inkscape:cy="11.59322"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
  <path   sodipodi:type="spiral"   style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:0.76075417"   id="path817"   sodipodi:cx="7.4284596"   sodipodi:cy="8.2711763"   sodipodi:expansion="1"   sodipodi:revolution="3"   sodipodi:radius="6.1543951"   sodipodi:argument="-18.068602"   sodipodi:t0="0"   d="M 7.4284596,8.2711763 C 7.6476202,8.4883976 7.2437758,8.6737697 7.0674236,8.6354355 6.5895201,8.5315524 6.5100522,7.9203621 6.6999413,7.5491042 7.0396082,6.885011 7.9289507,6.8034373 8.5115678,7.1783988 9.3665819,7.7286698 9.4510744,8.9283029 8.8854964,9.7153206 8.1316699,10.764291 6.6122291,10.851027 5.6232793,10.092472 4.3787869,9.1379088 4.290153,7.2946657 5.2429045,6.1049599 6.3968142,4.6640668 8.5659126,4.5737071 9.9557121,5.721362 11.593543,7.0738336 11.685535,9.5699846 10.342533,11.159465 8.7919842,12.994583 5.9680205,13.088154 4.179135,11.549509 2.1464897,9.8012028 2.0513728,6.6489127 3.7858677,4.6608157 5.731709,2.4304713 9.212689,2.33383 11.399856,4.2643252 c 2.428171,2.1432156 2.526322,5.9531528 0.399714,8.3392838" />
</svg></a>
&nbsp;
<a href="javascript:spiral4()" title="spiral 2">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="frame (1).svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-9.3305082"   inkscape:cy="11.59322"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
  <path   sodipodi:type="spiral"   style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:0.76075417"   id="path817"   sodipodi:cx="7.4284596"   sodipodi:cy="8.2711763"   sodipodi:expansion="1"   sodipodi:revolution="3"   sodipodi:radius="6.1543951"   sodipodi:argument="-18.068602"   sodipodi:t0="0"   d="M 7.4284596,8.2711763 C 7.6476202,8.4883976 7.2437758,8.6737697 7.0674236,8.6354355 6.5895201,8.5315524 6.5100522,7.9203621 6.6999413,7.5491042 7.0396082,6.885011 7.9289507,6.8034373 8.5115678,7.1783988 9.3665819,7.7286698 9.4510744,8.9283029 8.8854964,9.7153206 8.1316699,10.764291 6.6122291,10.851027 5.6232793,10.092472 4.3787869,9.1379088 4.290153,7.2946657 5.2429045,6.1049599 6.3968142,4.6640668 8.5659126,4.5737071 9.9557121,5.721362 11.593543,7.0738336 11.685535,9.5699846 10.342533,11.159465 8.7919842,12.994583 5.9680205,13.088154 4.179135,11.549509 2.1464897,9.8012028 2.0513728,6.6489127 3.7858677,4.6608157 5.731709,2.4304713 9.212689,2.33383 11.399856,4.2643252 c 2.428171,2.1432156 2.526322,5.9531528 0.399714,8.3392838" />
</svg></a>
&nbsp;
<a href="javascript:scratch()" title="random vertical scratch">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="walk.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:rdf>    <cc:work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:work>  </rdf:rdf>  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-12.177965"   inkscape:cy="15.966864"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect821"   width="1.2453388"   height="1.4143007"   x="5.3398223"   y="-8.661335"   transform="matrix(0.63465003,0.77279968,-0.90809954,0.41875436,0,0)" />
  <rect   transform="matrix(0.63465003,0.77279968,-0.90809954,0.41875436,0,0)"   y="-7.3271499"   x="6.6709876"   height="1.0104367"   width="0.88972324"   id="rect823"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66597015"   inkscape:transform-center-y="-1.6146803" />
  <rect   transform="matrix(0.63465003,0.77279968,-0.90809954,0.41875436,0,0)"   y="-5.5375748"   x="9.8095083"   height="1.4143007"   width="1.2453388"   id="rect825"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534" />
  <rect   inkscape:transform-center-y="-2.2600551"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect827"   width="1.2453388"   height="1.4143007"   x="11.299404"   y="-4.4963231"   transform="matrix(0.63465003,0.77279968,-0.90809954,0.41875436,0,0)" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.73369908"   id="rect829"   width="1.0964638"   height="0.99516761"   x="1.6377044"   y="14.08071"   transform="matrix(-0.44358175,0.89623392,0.79419141,0.60766768,0,0)" />
  <rect   transform="matrix(-0.63465003,0.77279968,0.90809955,0.41875436,0,0)"   y="16.211035"   x="6.2411222"   height="1.4143007"   width="1.2453388"   id="rect831"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   inkscape:transform-center-y="-2.260055" />
  <rect   inkscape:transform-center-y="-3.1401128"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.25088739"   id="rect833"   width="1.6918739"   height="1.8746618"   x="7.8558521"   y="-6.8548665"   transform="matrix(0.61267165,0.79033755,-0.8985168,0.43893913,0,0)" />
  <rect   transform="matrix(0.46164707,0.88706369,-0.80858099,0.58838489,0,0)"   y="-6.293046"   x="13.039512"   height="1.7120709"   width="1.8453633"   id="rect835"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.24845982"   inkscape:transform-center-y="-3.8441586" />
  <rect   inkscape:transform-center-y="-1.6146803"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66597015"   id="rect837"   width="0.88972324"   height="1.0104367"   x="17.100254"   y="-0.03837949"   transform="matrix(0.63465003,0.77279968,-0.90809954,0.41875436,0,0)" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect843"   width="1.2453388"   height="1.4143007"   x="-17.495234"   y="-0.52179867"   transform="matrix(-0.63465,-0.7727997,0.90809956,-0.41875434,0,0)" />
  <rect   transform="matrix(-0.43672998,-0.89959264,0.78848064,-0.61505958,0,0)"   y="2.5559447"   x="-18.784386"   height="1.3378581"   width="1.4863967"   id="rect845"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.99047869"   inkscape:transform-center-y="3.1401128" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
</svg></a>
&nbsp;
<a href="javascript:walk()" title="random walk scratch">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="walk.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:rdf>    <cc:work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:work>  </rdf:rdf>  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-12.177965"   inkscape:cy="15.966864"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect821"   width="1.2453388"   height="1.4143007"   x="5.6009092"   y="-4.2888193"   transform="matrix(0.63465003,0.77279968,-0.90809955,0.41875436,0,0)" />
  <rect   transform="matrix(0.63465003,0.77279968,-0.90809955,0.41875436,0,0)"   y="-2.8745186"   x="6.8462481"   height="1.0104367"   width="0.88972324"   id="rect823"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66597015"   inkscape:transform-center-y="-1.6146803" />
  <rect   transform="matrix(0.99088267,0.1347276,-0.38076265,0.92467281,0,0)"   y="5.3058124"   x="10.230711"   height="1.4143007"   width="1.2453388"   id="rect825"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534" />
  <rect   inkscape:transform-center-y="-2.2600551"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect827"   width="1.2453388"   height="1.4143007"   x="10.943273"   y="-3.7138963"   transform="matrix(0.63465003,0.77279968,-0.90809955,0.41875436,0,0)" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.73369908"   id="rect829"   width="1.0964638"   height="0.99516761"   x="1.6377044"   y="14.08071"   transform="matrix(-0.44358175,0.89623392,0.79419141,0.60766768,0,0)" />
  <rect   transform="matrix(-0.63465003,0.77279968,0.90809955,0.41875436,0,0)"   y="16.211035"   x="6.2411222"   height="1.4143007"   width="1.2453388"   id="rect831"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   inkscape:transform-center-y="-2.260055" />
  <rect   inkscape:transform-center-y="-3.1401128"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.25088739"   id="rect833"   width="1.6918739"   height="1.8746618"   x="8.102726"   y="-1.9706608"   transform="matrix(0.61267165,0.79033755,-0.8985168,0.43893913,0,0)" />
  <rect   transform="matrix(0.71636471,0.69772602,-0.5834818,0.81212622,0,0)"   y="-2.1405919"   x="13.762673"   height="1.7120709"   width="1.8453633"   id="rect835"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.24845982"   inkscape:transform-center-y="-3.6505478"   inkscape:transform-center-x="1.2045975" />
  <rect   inkscape:transform-center-y="-1.6146803"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66597015"   id="rect837"   width="0.88972324"   height="1.0104367"   x="15.226777"   y="0.28453541"   transform="matrix(0.63465003,0.77279968,-0.90809955,0.41875436,0,0)" />
  <rect   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.9321534"   id="rect843"   width="1.2453388"   height="1.4143007"   x="-16.111355"   y="-3.3995087"   transform="matrix(-0.63465,-0.7727997,0.90809956,-0.41875434,0,0)" />
  <rect   transform="matrix(0.36275527,-0.93188444,0.98711203,0.16003073,0,0)"   y="9.5005388"   x="-13.480947"   height="1.3378581"   width="1.4863967"   id="rect845"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.99047869"   inkscape:transform-center-y="2.1349326"   inkscape:transform-center-x="2.3026882" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
  <rect   inkscape:transform-center-y="2.9632965"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.99047869"   id="rect828"   width="1.4863967"   height="1.3378581"   x="-5.1756067"   y="7.5886493"   transform="matrix(-0.11452784,-0.99342004,0.94756104,-0.31957485,0,0)"   inkscape:transform-center-x="1.0388372" />
  <rect   transform="matrix(0.63465003,0.77279968,-0.90809955,0.41875436,0,0)"   y="4.9849234"   x="13.513215"   height="1.0104367"   width="0.88972324"   id="rect839"   style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66597015"   inkscape:transform-center-y="-1.6146803" />
</svg></a>
&nbsp;
<a href="javascript:greyScale()" title="convert to greyscale">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="grey" class="bi bi-palette-fill" viewBox="0 0 16 16">
  <path d="M12.433 10.07C14.133 10.585 16 11.15 16 8a8 8 0 1 0-8 8c1.996 0 1.826-1.504 1.649-3.08-.124-1.101-.252-2.237.351-2.92.465-.527 1.42-.237 2.433.07zM8 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM5 6.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
</svg></a>
&nbsp;
<a href="javascript:invertColors()" title="invert colors">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="spiral.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="1.0038413"   inkscape:cy="12.028218"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <path   style="fill:#080907;fill-opacity:0.99041533;stroke:#000000;stroke-width:0.35413408;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"   d="M 7.8490935,9.3582994 C 7.9125109,15.175258 8.0046144,15.190446 8.0046144,15.190446 4.6226405,15.292508 2.3125978,12.610557 2.3125978,9.5345523 2.3125978,6.458548 5.0547716,4.9796141 7.771333,0.99629336 7.7355147,6.4754756 7.8136598,6.1079957 7.8490935,9.3582994 Z"   id="path868"   inkscape:connector-curvature="0"   sodipodi:nodetypes="ssscs" />
  <path   sodipodi:nodetypes="ssscs"   inkscape:connector-curvature="0"   id="path871"   d="m 8.1290313,9.3898868 c -0.063417,5.8169592 -0.2799378,5.7847662 -0.2799378,5.7847662 3.3819755,0.102062 5.4431455,-2.564096 5.4431455,-5.6400996 0,-3.0760053 -2.446648,-4.4826064 -5.1632077,-8.465928 0.035818,5.479183 0.035433,5.0709575 0,8.3212614 z"   style="fill:none;fill-opacity:0.99041533;stroke:#000000;stroke-width:0.40277886;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.99680511" />
</svg></a>
&nbsp;
<a href="javascript:clearCanvas()" title="clear canvas">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
</svg></a>
&nbsp;
<a href="#" id="downloader" onclick="saveAs()" download="image.png" title="save as png file"
><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="blue" class="bi bi-save-fill" viewBox="0 0 16 16">
  <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
</svg></a>
&nbsp;
<a href="info.html" title="info">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="blue" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
  <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
</svg></a>
</div>

<div class='buttons'>
<a href="javascript:fill()" title="fill">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-bucket-fill" viewBox="0 0 16 16">
  <path d="M2.522 5H2a.5.5 0 0 0-.494.574l1.372 9.149A1.5 1.5 0 0 0 4.36 16h7.278a1.5 1.5 0 0 0 1.483-1.277l1.373-9.149A.5.5 0 0 0 14 5h-.522A5.5 5.5 0 0 0 2.522 5zm1.005 0a4.5 4.5 0 0 1 8.945 0H3.527z"/>
</svg></a>
&nbsp;
<a href="javascript:vig()" title="fade center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-record-circle-fill" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-8 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
</svg></a>
&nbsp;
<a href="javascript:chaze()" title="radial gradient:transparent center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-record-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
  <path d="M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
</svg></a>
&nbsp;
<a href="javascript:transparenter()" title='fade all'>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16">
    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
    <rect transform="rotate(90)" y="-3.7454607" x="6.5497456" height="2.8365722" width="2.8737469" id="rect4564" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4566" width="2.8737469" height="2.8365722" x="6.5178151" y="-9.4407415" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-15.136023" x="6.4858847" height="2.8365722" width="2.8737469" id="rect4568" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4570" width="2.8737469" height="2.8365722" x="12.297239" y="-3.7454612" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-9.4407425" x="12.265307" height="2.8365722" width="2.8737469" id="rect4572" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4574" width="2.8737469" height="2.8365722" x="12.233378" y="-15.136024" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-6.5820327" x="3.6759982" height="2.8365722" width="2.8737469" id="rect4576" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4578" width="2.8737469" height="2.8365722" x="3.6440678" y="-12.277313" transform="rotate(90)" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4580" width="2.8737469" height="2.8365722" x="9.3915625" y="-6.6041694" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-12.299451" x="9.3596315" height="2.8365722" width="2.8737469" id="rect4582" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4584" width="2.8737469" height="2.8365722" x="0.8341819" y="-3.7233236" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-9.4186049" x="0.80225146" height="2.8365722" width="2.8737469" id="rect4586" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4588" width="2.8737469" height="2.8365722" x="0.77032101" y="-15.113886" transform="rotate(90)" />
  </svg></a>
&nbsp;
<a href="javascript:alphaWhite()" title="clear light">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg16" sodipodi:docname="trans.svg" inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">
  <metadata id="metadata22"> <rdf:RDF> <cc:Work rdf:about=""> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /> </cc:Work> </rdf:RDF>
  </metadata>
  <defs id="defs20" />
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1002" id="namedview18" showgrid="false" inkscape:zoom="49.497475" inkscape:cx="12" inkscape:cy="2.833354" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg16" />
  <rect transform="rotate(90)" y="-3.7454607" x="6.5497456" height="2.8365722" width="2.8737469" id="rect4564" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4566" width="2.8737469" height="2.8365722" x="6.5178151" y="-9.4407415" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-15.136023" x="6.4858847" height="2.8365722" width="2.8737469" id="rect4568" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4570" width="2.8737469" height="2.8365722" x="12.297239" y="-3.7454612" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-9.4407425" x="12.265307" height="2.8365722" width="2.8737469" id="rect4572" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4574" width="2.8737469" height="2.8365722" x="12.233378" y="-15.136024" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-6.5820327" x="3.6759982" height="2.8365722" width="2.8737469" id="rect4576" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4578" width="2.8737469" height="2.8365722" x="3.6440678" y="-12.277313" transform="rotate(90)" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4580" width="2.8737469" height="2.8365722" x="9.3915625" y="-6.6041694" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-12.299451" x="9.3596315" height="2.8365722" width="2.8737469" id="rect4582" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4584" width="2.8737469" height="2.8365722" x="0.8341819" y="-3.7233236" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-9.4186049" x="0.80225146" height="2.8365722" width="2.8737469" id="rect4586" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4588" width="2.8737469" height="2.8365722" x="0.77032101" y="-15.113886" transform="rotate(90)" />
  <path id="path849" style="fill:#ffffff;fill-opacity:1;stroke-width:1.33333;stroke-opacity:0.477912" inkscape:transform-center-y="2.059284" transform="matrix(1.3477257,0,0,1.3495088,-0.30834632,-0.2915539)" d="M 11.368907,0.85414265 6.1075455,6.160568 0.90317739,11.457902 0.77152826,5.3820932 l 0.1152232,-4.54791131 5.28604914,-10e-8 z" sodipodi:nodetypes="ccccccc" />
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
 </svg></a>
&nbsp;
<a href="javascript:alphaBlack()" title="clear dark">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg16" sodipodi:docname="trans.svg" inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">
  <metadata id="metadata22"> <rdf:RDF> <cc:Work rdf:about=""> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /> </cc:Work> </rdf:RDF>
  </metadata>
  <defs id="defs20" />
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1002" id="namedview18" showgrid="false" inkscape:zoom="49.497475" inkscape:cx="12" inkscape:cy="2.833354" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg16" />
  <rect transform="rotate(90)" y="-3.7454607" x="6.5497456" height="2.8365722" width="2.8737469" id="rect4564" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4566" width="2.8737469" height="2.8365722" x="6.5178151" y="-9.4407415" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-15.136023" x="6.4858847" height="2.8365722" width="2.8737469" id="rect4568" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4570" width="2.8737469" height="2.8365722" x="12.297239" y="-3.7454612" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-9.4407425" x="12.265307" height="2.8365722" width="2.8737469" id="rect4572" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4574" width="2.8737469" height="2.8365722" x="12.233378" y="-15.136024" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-6.5820327" x="3.6759982" height="2.8365722" width="2.8737469" id="rect4576" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4578" width="2.8737469" height="2.8365722" x="3.6440678" y="-12.277313" transform="rotate(90)" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4580" width="2.8737469" height="2.8365722" x="9.3915625" y="-6.6041694" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-12.299451" x="9.3596315" height="2.8365722" width="2.8737469" id="rect4582" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4584" width="2.8737469" height="2.8365722" x="0.8341819" y="-3.7233236" transform="rotate(90)" />
  <rect transform="rotate(90)" y="-9.4186049" x="0.80225146" height="2.8365722" width="2.8737469" id="rect4586" style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" />
  <rect style="fill:#000400;fill-opacity:0.3;stroke:none;stroke-width:0.18842375" id="rect4588" width="2.8737469" height="2.8365722" x="0.77032101" y="-15.113886" transform="rotate(90)" />
  <path id="path849" style="fill:#000000;fill-opacity:1;stroke-width:1.33333;stroke-opacity:0.477912" inkscape:transform-center-y="2.059284" transform="matrix(1.3477257,0,0,1.3495088,-0.30834632,-0.2915539)" d="M 11.368907,0.85414265 6.1075455,6.160568 0.90317739,11.457902 0.77152826,5.3820932 l 0.1152232,-4.54791131 5.28604914,-10e-8 z" sodipodi:nodetypes="ccccccc" />
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
 </svg></a>
&nbsp;
<a href="javascript:sobel()" title="trace edges">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg16" sodipodi:docname="darktrans.svg" inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">
  <path id="rect4586-1" style="fill:#ffffff;fill-opacity:0.3;stroke:#000000;stroke-width:0.9;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 9.1219744,9.139273 v 0.121945 1.455278 1.455278 1.455279 H 7.6855218 6.2490693 4.8126165 3.3761635 V 12.171774 10.716496 9.261218 9.139273 l 2.8729058,-4 z" sodipodi:nodetypes="ccccccccccccccc" />
  <metadata id="metadata22"> <rdf:RDF> <cc:Work rdf:about=""> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /> <dc:title /> </cc:Work> </rdf:RDF>
  </metadata>
  <defs id="defs20" />
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1002" id="namedview18" showgrid="false" inkscape:zoom="49.497475" inkscape:cx="12" inkscape:cy="7.6435222" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg16" inkscape:document-rotation="0" />
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
  <circle style="fill:#ffffff;fill-opacity:0.298039;stroke:#000000;stroke-width:0.9;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="path889" cx="11.785112" cy="4.2830472" r="1.7239937" />
 </svg></a>
&nbsp;
<a href="javascript:frame()" title="frame">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16">
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
  <path id="path32" d="m 12.635592,2.4110169 a 0.78389831,0.78389831 0 0 1 0.783899,0.7838983 v 9.4067798 a 0.78389831,0.78389831 0 0 1 -0.783899,0.783899 H 3.2288136 A 0.78389831,0.78389831 0 0 1 2.4449153,12.601695 V 3.1949152 A 0.78389831,0.78389831 0 0 1 3.2288136,2.4110169 Z M 3.2288136,1.6271186 A 1.5677966,1.5677966 0 0 0 1.661017,3.1949152 v 9.4067798 a 1.5677966,1.5677966 0 0 0 1.5677966,1.567797 h 9.4067784 a 1.5677966,1.5677966 0 0 0 1.567797,-1.567797 V 3.1949152 A 1.5677966,1.5677966 0 0 0 12.635592,1.6271186 Z" inkscape:connector-curvature="0" style="stroke-width:0.78389829" />
</svg></a>
&nbsp;
<a href="javascript:sides()" title="left vertical rectangle">
  <svg xmlns:dc="http://purl.org/dc/elements/1.1/"xmlns:cc="http://creativecommons.org/ns#"xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"xmlns:svg="http://www.w3.org/2000/svg"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"width="24"height="24"fill="black"class="bi bi-square"viewBox="0 0 16 16"version="1.1"id="svg4"sodipodi:docname="sides.svg"inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">
  <metadata  id="metadata10"> <rdf:RDF>   <cc:Work      rdf:about="">     <dc:format>image/svg+xml</dc:format>     <dc:type        rdf:resource="http://purl.org/dc/dcmitype/StillImage" />     <dc:title />   </cc:Work> </rdf:RDF>
  </metadata>
  <defs  id="defs8"> <linearGradient    inkscape:collect="always"    id="linearGradient4624">   <stop      style="stop-color:#930000;stop-opacity:0"      offset="0"      id="stop4620" />   <stop      style="stop-color:#000000;stop-opacity:0;"      offset="1"      id="stop4622" /> </linearGradient> <linearGradient    inkscape:collect="always"    xlink:href="#linearGradient4624"    id="linearGradient4626"    x1="-15.254237"    y1="-3.9322028"    x2="-7.0847454"    y2="-3.9661012"    gradientUnits="userSpaceOnUse"    gradientTransform="matrix(0.9465875,0,0,1.4012566,5.8166497,8.5076662)" />
  </defs>
  <sodipodi:namedview  pagecolor="#ffffff"  bordercolor="#666666"  borderopacity="1"  objecttolerance="10"  gridtolerance="10"  guidetolerance="10"  inkscape:pageopacity="0"  inkscape:pageshadow="2"  inkscape:window-width="1920"  inkscape:window-height="1010"  id="namedview6"  showgrid="false"  inkscape:zoom="19.666667"  inkscape:cx="-8.5677957"  inkscape:cy="11.18644"  inkscape:window-x="-7"  inkscape:window-y="-7"  inkscape:window-maximized="1"  inkscape:current-layer="svg4"  inkscape:document-rotation="0" />
  <rect  style="fill:#ababaa;fill-opacity:0.963077;stroke:url(#linearGradient4626);stroke-width:0.7678"  id="rect4618"  width="14.246943"  height="4.2750201"  x="-15.040361"  y="1.0026311"  transform="rotate(-90)" />
  <path  d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"  id="path2" />
</svg></a>
&nbsp;
<a href="javascript:fog()" title="fog">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/"xmlns:cc="http://creativecommons.org/ns#"xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"xmlns:svg="http://www.w3.org/2000/svg"xmlns="http://www.w3.org/2000/svg"xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"width="24"height="24"fill="black"class="bi bi-square"viewBox="0 0 16 16"version="1.1"id="svg4"sodipodi:docname="spiral.svg"inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata  id="metadata10"> <rdf:RDF>   <cc:Work      rdf:about="">     <dc:format>image/svg+xml</dc:format>     <dc:type        rdf:resource="http://purl.org/dc/dcmitype/StillImage" />     <dc:title />   </cc:Work> </rdf:RDF>
  </metadata>
  <defs  id="defs8" />
  <sodipodi:namedview  pagecolor="#ffffff"  bordercolor="#666666"  borderopacity="1"  objecttolerance="10"  gridtolerance="10"  guidetolerance="10"  inkscape:pageopacity="0"  inkscape:pageshadow="2"  inkscape:window-width="2072"  inkscape:window-height="1160"  id="namedview6"  showgrid="false"  inkscape:zoom="13.906434"  inkscape:cx="-10.841665"  inkscape:cy="18.203872"  inkscape:window-x="30"  inkscape:window-y="20"  inkscape:window-maximized="1"  inkscape:current-layer="svg4" />
  <path  d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"  id="path2" />
  <path  style="fill:#888a8a;fill-opacity:0.55864198;stroke:none;stroke-width:0.11080331;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849"  d="M 3.4936262,2.5976454 C 3.0872338,3.1412311 3.3237771,3.505921 3.1199848,3.876956 2.8906209,4.3133738 2.3621486,4.3787723 1.9317534,4.5375182 1.5360293,4.7367561 1.2407889,5.1464083 1.2896374,5.7142812 1.3313797,6.2344393 1.7757823,6.8401544 2.2714844,7.0346152 2.7797459,7.225398 3.1955757,6.9735192 3.3536995,6.5605525 3.518019,6.1376089 3.7904449,5.7300443 4.293168,5.7429811 4.7567496,5.7605348 5.2688976,6.0516603 5.7319202,6.0612877 6.1340196,6.0936998 6.4814031,5.8287707 6.4328211,5.3621227 6.3803729,5.0086722 6.2333807,4.633008 6.2435518,4.2906462 6.2387249,3.9287182 6.3859276,3.6241736 6.645739,3.4793493 6.9177488,3.313234 7.2927716,3.3593277 7.6515928,3.4172229 7.8729055,3.4481736 8.1162323,3.4653933 8.2371838,3.2971462 8.4715772,2.9755007 8.3364001,2.3364579 7.9487899,1.9283481 7.539987,1.487651 6.971619,1.3888688 6.5984159,1.5423824 6.2011761,1.6969899 6.0607185,2.1538838 5.7807116,2.4466424 5.4998842,2.7856962 4.9736573,2.7525498 4.4905986,2.6570678 4.1624432,2.594835 3.7645712,2.2352364 3.5248663,2.5558599 Z"  id="path857"  inkscape:connector-curvature="0"  sodipodi:nodetypes="sssssssssssssssssss" />
  <path  sodipodi:nodetypes="sssssssssssssssssss"  inkscape:connector-curvature="0"  id="path860"  d="M 9.8487028,7.1022589 C 9.6919909,6.3640114 10.014502,6.0121742 9.9693498,5.5290055 9.9249238,4.9636047 9.503293,4.7396777 9.1957337,4.4362681 8.9310433,4.096161 8.8222024,3.5429159 9.0560764,2.9050511 9.267776,2.3199358 9.8467098,1.7500832 10.329067,1.6665919 c 0.491655,-0.075731 0.755355,0.3304445 0.747913,0.8488649 -0.0056,0.531614 0.08476,1.0760368 0.51137,1.20282 0.395302,0.1104567 0.924298,-0.079322 1.316437,0.040074 0.348712,0.076088 0.550494,0.4779557 0.351218,0.9997407 -0.164076,0.3908046 -0.415106,0.7804619 -0.522828,1.1761834 -0.126977,0.4139438 -0.106758,0.8048786 0.06227,1.0442569 0.172036,0.2672458 0.502655,0.3200066 0.823672,0.3546594 0.196383,0.026833 0.40659,0.075626 0.451033,0.3027592 0.08763,0.4351171 -0.24292,1.1303285 -0.707049,1.489431 -0.492995,0.3905244 -1.003887,0.3437547 -1.26519,0.06246 C 11.816791,8.8985227 11.853987,8.334673 11.718242,7.919852 11.59753,7.4516782 11.14432,7.3414637 10.706196,7.3149397 10.409458,7.2939006 9.9531848,7.5944473 9.8607518,7.1590066 Z"  style="fill:#888a8a;fill-opacity:0.55864198;stroke:none;stroke-width:0.11404632;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
  <path  sodipodi:nodetypes="sssssssssssssssssss"  inkscape:connector-curvature="0"  id="path862"  d="m 10.655855,10.002164 c -0.386375,0.527057 -0.233992,0.941274 -0.438227,1.309789 -0.2318672,0.434685 -0.6660156,0.441001 -1.0308229,0.557812 -0.3410923,0.163803 -0.623359,0.562311 -0.6443277,1.169272 -0.021634,0.555605 0.2731093,1.249718 0.6531067,1.514584 0.3905391,0.262468 0.7534877,0.04533 0.9252709,-0.373006 0.177855,-0.428164 0.441456,-0.827177 0.846453,-0.753635 0.372864,0.07377 0.755863,0.442923 1.129118,0.508236 0.321585,0.08218 0.630593,-0.15692 0.641002,-0.656692 -0.0047,-0.380404 -0.08359,-0.79558 -0.03892,-1.15679 0.03462,-0.383711 0.186042,-0.688575 0.411476,-0.810956 0.237562,-0.143466 0.535803,-0.05003 0.819689,0.05398 0.175602,0.0591 0.370463,0.106307 0.486143,-0.0574 0.223713,-0.312589 0.182476,-1.005168 -0.08739,-1.4833338 -0.283542,-0.5151899 -0.732463,-0.687422 -1.050483,-0.5693426 -0.337565,0.1163768 -0.499744,0.5833205 -0.757253,0.8598994 -0.2631,0.325488 -0.684943,0.227754 -1.065256,0.06917 -0.258646,-0.104946 -0.54198,-0.5329801 -0.769877,-0.2221062 z"  style="fill:#888a8a;fill-opacity:0.55864198;stroke:none;stroke-width:0.10325426;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849" />
  <path  style="fill:#888a8a;fill-opacity:0.55864198;stroke:none;stroke-width:0.10432921;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849"  d="M 6.5302891,10.570573 C 5.989935,10.203527 6.0412577,9.7842624 5.7322494,9.5087196 5.3771883,9.1811083 4.9224013,9.2999008 4.5112525,9.2986265 4.1126371,9.2479419 3.7143789,8.9675873 3.5346377,8.4232884 3.3674955,7.9257675 3.4946813,7.2118772 3.8224138,6.8627411 4.16178,6.5127565 4.5970792,6.6055249 4.8851778,6.9355506 5.1821644,7.2727425 5.5610738,7.5589099 5.9646628,7.3760715 6.3346541,7.2022428 6.6384032,6.7576925 7.011003,6.5914198 7.325286,6.4246732 7.7099963,6.5528272 7.8508382,7.0029715 7.9447874,7.3492396 7.9704941,7.7482742 8.1110599,8.062961 8.2469774,8.4009343 8.4843209,8.63391 8.7514469,8.68021 9.0367131,8.742151 9.3237015,8.5718909 9.592959,8.3961709 9.7608708,8.2922101 9.9519818,8.1935313 10.115298,8.3087791 10.430096,8.5280283 10.567177,9.1677955 10.409853,9.6787381 10.247897,10.227164 9.8241288,10.512079 9.461487,10.496233 9.078886,10.487487 8.7881713,10.110691 8.4474653,9.9337828 8.0882039,9.7141342 7.6733202,9.9237388 7.3176124,10.176602 7.0749516,10.345932 6.8905429,10.815283 6.5718249,10.598787 Z"  id="path864"  inkscape:connector-curvature="0"  sodipodi:nodetypes="sssssssssssssssssss" />
  <path  style="fill:#888a8a;fill-opacity:0.55864198;stroke:none;stroke-width:0.10325426;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.51851849"  d="M 5.8249687,10.182541 C 5.2177979,9.9829322 4.8954126,10.272807 4.4932581,10.197814 4.0219614,10.11821 3.8688942,9.6950423 3.639568,9.3773095 3.3758498,9.0987583 2.9201205,8.9575009 2.364812,9.1429787 1.8556624,9.3103703 1.328806,9.8347192 1.2185682,10.296885 c -0.104495,0.47168 0.21481,0.75354 0.65095,0.77983 0.4470748,0.0289 0.8969259,0.151703 0.967971,0.573418 0.05993,0.390316 -0.1434735,0.890821 -0.075772,1.278648 0.034937,0.342934 0.3557658,0.564496 0.8106793,0.405056 0.3419475,-0.133799 0.690167,-0.351939 1.0315682,-0.430778 0.3583075,-0.09633 0.6850477,-0.05147 0.8720967,0.12784 0.210211,0.18403 0.2270499,0.507916 0.2294758,0.821328 0.00618,0.192089 0.029733,0.399004 0.2168518,0.456763 0.3582564,0.113055 0.9697752,-0.162419 1.3100381,-0.589104 C 7.6014884,13.267252 7.6046702,12.769009 7.3900765,12.49754 7.1703895,12.206345 6.6936114,12.205961 6.3564077,12.047572 5.9731319,11.900306 5.9182172,11.453875 5.9323559,11.027475 c 0.00695,-0.288992 0.2974104,-0.711849 -0.060712,-0.829588 z"  id="path866"  inkscape:connector-curvature="0"  sodipodi:nodetypes="sssssssssssssssssss" />
</svg></a>

&nbsp;
<a href="javascript:flipH()">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-left-right" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
</svg></a>
&nbsp;
<a href="javascript:flipV()">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5z"/>
</svg></a>
&nbsp;
<a href="javascript:rc()" title="rotate clockwise">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
  </svg></a>
&nbsp;
<a href="javascript:rcc()" title="rotate counter-clockwise">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
  <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
</svg></a>
&nbsp;
<a href="javascript:zoom()" title="zoom canvas">
<span id="zoomout" style="display:inline;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrows-angle-expand" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"/>
</svg></span><span id="zoomin" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrows-angle-contract" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z"/>
</svg></span></a>
&nbsp;
<a href="javascript:blasco()" title='sliced: with spaces'>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-scissors" viewBox="0 0 16 16">
<defs id="defs8">
    <linearGradient   inkscape:collect="always" id="linearGradient4632">  <stop   style="stop-color:#000000;stop-opacity:1;"   offset="0"   id="stop4628" />  <stop   style="stop-color:#000000;stop-opacity:0;"   offset="1"   id="stop4630" />
    </linearGradient>
    <linearGradient inkscape:collect="always" id="linearGradient4624">  <stop   style="stop-color:#930000;stop-opacity:0"   offset="0"   id="stop4620" />  <stop   style="stop-color:#000000;stop-opacity:0;"   offset="1"   id="stop4622" />
    </linearGradient>
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4626" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,5.9490081)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4634" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,5.9490081)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4646" gradientUnits="userSpaceOnUse" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,11.77788)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4648" gradientUnits="userSpaceOnUse" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,11.77788)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4656" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,17.606753)" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4658" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,17.606753)" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" />
  </defs>
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
  <rect style="fill:url(#linearGradient4634);fill-opacity:1;stroke:url(#linearGradient4626);stroke-width:0.63685828" id="rect4618" width="14.377885" height="2.9144361" x="0.66306281" y="0.83255363" />
  <rect y="6.6614256" x="0.66306281" height="2.9144361" width="14.377885" id="rect4642" style="fill:url(#linearGradient4646);fill-opacity:1;stroke:url(#linearGradient4648);stroke-width:0.63685828" />
  <rect y="12.490298" x="0.66306281" height="2.9144361" width="14.377885" id="rect4654" style="fill:url(#linearGradient4656);fill-opacity:1;stroke:url(#linearGradient4658);stroke-width:0.63685828" />
</svg></a>
&nbsp;
<a href="javascript:shred()" title='shred and splice'>
  <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg16" sodipodi:docname="shred.svg" inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)">
    <metadata   id="metadata22">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />    </cc:Work>  </rdf:RDF>
    </metadata>
    <defs   id="defs20">  <linearGradient     inkscape:collect="always"     id="linearGradient929">    <stop       style="stop-color:#000400;stop-opacity:1;"       offset="0"       id="stop925" />    <stop       style="stop-color:#000400;stop-opacity:0;"       offset="1"       id="stop927" />  </linearGradient>  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient931"     x1="3.6759982"     y1="-5.1637466"     x2="6.5497451"     y2="-5.1637466"     gradientUnits="userSpaceOnUse"     gradientTransform="translate(-10.276618,0.05087495)" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient933"     x1="0.8341819"     y1="-2.3050375"     x2="3.7079288"     y2="-2.3050375"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient935"     x1="0.80225146"     y1="-8.0003188"     x2="3.6759983"     y2="-8.0003188"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient937"     x1="3.6440678"     y1="-10.859027"     x2="6.5178146"     y2="-10.859027"     gradientUnits="userSpaceOnUse"     gradientTransform="translate(-15.939968,5.7780859)" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient939"     x1="0.77032101"     y1="-13.6956"     x2="3.6440679"     y2="-13.6956"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient941"     x1="6.4858847"     y1="-13.717736"     x2="9.3596315"     y2="-13.717736"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient943"     x1="6.5178151"     y1="-8.0224555"     x2="9.391562"     y2="-8.0224555"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient945"     x1="6.5497456"     y1="-2.3271747"     x2="9.4234924"     y2="-2.3271747"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient947"     x1="9.3915625"     y1="-5.1858833"     x2="12.265309"     y2="-5.1858833"     gradientUnits="userSpaceOnUse"     gradientTransform="translate(-5.6425526,16.014319)" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient949"     x1="9.3596315"     y1="-10.881165"     x2="12.233378"     y2="-10.881165"     gradientUnits="userSpaceOnUse"     gradientTransform="translate(0.08465981,21.67767)" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient951"     x1="12.297239"     y1="-2.3271751"     x2="15.170986"     y2="-2.3271751"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient953"     x1="12.265307"     y1="-8.0224564"     x2="15.139054"     y2="-8.0224564"     gradientUnits="userSpaceOnUse" />  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient929"     id="linearGradient955"     x1="12.233378"     y1="-13.717738"     x2="15.107125"     y2="-13.717738"     gradientUnits="userSpaceOnUse" />
    </defs>
    <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="1920"   inkscape:window-height="1010"   id="namedview18"   showgrid="false"   inkscape:zoom="24.896051"   inkscape:cx="-4.4315523"   inkscape:cy="12"   inkscape:window-x="-7"   inkscape:window-y="-7"   inkscape:window-maximized="1"   inkscape:current-layer="svg16" />
    <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
    <rect   transform="rotate(90)"   y="-3.7454607"   x="6.5497456"   height="2.8365722"   width="2.8737469"   id="rect4564"   style="fill:url(#linearGradient945);fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect   style="fill:url(#linearGradient943);fill-opacity:1;stroke:none;stroke-width:0.18842375"   id="rect4566"   width="2.8737469"   height="2.8365722"   x="6.5178151"   y="-9.4407415"   transform="rotate(90)" />
    <rect   transform="rotate(90)"   y="-15.136023"   x="6.4858847"   height="2.8365722"   width="2.8737469"   id="rect4568"   style="fill:url(#linearGradient941);fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect   style="fill:url(#linearGradient951);fill-opacity:1;stroke:none;stroke-width:0.18842375"   id="rect4570"   width="2.8737469"   height="2.8365722"   x="12.297239"   y="-3.7454612"   transform="rotate(90)" />
    <rect   transform="rotate(90)"   y="-9.4407425"   x="12.265307"   height="2.8365722"   width="2.8737469"   id="rect4572"   style="fill:url(#linearGradient953);fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect   style="fill:url(#linearGradient955);fill-opacity:1;stroke:none;stroke-width:0.18842375"   id="rect4574"   width="2.8737469"   height="2.8365722"   x="12.233378"   y="-15.136024"   transform="rotate(90)" />
    <rect   transform="scale(-1)"   y="-6.5311575"   x="-6.6006203"   height="2.8365722"   width="2.8737469"   id="rect4576"   style="fill:url(#linearGradient931);fill-opacity:1;stroke:none;stroke-width:0.188424" />
    <rect   style="fill:url(#linearGradient937);fill-opacity:1;stroke:none;stroke-width:0.188424"   id="rect4578"   width="2.8737469"   height="2.8365722"   x="-12.2959"   y="-6.4992275"   transform="scale(-1)" />
    <rect   style="fill:url(#linearGradient947);fill-opacity:1;stroke:none;stroke-width:0.188424"   id="rect4580"   width="2.8737469"   height="2.8365722"   x="3.7490098"   y="9.4101496" />
    <rect   y="9.3782187"   x="9.4442911"   height="2.8365722"   width="2.8737469"   id="rect4582"   style="fill:url(#linearGradient949);fill-opacity:1;stroke:none;stroke-width:0.188424" />
    <rect   style="fill:url(#linearGradient933);fill-opacity:1;stroke:none;stroke-width:0.18842375"   id="rect4584"   width="2.8737469"   height="2.8365722"   x="0.8341819"   y="-3.7233236"   transform="rotate(90)" />
    <rect   transform="rotate(90)"   y="-9.4186049"   x="0.80225146"   height="2.8365722"   width="2.8737469"   id="rect4586"   style="fill:url(#linearGradient935);fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect   style="fill:url(#linearGradient939);fill-opacity:1;stroke:none;stroke-width:0.18842375"   id="rect4588"   width="2.8737469"   height="2.8365722"   x="0.77032101"   y="-15.113886"   transform="rotate(90)" />
  </svg></a>
&nbsp;
<a href="javascript:slices()" title='alternative inverted slices horizontal'>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16">
<defs id="defs8">
    <linearGradient inkscape:collect="always" id="linearGradient4632">  <stop   style="stop-color:#000000;stop-opacity:1;"   offset="0"   id="stop4628" />  <stop   style="stop-color:#000000;stop-opacity:0;"   offset="1"   id="stop4630" />
    </linearGradient>
    <linearGradient inkscape:collect="always" id="linearGradient4624">  <stop   style="stop-color:#930000;stop-opacity:0"   offset="0"   id="stop4620" />  <stop   style="stop-color:#000000;stop-opacity:0;"   offset="1"   id="stop4622" />
    </linearGradient>
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4626" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,5.9490081)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4634" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,5.9490081)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4638" gradientUnits="userSpaceOnUse" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" gradientTransform="matrix(0.95528744,0,0,0.95528744,6.0077579,8.8634442)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4640" gradientUnits="userSpaceOnUse" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" gradientTransform="matrix(0.95528744,0,0,0.95528744,6.0077579,8.8634442)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4646" gradientUnits="userSpaceOnUse" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,11.77788)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4648" gradientUnits="userSpaceOnUse" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,11.77788)" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4650" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,6.0077579,14.692317)" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4652" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,6.0077579,14.692317)" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4632" id="linearGradient4656" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,17.606753)" x1="-22.367231" y1="-3.8305081" x2="-6.649717" y2="-3.8305081" />
    <linearGradient inkscape:collect="always" xlink:href="#linearGradient4624" id="linearGradient4658" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.95528744,0,0,0.95528744,21.711768,17.606753)" x1="-15.254237" y1="-3.9322028" x2="-7.0847454" y2="-3.9661012" />
  </defs>
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="2072" inkscape:window-height="1160" id="namedview6" showgrid="false" inkscape:zoom="19.666667" inkscape:cx="-7.4646917" inkscape:cy="11.59322" inkscape:window-x="30" inkscape:window-y="20" inkscape:window-maximized="1" inkscape:current-layer="svg4" />
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
  <rect style="fill:url(#linearGradient4634);fill-opacity:1;stroke:url(#linearGradient4626);stroke-width:0.63685828" id="rect4618" width="14.377885" height="2.9144361" x="0.66306281" y="0.83255363" />
  <rect y="3.7469897" x="-15.040948" height="2.9144361" width="14.377885" id="rect4636" style="fill:url(#linearGradient4638);fill-opacity:1;stroke:url(#linearGradient4640);stroke-width:0.63685828" transform="scale(-1,1)" />
  <rect y="6.6614256" x="0.66306281" height="2.9144361" width="14.377885" id="rect4642" style="fill:url(#linearGradient4646);fill-opacity:1;stroke:url(#linearGradient4648);stroke-width:0.63685828" />
  <rect transform="scale(-1,1)" style="fill:url(#linearGradient4650);fill-opacity:1;stroke:url(#linearGradient4652);stroke-width:0.63685828" id="rect4644" width="14.377885" height="2.9144361" x="-15.040948" y="9.5758619" />
  <rect y="12.490298" x="0.66306281" height="2.9144361" width="14.377885" id="rect4654" style="fill:url(#linearGradient4656);fill-opacity:1;stroke:url(#linearGradient4658);stroke-width:0.63685828" />
</svg></a>
&nbsp;
<a href="javascript:pixelado()" title='pixelado'>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16">
    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
    <rect transform="rotate(90)" y="-3.7454607" x="6.5497456" height="2.8365722" width="2.8737469" id="rect4564" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4566" width="2.8737469" height="2.8365722" x="6.5178151" y="-9.4407415" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-15.136023" x="6.4858847" height="2.8365722" width="2.8737469" id="rect4568" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4570" width="2.8737469" height="2.8365722" x="12.297239" y="-3.7454612" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-9.4407425" x="12.265307" height="2.8365722" width="2.8737469" id="rect4572" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4574" width="2.8737469" height="2.8365722" x="12.233378" y="-15.136024" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-6.5820327" x="3.6759982" height="2.8365722" width="2.8737469" id="rect4576" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4578" width="2.8737469" height="2.8365722" x="3.6440678" y="-12.277313" transform="rotate(90)" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4580" width="2.8737469" height="2.8365722" x="9.3915625" y="-6.6041694" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-12.299451" x="9.3596315" height="2.8365722" width="2.8737469" id="rect4582" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4584" width="2.8737469" height="2.8365722" x="0.8341819" y="-3.7233236" transform="rotate(90)" />
    <rect transform="rotate(90)" y="-9.4186049" x="0.80225146" height="2.8365722" width="2.8737469" id="rect4586" style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" />
    <rect style="fill:#000400;fill-opacity:1;stroke:none;stroke-width:0.18842375" id="rect4588" width="2.8737469" height="2.8365722" x="0.77032101" y="-15.113886" transform="rotate(90)" />
  </svg></a>
&nbsp;
<a href="javascript:flipStrip()" title='flip random strip vertical'>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="randomrectH.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title></dc:title>    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8">  <linearGradient     inkscape:collect="always"     id="linearGradient4624">    <stop       style="stop-color:#930000;stop-opacity:0"       offset="0"       id="stop4620" />    <stop       style="stop-color:#000000;stop-opacity:0;"       offset="1"       id="stop4622" />  </linearGradient>  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient4624"     id="linearGradient4626"     x1="-15.254237"     y1="-3.9322028"     x2="-7.0847454"     y2="-3.9661012"     gradientUnits="userSpaceOnUse"     gradientTransform="matrix(0.95034692,0,0,1.1975809,5.8033975,-1.9426262)" />
  </defs>
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-6.3050839"   inkscape:cy="10.77966"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <rect   style="fill:#8f8f8f;fill-opacity:0.95692306;stroke:url(#linearGradient4626);stroke-width:0.71121722"   id="rect4618"   width="14.303526"   height="3.6536365"   x="-15.136449"   y="-8.3567896"   transform="matrix(0,-1,-1,0,0,0)" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2"   style="fill:#000000;fill-opacity:1" />
</svg></a>
&nbsp;
<a href="javascript:flipStripH()" title='flip random strip horizontal'>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="randomrectH.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title></dc:title>    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8">  <linearGradient     inkscape:collect="always"     id="linearGradient4624">    <stop       style="stop-color:#930000;stop-opacity:0"       offset="0"       id="stop4620" />    <stop       style="stop-color:#000000;stop-opacity:0;"       offset="1"       id="stop4622" />  </linearGradient>  <linearGradient     inkscape:collect="always"     xlink:href="#linearGradient4624"     id="linearGradient4626"     x1="-15.254237"     y1="-3.9322028"     x2="-7.0847454"     y2="-3.9661012"     gradientUnits="userSpaceOnUse"     gradientTransform="matrix(0.95034692,0,0,1.1975809,5.8343839,10.843218)" />
  </defs>
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="19.666667"   inkscape:cx="-6.3050839"   inkscape:cy="10.77966"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <rect   style="fill:#8f8f8f;fill-opacity:0.95692307;stroke:url(#linearGradient4626);stroke-width:0.71121722"   id="rect4618"   width="14.303526"   height="3.6536365"   x="-15.105463"   y="4.4290547"   transform="scale(-1,1)" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2"   style="fill:#000000;fill-opacity:1" />
</svg></a>
&nbsp;
<a href="javascript:smeardown()" title='smear down'>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="randomrectV.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata   id="metadata10">  <rdf:RDF>    <cc:Work       rdf:about="">      <dc:format>image/svg+xml</dc:format>      <dc:type         rdf:resource="http://purl.org/dc/dcmitype/StillImage" />      <dc:title />    </cc:Work>  </rdf:RDF>
  </metadata>
  <defs   id="defs8" />
  <sodipodi:namedview   pagecolor="#ffffff"   bordercolor="#666666"   borderopacity="1"   objecttolerance="10"   gridtolerance="10"   guidetolerance="10"   inkscape:pageopacity="0"   inkscape:pageshadow="2"   inkscape:window-width="2072"   inkscape:window-height="1160"   id="namedview6"   showgrid="false"   inkscape:zoom="27.812867"   inkscape:cx="-1.4617994"   inkscape:cy="17.105073"   inkscape:window-x="30"   inkscape:window-y="20"   inkscape:window-maximized="1"   inkscape:current-layer="svg4" />
  <path   d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"   id="path2" />
  <g   id="g873"   transform="translate(0.09587888,-0.59924302)">  <rect     y="3.685591"     x="4.1529298"     height="6.2321272"     width="0.74306136"     id="rect851"     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.58212769" />  <rect     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66666669"     id="rect857"     width="0.74306136"     height="8.1736746"     x="7.5386887"     y="4.716289" />  <rect     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.58212769"     id="rect859"     width="0.74306136"     height="6.2321272"     x="10.888421"     y="3.7095606" />  <path     inkscape:transform-center-y="0.30177107"     d="M 4.5364461,10.765257 4.0137633,9.8599433 3.4910804,8.9546301 l 1.0453657,0 1.0453656,-10e-8 -0.5226828,0.9053133 z"     inkscape:randomized="0"     inkscape:rounded="0"     inkscape:flatsided="false"     sodipodi:arg2="2.6179939"     sodipodi:arg1="1.5707963"     sodipodi:r2="0.60354215"     sodipodi:r1="1.2070843"     sodipodi:cy="9.5581722"     sodipodi:cx="4.5364461"     sodipodi:sides="3"     id="path861"     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66666669"     sodipodi:type="star" />  <path     sodipodi:type="star"     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66666669"     id="path863"     sodipodi:sides="3"     sodipodi:cx="7.9161768"     sodipodi:cy="12.602328"     sodipodi:r1="1.2070843"     sodipodi:r2="0.60354215"     sodipodi:arg1="1.5707963"     sodipodi:arg2="2.6179939"     inkscape:flatsided="false"     inkscape:rounded="0"     inkscape:randomized="0"     d="M 7.9161768,13.809413 7.393494,12.904099 6.8708111,11.998786 l 1.0453657,0 1.0453656,0 -0.5226828,0.905313 z"     inkscape:transform-center-y="0.30177107" />  <path     inkscape:transform-center-y="0.30177107"     d="m 11.223998,10.980984 -0.522683,-0.905313 -0.522683,-0.9053131 1.045366,0 1.045366,0 -0.522683,0.9053131 z"     inkscape:randomized="0"     inkscape:rounded="0"     inkscape:flatsided="false"     sodipodi:arg2="2.6179939"     sodipodi:arg1="1.5707963"     sodipodi:r2="0.60354215"     sodipodi:r1="1.2070843"     sodipodi:cy="9.7739"     sodipodi:cx="11.223998"     sodipodi:sides="3"     id="path865"     style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.66666669"     sodipodi:type="star" />
  </g>
</svg></a>
&nbsp;
<a href="javascript:smear()" title='smear offset/tilt'>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24" height="24" fill="black" class="bi bi-square" viewBox="0 0 16 16" version="1.1" id="svg4" sodipodi:docname="frame (1).svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <metadata id="metadata10">  <rdf:RDF>  <cc:Work     rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type       rdf:resource="http://purl.org/dc/dcmitype/StillImage" />    <dc:title />  </cc:Work>  </rdf:RDF>
  </metadata>
  <defs id="defs8" />
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="2072" inkscape:window-height="1160" id="namedview6" showgrid="false" inkscape:zoom="19.666667" inkscape:cx="-9.3305082" inkscape:cy="11.59322" inkscape:window-x="30" inkscape:window-y="20" inkscape:window-maximized="1" inkscape:current-layer="svg4" />
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" id="path2" />
  <g id="g841" transform="rotate(-150.64387,-0.21090189,2.1719329)">  <path   sodipodi:open="true"   d="m -8.2711866,1.0338986 a 3.9830506,3.9830506 0 0 1 -3.1275674,3.8900953 3.9830506,3.9830506 0 0 1 -4.471051,-2.21906 3.9830506,3.9830506 0 0 1 1.206976,-4.8433181"   sodipodi:end="4.0629869"   sodipodi:start="0"   sodipodi:ry="3.9830506"   sodipodi:rx="3.9830506"   sodipodi:cy="1.0338986"   sodipodi:cx="-12.254237"   sodipodi:type="arc"   id="path822"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.66666669;stroke-opacity:1" />  <path   transform="matrix(1.0052093,0,0,0.91381353,0.23647801,-0.37449753)"   inkscape:transform-center-y="0.11368069"   inkscape:transform-center-x="0.17037484"   d="m -14.338983,-1.1525422 -0.723946,-0.6667754 -0.723946,-0.6667754 0.939417,-0.2935679 0.939418,-0.2935679 -0.215472,0.9603433 z"   inkscape:randomized="0"   inkscape:rounded="0"   inkscape:flatsided="false"   sodipodi:arg2="2.315109"   sodipodi:arg1="1.2679115"   sodipodi:r2="0.56823915"   sodipodi:r1="1.1364783"   sodipodi:cy="-2.237288"   sodipodi:cx="-14.677966"   sodipodi:sides="3"   id="path837"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.66666669;stroke-opacity:1"   sodipodi:type="star" />
  </g>
  <g transform="rotate(29.356133,-14.09337,39.168362)" id="g864">  <path   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.66666669;stroke-opacity:1"   id="path860"   sodipodi:type="arc"   sodipodi:cx="-12.254237"   sodipodi:cy="1.0338986"   sodipodi:rx="3.9830506"   sodipodi:ry="3.9830506"   sodipodi:start="0"   sodipodi:end="4.0629869"   d="m -8.2711866,1.0338986 a 3.9830506,3.9830506 0 0 1 -3.1275674,3.8900953 3.9830506,3.9830506 0 0 1 -4.471051,-2.21906 3.9830506,3.9830506 0 0 1 1.206976,-4.8433181"   sodipodi:open="true" />  <path   sodipodi:type="star"   style="fill:none;fill-opacity:0.98461537;stroke:#000000;stroke-width:0.66666669;stroke-opacity:1"   id="path862"   sodipodi:sides="3"   sodipodi:cx="-14.677966"   sodipodi:cy="-2.237288"   sodipodi:r1="1.1364783"   sodipodi:r2="0.56823915"   sodipodi:arg1="1.2679115"   sodipodi:arg2="2.315109"   inkscape:flatsided="false"   inkscape:rounded="0"   inkscape:randomized="0"   d="m -14.338983,-1.1525422 -0.723946,-0.6667754 -0.723946,-0.6667754 0.939417,-0.2935679 0.939418,-0.2935679 -0.215472,0.9603433 z"   inkscape:transform-center-x="0.17037484"   inkscape:transform-center-y="0.11368069"   transform="matrix(1.0052093,0,0,0.91381353,0.23647801,-0.37449753)" />
  </g>
</svg></a>

</div>
<div id="background" style="width:1024px;height:1024px;float:left;position:absolute;">
<canvas id="myCanvas" width="1024" height="1024" style="border:1px solid #000000;">
</canvas>
</div>
</div>
<br>
 <div sytle="display:block;">
   <canvas id="offscreen" width='512' height='512' ></canvas>
 </div>
  <div sytle="display:none;">
   <canvas id="off" width='512' height='512' sytle="visibility:hidden;"></canvas>
 </div>
 <br><br>

<script>
let BLACK = 0
let LASTCLICK = [512,512]

window.onload = function () {
  let myCanvas = document.getElementById("myCanvas")
  LASTCLICK[0] = myCanvas.width/2
  LASTCLICK[1] = myCanvas.height/2
  myCanvas.addEventListener('click', function(event) {
    var rect = myCanvas.getBoundingClientRect();
    var x = event.clientX - rect.left;
    var y = event.clientY - rect.top;
    LASTCLICK = []
    LASTCLICK.push(x)
    LASTCLICK.push(y)
}, false);
let result = document.getElementById("background")
result.style.backgroundColor = "#fff";
let g = document.getElementById("grungy")
  g.addEventListener( 'change', function() {
    let zout = document.getElementById("zoomout")
    let zin = document.getElementById("zoomin")
    if(this.checked) {
      zout.style.display = "none"
      zin.style.display = "inline"
    } else {
        // Checkbox is not checked..
      zout.style.display = "inline"
      zin.style.display = "none"
    }
});
  document.getElementById("paintcolor").value = randomColor()
  const selectElement = document.getElementById("mode");
  selectElement.addEventListener('change', (event) => {
  let ctx = document.getElementById("myCanvas").getContext("2d");
  ctx.globalCompositeOperation = selectElement.value
  let filePicker = document.getElementById("uploadimage");
  filePicker.addEventListener("click", function(){this.value = null;}, false);
});
}

function textTool () {
  window.open("text tool.html")
}

function setDate () {
  let d = document.getElementById("bdate")
  let date = new Date()
  d.innerHTML = date.toString().substring(0,25)
}

function swapDiag () {// number to divide height by, to match width's divisor
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let W = 2 + Math.floor(document.getElementById("speck_size").value/10)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100

  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = w
  let N = wdivs * hdivs
  let temp = document.createElement('CANVAS')
  let tempctx = temp.getContext("2d")
  temp.width = canvas.width
  temp.height = canvas.height
  tempctx.drawImage(canvas, 0, 0, temp.width, temp.height)
  let grunge = document.getElementById("grungy").checkd

  let sx = 0, sy = 0
  let dx = 0, dy = 0
  tempctx.imageSmoothingEnabled = false
  ctx.imageSmoothingEnabled = false
  for (; i < wdivs; i++) {
    let j = 0
    for (; j < wdivs; j++) {
      sx = i, sy = j
      dx = j, dy = i
      if (grunge)
        tempctx.translate(pt(20), pt(20))
      ctx.drawImage(temp, dx*w, dy*h, w, h, sx*w, sy*h, w, h)
      ctx.drawImage(temp, sx*w, sy*h, w, h, dx*w, dy*h, w, h)
    }
  }
}

function randomTexture () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let val = document.getElementById("speck_opacity").value
  let num = document.getElementById("number").value
  let size = document.getElementById("speck_size").value
  let color = document.getElementById("paintcolor").value
  functions = ["smudge", "smudge", "smudge", "smudge", "smudge", "blobs", "specksRadial", "strokes"]
  let args = ["", "streaks", "arcs", "stars", "horizontal"]
  let i = 0
  for (; i < 4; i++) {
    randomPickColor()
    let f = randomPick(functions)
    let a = ''
    if (f == "smudge")
      a = randomPick(args)
    document.getElementById("number").value = 3 + Math.random() * 10000
    document.getElementById("speck_size").value = 1 + Math.random() * 400
    document.getElementById("speck_opacity").value = 15 + Math.random() + 75
    window[f](a)
  }
  sobel()
  
  document.getElementById("speck_opacity").value = 50
  alphaWhite()
  if (Math.random() > 0.6)
    alphaBlack()
  let mode = ctx.globalCompositeOperation
  ctx.globalCompositeOperation = "source-atop"
  ctx.fillStyle = color
  ctx.fillRect(0,0,canvas.width, canvas.height)
  ctx.globalCompositeOperation = "destination-out"
  functions = functions.slice(0, -1)
  functions.push("rays")
  i = 0
  for (; i < 3; i++) {
    randomPickColor()
    let f = randomPick(functions)
    let a = ''
    if (f == "smudge")
      a = randomPick(args)
    document.getElementById("number").value = 3 + Math.random() * 10000
    document.getElementById("speck_size").value = 1 + Math.random() * 400
    document.getElementById("speck_opacity").value = 25 + Math.random() + 70
    window[f](a)
  }
  document.getElementById("speck_opacity").value = val
  document.getElementById("number").value = num
  document.getElementById("speck_size").value = size
  document.getElementById("paintcolor").value = color
  ctx.globalCompositeOperation = mode
}

function draw (canvas, ctx, temp, tempctx) {
  var img = new Image();
  img.onload = function () {
   // var canvas = document.getElementById('canvas');
   // var context = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);
  };
}

function swap () {// number to divide height by, to match width's divisor
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let W = 2 + Math.floor(document.getElementById("speck_size").value/10)
  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = w
  let N = wdivs * hdivs
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100

  let temp = document.createElement('CANVAS')
  let tempctx = temp.getContext("2d")
  temp.width = canvas.width
  temp.height = canvas.height
  let MAX = N/5
  if (MAX > 20)
    MAX = 20

  let src = Math.floor(Math.random() * N)
  let sx = src %W, sy = Math.floor(src/W)
  let dest = Math.floor(Math.random() * N)
  let dx = dest % W, dy = Math.floor(dest/W)
  tempctx.imageSmoothingEnabled = false
  ctx.imageSmoothingEnabled = false
  tempctx.drawImage(canvas, 0, 0, temp.width, temp.height)
  let grunge = document.getElementById("grungy").checkd
    
  for (; i < MAX; i++) {
    src = Math.floor(Math.random() * N)
    sx = src %W, sy = Math.floor(src/W)
    dest = Math.floor(Math.random() * N)
    dx = dest % W, dy = Math.floor(dest/W)
    //console.log(sx,sy,dx,dy)
    //tempctx.imageSmoothingEnabled = false
    //ctx.imageSmoothingEnabled = false
    if (grunge)
      tempctx.translate(pt(2), pt(2))
    ctx.drawImage(temp, sx*w, sy*h, w, h, dx*w, dy*h, w, h)
    ctx.drawImage(temp, dx*w, dy*h, w, h, sx*w, sy*h, w, h)
    tempctx.drawImage(canvas, 0, 0, temp.width, temp.height)
  }
}

function testHW () {// number to divide height by, to match width's divisor
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let wdivs = 20
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let diff  = (ch - (hdivs*h))
  let i = 0, x = w
  for (; i < wdivs; i++) {
    ctx.beginPath()
    ctx.moveTo(x, 0)
    ctx.lineTo(x,ch)
    ctx.closePath()
    ctx.stroke()
    x += w
  }

  i = 0, y = h
  for (; i < hdivs; i++) {
    ctx.beginPath()
    ctx.moveTo(0, y)
    ctx.lineTo(cw,y)
    ctx.closePath()
    ctx.stroke()
    y += h
  }
  
  ctx.fillRect(4*w, 4*h, w,h)
  ctx.fillRect(1*w, 4*h, w,h)
  ctx.fillRect(4*w, 1*h, w,h)
  let temp = document.createElement('CANVAS')
  let tempctx = temp.getContext("2d")
  temp.width = w
  temp.height = h
  tempctx.drawImage(canvas, 10*w, 10*h, w, h, 0, 0, temp.width, temp.height)
  ctx.drawImage(canvas, 9*w, 9*h, w, h, 10*w, 10*h, w, h)
  ctx.drawImage(temp, 0, 0, w, h, 9*w, 9*h, w, h)

}

function showColors () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let colors = colorSample()
  let i = 0, x = 10, y = 10
  if (document.getElementById("grungy").checked) {
    ctx.clearRect(10,10,40,canvas.height)
    for (;i < colors.length; i++) {
      ctx.beginPath()
      ctx.moveTo(x, y)
      ctx.lineTo(x+40, y)
      ctx.lineTo(x+40, y+40)
      ctx.lineTo(x, y+40)
      ctx.closePath()
      ctx.fillStyle = colors[i]
      /*
      let cl = []
      cl.push(hexToR(colors[i]))
      cl.push(hexToG(colors[i]))
      cl.push(hexToB(colors[i]))
      console.log(colors[i], interesting(cl))*/
      ctx.fill()
      y += 44
    }
  }
}

function colorSample () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  saturationScale(1.1)
  let mind = 1000000
  let maxd = -1000000
  let pixels = imgData.data;
  let sample = []
  let i = 0, j = 0
  for (; i < 2000; i++) {
    let n = 4 * Math.floor(Math.random() * pixels.length/4)
    let c = []
    c.push(pixels[n])
    c.push(pixels[n+1])
    c.push(pixels[n+2])
    sample.push(c)
  }
  i = 0, j = 1
  let m = 0
  for (; i < sample.length; i++) {
    j = i + 1
    for (; j < sample.length; j++) {
      m += dist3d(sample[i], sample[j])
      maxd = (maxd < m)? m: maxd
    }
  }
  let threshold = m/sample.length/sample.length * 0.8
  //console.log(threshold)
  let bins = [], bc = 0
  i = 0
  for (;i < sample.length; i++) {
    if (sample[i]) {
      bins.push([sample[i]])
      let bc = bins.length - 1
      j = i + 1
      for (; j < sample.length; j++) {
        if (sample[j] && dist3d(sample[j], bins[bc][0]) < threshold) {
          bins[bc].push(sample[j])
          sample[j] = null
        }
      }
    }
  }
 // bins.sort(function(a, b) { return b.length - a.length;});
  bins.sort(function(a, b) { return interesting(b[0]) - interesting(a[0]);});
  let count = bins.length;
  if (count > 12)
    count = 12
  let colors = [], clrs = []
  i = 0
  for (; i < count; i++) {
    if (1/*i == 0 || bins[i].length > 9*/) {
      colors.push(averageColor(bins[i]))
      clrs.push(averageColor(bins[i], true))
    }
  }
  //resort clrs by interesting
  clrs.sort(function(a, b) { return interesting(b) - interesting(a);});
 
  let colors2 = []
  i = 0, j = 0
  for (; i < clrs.length;i++) {
    let rgb = clrs[i]
    let R = ('0'+(rgb[0]).toString(16)).slice(-2),
    G = ('0'+(rgb[1]).toString(16)).slice(-2),
    B = ('0'+(rgb[2]).toString(16)).slice(-2);

    colors2.push('#'+R+G+B)
    j = 0
    for (; j < pixels.length; j += 4) {
      if (dist3d(rgb, [pixels[j], pixels[j+1], pixels[j+2]]) < threshold) {
        pixels[j] = rgb[0]
        pixels[j+1] = rgb[1]
        pixels[j+2] = rgb[2]
      }
    }
  }
  ctx.putImageData(imgData, 0, 0);
  return colors2
}

function averageColor (b, dec) {
  let aR = 0, aG = 0, aB = 0
  let i = 0
  for (; i < b.length; i++) {
    aR += b[i][0]
    aG += b[i][1]
    aB += b[i][2]
  }
  
  aR = Math.floor(aR/b.length)
  aG = Math.floor(aG/b.length)
  aB = Math.floor(aB/b.length)
  
  let R = ('0'+(aR).toString(16)).slice(-2),
  G = ('0'+(aG).toString(16)).slice(-2),
  B = ('0'+(aB).toString(16)).slice(-2);
  if (dec)
    return [aR,aG,aB]
  else
    return '#'+R+G+B;
}

function dist3d (p1, p2) {
  // d=sqrt((r2-r1)^2+(g2-g1)^2+(b2-b1)^2)
  rmean = (p1[0] + p2[0])/2
  return Math.sqrt((2+rmean/256) * Math.pow(p1[0] - p2[0], 2) + 4 * Math.pow(p1[1] - p2[1], 2)  +  (2+(255-rmean)/256) * Math.pow(p1[2] - p2[2], 2))
}

function interesting (color) {
  let average = (color[0] + color[1] + color[2])/3
  return Math.abs(color[0] - average) + Math.abs(color[1] - average) + Math.abs(color[2] - average)
}

function posterize () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let threshold = 127 - document.getElementById("speck_opacity").value * 1.27
  let grunge = document.getElementById("grungy").checked
  let t1 = 255 * 1/3
  let t2 = 255 * 2/3
  let colors = []
  colors.push(document.getElementById("paintcolor").value)
  colors.push(randomColor())
  colors.push(randomColor())
  let c = colors[0]
  
  let pixels = imgData.data;
  let i = 0
  for (; i < pixels.length; i += 4) {
    let lightness = pixels[i] * 0.2126 + pixels[i+1] * 0.7152 + pixels[i+2] * 0.0722;
    //let lightness = parseInt((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3);
    if (lightness < t1 && lightness < t2) {
      pixels[i] =   hexToR(c)
      pixels[i+1] = hexToG(c)
      pixels[i+2] = hexToB(c)
     // if (!grunge) {
        pixels[i] /= 6
        pixels[i+1] /= 6
        pixels[i+2] /= 6
     // }
    } else
    if (lightness >= t1 && lightness < t2) {
      if (grunge)
        c = colors[1]
      pixels[i] =   hexToR(c)/1.7
      pixels[i+1] = hexToG(c)/1.7
      pixels[i+2] = hexToB(c)/1.7
      
    } else
    if (lightness >= t2) {
      if (grunge)
        c = colors[2]
      pixels[i] =   hexToR(c) * 1.1
      pixels[i+1] = hexToG(c) * 1.1
      pixels[i+2] = hexToB(c) * 1.1
    }
  }
  ctx.putImageData(imgData, 0, 0);
}

function sampleImageData () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let off = document.createElement('CANVAS')
  off.width = canvas.width
  off.height = canvas.height
  let offctx = off.getContext("2d")
  offctx.fillStyle = document.getElementById("paintcolor").value
  let grunge = document.getElementById("grungy").checked
  // set above as in rectify
  let W = 0.5 + Math.floor(document.getElementById("speck_size").value/5)
  //invert range of W [2- 102] => [102 - 2]
  W = 102 - W + 0.5
  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = 0, y = 0
  let numsquares = (1+wdivs) * (1+hdivs)
  let radius = w, j = 0, linecount = 0
  let lightness = 0
  // outer loop
  for (;j < numsquares; j++) {
    let imgData = ctx.getImageData(x, y, w, h)
    let threshold = 127 - document.getElementById("speck_opacity").value * 1.27
    let pixels = imgData.data
    let i = 0, lightness = 0
    for (; i < pixels.length; i += 4) {
      lightness += parseInt((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3)
    }
    lightness /= (pixels.length/4) //avg = 0 to 255
    radius = lightness/255 * w/2
    offctx.beginPath()
    offctx.arc(x+w/2, y+h/2, radius, 0, Math.PI*2)
    offctx.closePath()
    offctx.fill()
    x += w
    if (x >= (wdivs)*w) {
      linecount++
      if (!grunge && linecount % 2 == 1)
        x = -w/2
      else
        x = 0
      y += h
    }
  }
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(off, 0, 0)
}

function sampleImageDataColor () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let off = document.createElement('CANVAS')
  off.width = canvas.width
  off.height = canvas.height
  let offctx = off.getContext("2d")
  offctx.fillStyle = document.getElementById("paintcolor").value
  let grunge = document.getElementById("grungy").checked
  // set above as in rectify
  let W = 2 + Math.floor(document.getElementById("speck_size").value/5)
  //invert range of W [2- 102] => [102 - 2]
  W = 102 - W + 2
  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = 0, y = 0
  let numsquares = (1+wdivs) * (1+hdivs)
  let radius = w, j = 0
  let lightness = 0, linecount = 0
  let r = 0, g = 0, b = 0
  // outer loop
  for (;j < numsquares; j++) {
    let imgData = ctx.getImageData(x, y, w, h)
    let threshold = 127 - document.getElementById("speck_opacity").value * 1.27
    let pixels = imgData.data
    let i = 0, r = 0, g = 0, b = 0
    for (; i < pixels.length; i += 4) {
      r += parseInt(pixels[i])
      g += parseInt(pixels[i+1])
      b += parseInt(pixels[i+2])
    }
    r /= pixels.length/4
    g /= pixels.length/4
    b /= pixels.length/4
    let R = ('0'+(Math.round(r)).toString(16)).slice(-2),
      G = ('0'+(Math.round(g)).toString(16)).slice(-2),
      B = ('0'+(Math.round(b)).toString(16)).slice(-2);
    offctx.fillStyle = "#"+R+G+B
    radius = w/2
    offctx.beginPath()
    offctx.arc(x+w/2, y+h/2, radius, 0, Math.PI*2)
    offctx.closePath()
    offctx.fill()
    x += w
    if (x >= (wdivs)*w) {
      linecount++
      if (!grunge && linecount % 2 == 1)
        x = -w/2
      else
        x = 0
      y += h
    }
  }
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(off, 0, 0)
}

function sampleImageDataColor2 () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let off = document.createElement('CANVAS')
  off.width = canvas.width
  off.height = canvas.height
  let offctx = off.getContext("2d")
  offctx.fillStyle = document.getElementById("paintcolor").value
  let targetcolor = document.getElementById("paintcolor").value
  let tr = hexToR(targetcolor)
  let tg = hexToG(targetcolor)
  let tb = hexToB(targetcolor)
  let targ = [tr,tg,tb]
  let maxd = []
  if (tr > 127)
    maxd.push(0)
  else
    maxd.push(255)
  if (tg > 127)
    maxd.push(0)
  else
    maxd.push(255)
  if (tb > 127)
    maxd.push(0)
  else
    maxd.push(255)
  let maxdist = dist3d(maxd, targ)
  let grunge = document.getElementById("grungy").checked
  // set above as in rectify
  let W = 2 + Math.floor(document.getElementById("speck_size").value/5)
  //invert range of W [2- 102] => [102 - 2]
  W = 102 - W + 2
  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = 0, y = 0
  let numsquares = (1+wdivs) * (1+hdivs)
  let radius = w, j = 0
  let lightness = 0, linecount = 0, dist = 0
  let r = 0, g = 0, b = 0
  // outer loop
  for (;j < numsquares; j++) {
    let imgData = ctx.getImageData(x, y, w, h)
    let pixels = imgData.data
    let i = 0, r = 0, g = 0, b = 0, dist = 0
    for (; i < pixels.length; i += 4) { // compare colors w/ target
      dist += dist3d(targ, [pixels[i], pixels[i+1], pixels[i+2]])
    }
    dist /= pixels.length/4
    offctx.fillStyle = targetcolor
    //console.log(Math.round(dist), (1-(dist/maxdist)))
    radius = w/2 * (1-(dist/maxdist))
    if (radius < 0)
      radius = 0.01
    if (radius > 0) {
      offctx.beginPath()
      offctx.arc(x+w/2, y+h/2, radius, 0, Math.PI*2)
      offctx.closePath()
      offctx.fill()
    }
    x += w
    if (x >= (wdivs)*w) {
      linecount++
      if (!grunge && linecount % 2 == 1)
        x = -w/2
      else
        x = 0
      y += h
    }
  }
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(off, 0, 0)
}

function alphaBlack () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let threshold = 127 - document.getElementById("speck_opacity").value * 1.27
  let pixels = imgData.data
  let i = 0
  for (; i < pixels.length; i += 4) {
    let lightness = parseInt((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3)
    if (lightness < threshold)
      pixels[i+3] = lightness/255
  }
  ctx.putImageData(imgData, 0, 0)
}

function alphaWhite () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let threshold = 127 + document.getElementById("speck_opacity").value * 1.27
  let pixels = imgData.data
  let i = 0
  for (; i < pixels.length; i += 4) {
    let lightness = parseInt((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3)
    if (lightness > threshold)
      pixels[i+3] = 1-lightness/255
  }
  ctx.putImageData(imgData, 0, 0)
}

function testImage () {
  let f = document.getElementById("functions").value
  window[f]()
}

function invertColors() {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let pixels = imgData.data
  let i = 0
  for (; i < pixels.length; i += 4) {
    var r = pixels[i]; // Red color lies between 0 and 255
    var g = pixels[i + 1]; // Green color lies between 0 and 255
    var b = pixels[i + 2]; // Blue color lies between 0 and 255
    var a = pixels[i + 3]; // Transparency lies between 0 and 255
    var invertedRed = 255 - r
    var invertedGreen = 255 - g
    var invertedBlue = 255 - b
    pixels[i] = invertedRed
    pixels[i + 1] = invertedGreen
    pixels[i + 2] = invertedBlue
  }
  ctx.putImageData(imgData, 0, 0)
}

function dotted (canvas, source) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  //ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 2 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = h/3
  let r = w/2
  let t = 2
  if (grunge) {
    t = r
  }
  ctx.save()
  ctx.beginPath()
  let count = canvas.height/h * canvas.width/w
  let newline = Math.floor(canvas.width/w)
  let counter = 0
  let x = w/3, y = h/3
  let xo = 0, yo = 0, i = 0
  ctx.save()
  ctx.beginPath()
  for (;i < count; i++) {
    x0 = x+w/2+pet(t)
    y0 = y+h/2+pet(t)
    ctx.moveTo(x0, y0)
    ctx.arc(x0,y0,r+pet(w/5),0,Math.PI*2)
    x += w*1.3
    xo += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = w
      y += 1.3*h
      off *= -1
      x =+ off
    }
  }
  ctx.closePath()
  ctx.clip()
  ctx.drawImage(source, pet(5), pet(5), canvas.width, canvas.height)
  ctx.restore()
}

function separation () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let off = document.createElement('CANVAS')
  let offctx = off.getContext("2d")
  off.height = canvas.height
  off.width = canvas.width
  let off2 = document.createElement('CANVAS')
  let off2ctx = off2.getContext("2d")
  off2.height = canvas.height
  off2.width = canvas.width
  off2ctx.globalAlpha = 0.8
  // red
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let target = "#dd5555"//document.getElementById("paintcolor").value
  let threshold = document.getElementById("speck_opacity").value
  let tclose = threshold
  let r = hexToR(target)
  let g = hexToG(target)
  let b = hexToB(target)
  let pixels = imgData.data
  let i = 0
  let d = imgData.data
  let dist = 0
  let mode = ctx.globalCompositeOperation
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    if (dist/4 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, pet(17), pet(17))
  offctx.globalCompositeOperation = "hue"
  offctx.fillStyle = "#ff00ff"
 // offctx.fillRect(0,0, canvas.width,canvas.height)
  offctx.globalCompositeOperation = "source-over"
  
  dotted(off2, off)
 
  // blue
  imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  target = "#5555dd"
  threshold = document.getElementById("speck_opacity").value
  tclose = threshold * 0.95
  r = hexToR(target)
  g = hexToG(target)
  b = hexToB(target)
  pixels = imgData.data
  i = 0
  d = imgData.data
  dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/4 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, pet(17), pet(17))
  offctx.globalCompositeOperation = "hue"
  offctx.fillStyle = "#00ffff"
 // offctx.fillRect(0,0, canvas.width,canvas.height)
  offctx.globalCompositeOperation = "source-over"
  dotted(off2, off)
  
  // green
  imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  target = "#55dd55"//document.getElementById("paintcolor").value
  threshold = document.getElementById("speck_opacity").value
  tclose = threshold * 0.95
  r = hexToR(target)
  g = hexToG(target)
  b = hexToB(target)
  pixels = imgData.data
  i = 0
  d = imgData.data
  dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/4 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, pet(17), pet(17))
  offctx.globalCompositeOperation = "hue"
  offctx.fillStyle = "#80ff80"
 // offctx.fillRect(0,0, canvas.width,canvas.height)
  offctx.globalCompositeOperation = "source-over"
  dotted(off2, off)
  
  ctx.clearRect(0,0,canvas.width, canvas.height)
  ctx.drawImage(off2, 0,0,off2.width,off2.height)
}


function colorFilterOut () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let target = document.getElementById("paintcolor").value
  let threshold = document.getElementById("speck_opacity").value
  threshold = 100 - threshold
  let grunge = document.getElementById("grungy").checked
  let mode = ctx.globalCompositeOperation
  let tclose = threshold * 0.95
  let r = hexToR(target)
  let g = hexToG(target)
  let b = hexToB(target)
  let pixels = imgData.data
  let i = 0
  let d = imgData.data
  let dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    if (dist/3 < threshold) {
      if (grunge) {
        d[i] = lightness;
        d[i + 1] = lightness;
        d[i + 2] = lightness;
      } else
        d[i + 3] = 0.0
    }
  }
  ctx.putImageData(imgData, 0, 0)
}

function colorFilterOff () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let off = document.createElement('CANVAS')
  let offctx = off.getContext("2d")
  off.height = canvas.height
  off.width = canvas.width
  let off2 = document.createElement('CANVAS')
  let off2ctx = off2.getContext("2d")
  off2.height = canvas.height
  off2.width = canvas.width
  offctx.globalAlpha = 0.8
  off2ctx.globalAlpha = 0.8
  // red
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let target = "#ff5555"//document.getElementById("paintcolor").value
  let threshold = document.getElementById("speck_opacity").value
  let tclose = threshold * 0.95
  let r = hexToR(target)
  let g = hexToG(target)
  let b = hexToB(target)
  let pixels = imgData.data
  let i = 0
  let d = imgData.data
  let dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/3 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, 0, 0)
  offctx.globalCompositeOperation = "destination-out"
  dashes(off)
  offctx.globalCompositeOperation = "source-over"
  off2ctx.drawImage(off, -6,6,off2.width,off2.height)
  
  // blue
  imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  target = "#5555ff"//document.getElementById("paintcolor").value
  threshold = document.getElementById("speck_opacity").value
  tclose = threshold * 0.95
  r = hexToR(target)
  g = hexToG(target)
  b = hexToB(target)
  pixels = imgData.data
  i = 0
  d = imgData.data
  dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/3 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, 0, 0)
  offctx.globalCompositeOperation = "destination-out"
  dashes(off)
  offctx.globalCompositeOperation = "source-over"
  off2ctx.drawImage(off, 0,6,off2.width,off2.height)
  
  // green
  imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  target = "#55ff55"//document.getElementById("paintcolor").value
  threshold = document.getElementById("speck_opacity").value
  tclose = threshold * 0.95
  r = hexToR(target)
  g = hexToG(target)
  b = hexToB(target)
  pixels = imgData.data
  i = 0
  d = imgData.data
  dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/3 > threshold) {
        d[i + 3] = 0.0
    }
  }
  offctx.clearRect(0,0,canvas.width, canvas.height)
  offctx.putImageData(imgData, 0, 0)
  offctx.globalCompositeOperation = "destination-out"
  dashes(off)
  offctx.globalCompositeOperation = "source-over"

  off2ctx.drawImage(off, -6,0,off2.width,off2.height)
  
  ctx.clearRect(0,0,canvas.width, canvas.height)
  ctx.drawImage(off2, 0,0,off2.width,off2.height)
  
}

function colorFilter () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let target = document.getElementById("paintcolor").value
  let threshold = document.getElementById("speck_opacity").value
  let grunge = document.getElementById("grungy").checked
  let tclose = threshold * 0.95
  let r = hexToR(target)
  let g = hexToG(target)
  let b = hexToB(target)
  let pixels = imgData.data
  let i = 0
  let d = imgData.data
  let dist = 0
  for( ;i < d.length; i +=4) {
    dist = 0
    dist += Math.abs(d[i] - r)
    dist += Math.abs(d[i+1] - g)
    dist += Math.abs(d[i+2] - b)
    let lightness = parseInt((d[i] + d[i + 1] + d[i + 2]) / 3);
    
    if (dist/3 > threshold) {
      if (grunge) {
        d[i] = lightness;
        d[i + 1] = lightness;
        d[i + 2] = lightness;
      } else
        d[i + 3] = 0.0
    }
  }
  ctx.putImageData(imgData, 0, 0)
}

function contrastImage (contrast) {  //input range [-100..100]
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let pixels = imgData.data
  let i = 0
  let d = imgData.data
  contrast = (contrast/100) + 1;  //convert to decimal & shift range: [0..2]
  let intercept = 128 * (1 - contrast)
  for( ;i < d.length; i +=4){   //r,g,b,a
    d[i] =   d[i]*contrast + intercept
    d[i+1] = d[i+1]*contrast + intercept
    d[i+2] = d[i+2]*contrast + intercept
  }
  ctx.putImageData(imgData, 0, 0)
}

function openFile () {
  document.getElementById('uploadimage').click();
}

function drawFile (ev) {
  let canvas = document.getElementById('myCanvas')
  let ctx = canvas.getContext('2d')
  let img = new Image()
  let f = document.getElementById("uploadimage").files[0]
  let url = window.URL || window.webkitURL
  let src = url.createObjectURL(f);
  img.src = src;
  let mode = ctx.globalCompositeOperation
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1
  ctx.globalCompositeOperation = "source-over"
  document.getElementById('mode')
  img.onload = function() {
    canvas.height = this.height
    canvas.width = this.width
    syncBackground(canvas)
    //ctx.globalAlpha = +document.getElementById("speck_opacity").value/100
    document.getElementById("cs").innerHTML = canvas.width + "X" + canvas.height
    ctx.drawImage(img, 0, 0);
    url.revokeObjectURL(src);
    LASTCLICK[0] = canvas.width/2
    LASTCLICK[1] = canvas.height/2
    ctx.globalCompositeOperation = mode
    ctx.globalAlpha = a
  }
  document.getElementById("uploadimage").value = ""
}

document.getElementById("uploadimage").addEventListener("change", drawFile, true)

function pushColor (c) {
  document.getElementById("paintcolor").value = c
}

function randomPickColor() {
  document.getElementById("paintcolor").value = randomColor()
}

function updateColor () {
  let uc = document.getElementById("usercolor").value
  document.getElementById("paintcolor").value = uc
}

function background () {
  let result = document.getElementById("background")
  BLACK = (BLACK + 1) % 3
  if (BLACK == 0) {
    result.style.backgroundColor = "#fff";
  } else
  if (BLACK == 1) {
    result.style.backgroundColor = "#777";
  } else
    result.style.backgroundColor = "#000";
}

function randn_bm(min, max, skew) {
  let u = 0, v = 0;
  while(u === 0) u = Math.random() //Converting [0,1) to (0,1)
  while(v === 0) v = Math.random()
  let num = Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v )
  num = num / 10.0 + 0.5 // Translate to 0 -> 1
  if (num > 1 || num < 0)
   num = randn_bm(min, max, skew) // resample between 0 and 1 if out of range
  else{
    num = Math.pow(num, skew) // Skew
    num *= max - min // Stretch to fill range
    num += min // offset to min
  }
  return num
}

function randomColor() {
  let r = ('0'+(randomFromTo(10,256)).toString(16)).slice(-2),
  g = ('0'+(randomFromTo(10,256)).toString(16)).slice(-2),
  b = ('0'+(randomFromTo(10,256)).toString(16)).slice(-2);
  return '#' +r+g+b;
}

function randomFromTo(from, to) {
  return Math.floor(Math.random() * (to - from + 1) + from);
}

function randomPick (array) {
  return array[Math.floor((array.length) * Math.random())]
}

function clip () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let H = canvas.height
  let len = W/2, maxy = H/2
  ctx.save()
  let dist = document.getElementById("distro").value

  if (dist == "strip") {
    maxy = W/20
    ctx.beginPath();
    ctx.moveTo(canvas.width/2 - maxy, 0)
    ctx.lineTo(canvas.width/2 - maxy, canvas.height)
    ctx.lineTo(canvas.width/2 + maxy, canvas.height)
    ctx.lineTo(canvas.width/2 + maxy, 0)
    ctx.closePath()
    ctx.clip()
  }
  if (dist == "circle") {
    ctx.beginPath();
    ctx.arc(len, len, len, 0, 2*Math.PI, false);
    ctx.closePath()
    ctx.clip()
  }
}

function drips () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  //ctx.save()
  clip()
  let W = canvas.width
  let c = W/2
  let margin = W/20
  let w4 = (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/750
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  let scale = 7+document.getElementById("speck_size").value/5
  let parts = Math.floor(W/(scale*2-1)) *1.8
  let rule = true
  if (Math.random() > 0.5)
    rule = false
  if (!grunge) {
    let t = 0
    colors = []
    for (; t < 21; t++)
      colors.push(randomColor())
  }
  let x = scale, y = 71 + pet(41)
  let i = 0, r = scale/2
  let d = 0, drift = 0
  for (; i < parts; i++) {
    let x1 = x
    let xf = 20 + Math.random() * 100
    let yf = 0.001 + Math.random()/3 * 0.002
    r = scale/2 + pet(scale/4)
    while (y < 1400) {
      d = (x1-c)
      if (d < 1)
        d += -1
      drift = xf/(d+0.01)
      if (rule) {
        if (x1 > c)
          drift -= y * yf
        else
          drift += y * yf
      } else {
        if (x1 < c)
          drift -= y * yf
        else
          drift += y * yf
      }
      x1 += drift
      y += 2
      x1 += pet(1.25)
      if (r < 0.5)
        r = 0.5
      ctx.beginPath();
      ctx.moveTo(x1, y)
      ctx.arc(x1,y,1+r+pet(2) ,0,2*Math.PI)
      ctx.closePath()
      ctx.fillStyle = colors[i%colors.length]
      ctx.fill()
      r*= 0.998
    }
    x += scale * 1.05
    y = 41 + pet(41)
  }
  ctx.restore()
}

function spiral () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let C = W/2 + (Math.random() - 0.5) * W/4
  ctx.globalAlpha = +document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 2+document.getElementById("speck_size").value/20
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let radius = 250, r0 = W/2.3 +Math.random() * 250, angle = Math.random() * 6.28
  let n = 0, end = 2400
  let shrink = 100 + Math.random() * 300
  let grow = end -100 - Math.random() * 300
  ctx.beginPath();
  for (; n < end; n++) {
    radius = r0
    // make a complete circle every 50 iterations
    angle += (Math.PI * 2) / 250;
    var x = C + radius * Math.cos(angle);
    var y = C + radius * Math.sin(angle);
    ctx.lineTo(x, y);
    r0 += 0.02 + pet(2)
    if (n > grow)
      r0 += 0.9 + pet(1)
    if (n < shrink)
     r0 -= 0.9 + pet(1)
  }
  ctx.stroke();
}

function spiral2 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let cx = W/2
  let cy = cx
  let C = W/2 + (Math.random() - 0.5) * W/4
  ctx.globalAlpha = +document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 2+document.getElementById("speck_size").value/20
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let radius = 250, r0 = W/4 +Math.random() * 250, angle = Math.random() * 6.28
  let n = 0, end = 3000
  let shrink = W * 0.37
  let grow = W * 0.05
  ctx.beginPath();
  let inc = false, dec = false
  for (; n < end; n++) {
    radius = r0
    // make a complete circle every 50 iterations
    angle += (Math.PI * 2) / 250;
    var x = C + radius * Math.cos(angle);
    var y = C + radius * Math.sin(angle);
    ctx.lineTo(x, y);
    r0 += 0.02 + pet(2)
    let gs = distance(x,y,cx,cy)
    if (n > 151 && gs > shrink) {
      inc = false
      dec = true
    }
    if (gs < grow) {
      inc = true
      dec = false
    }
    if (inc)
      r0 += 3 + pet(0.5)
    else
    if (dec)
      r0 -= 1 + pet(0.5)
  }
  ctx.stroke();
}

function spiral3 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let cx = W/2
  let cy = cx
  let C = W/2 + (Math.random() - 0.5) * W/4
  ctx.globalAlpha = +document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 2+document.getElementById("speck_size").value/20
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let radius = 250
  let angle = Math.random() * 6.28
  let n = 0, end = 7000
  let shrink = W * 0.37
  let grow = W * 0.05
  let turnAt = W/6+ Math.random() * W/6
  let inc = false, dec = false
  let turn = false
  let A = 0.001 + Math.random()/120
  var x = cx + radius * Math.cos(angle);
  var y = cy + radius * Math.sin(angle);
  ctx.beginPath();
  ctx.moveTo(x, y);
  for (; n < end; n++) {
    x = x + Math.sin(angle) * 1
    y = y + Math.cos(angle) * 1
    ctx.lineTo(x, y);
    let gs = distance(x,y,cx,cy)
    if (gs > turnAt) {
      turn = true
    } else
    if (gs < turnAt) {
      turn = false
    }
    if (turn)
      angle += A +pet(1)/10
    else
      angle += pet(5)/100
  }
  ctx.stroke();
}

function spiral4 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let cx = W/2
  let cy = cx
  let C = W/2 + (Math.random() - 0.5) * W/4
  ctx.globalAlpha = +document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 2+document.getElementById("speck_size").value/20
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let radius = W/4 + Math.random() * W/10
  let angle = Math.random() * 6.28
  let n = 0, end = 17000
  let turnAt = W/6+ Math.random() * W/6
  let inc = false, dec = false
  let turn = false
  let A = 0.001 + Math.random()/140
  var x = cx + radius * Math.cos(angle);
  var y = cy + radius * Math.sin(angle);
  let pf = 19
  if (grunge)
    pf = 7
  let dis = distance(x,y,C,C)
  ctx.beginPath();
  ctx.moveTo(x, y);
  for (; n < end; n++) {
    x = x + Math.sin(angle) * 1
    y = y + Math.cos(angle) * 1
    ctx.lineTo(x, y);
    let gs = distance(x,y,cx,cy) - dis
    if (gs > 0) {
      turn = true
      angle += gs/W * 0.02 + pet(1)/pf
    } else
    if (gs <= 0) {
      turn = false
      angle -= gs/W *0.02 + pet(1)/pf
    }
  }
  ctx.stroke();
}

function drops () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
 // ctx.save()
  clip()
  let W = canvas.width
  let c = W/2
  let margin = W/20
  let w4 = (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  let scale = 7+document.getElementById("speck_size").value/5
  let parts = Math.floor(W/(scale*2-1)) *1.8
  let rule = true
  if (Math.random() > 0.5)
    rule = false
  if (!grunge) {
    let t = 0
    colors = []
    for (; t < 21; t++)
      colors.push(randomColor())
  }
  let x = scale, y = 71 + pet(1)
  let i = 0, r = scale/2
  let d = 0, drift = 0
  for (; i < parts; i++) {
    let x1 = x
    let xf = 20 + Math.random() * 100
    let yf = 0.001 + Math.random()/3 * 0.002
    r = scale/2 + pet(scale/4)
    while (y < 72) {
      d = (x1-c)
      if (d < 1)
        d += -1
      drift = xf/(d+0.01)
      if (rule) {
        if (x1 > c)
          drift -= y * yf
        else
          drift += y * yf
      } else {
        if (x1 < c)
          drift -= y * yf
        else
          drift += y * yf
      }
      x1 += drift
      y += 2
      x1 += pet(1.25)
      if (r < 0.5)
        r = 0.5
      ctx.beginPath();
      ctx.moveTo(x1, y)
      ctx.arc(x1,y,1+r+pet(2) ,0,2*Math.PI)
      ctx.closePath()
      ctx.fillStyle = colors[i%colors.length]
      ctx.fill()
      r*= 0.998
    }
    x += scale * 1.05
    y = 41 + pet(41)
  }
  ctx.restore()
}

function chair () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/5
  margin = 100 + (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 2+document.getElementById("speck_size").value/10
  ctx.lineCap = "round"
  let points = []
  points[0] = [margin, W/2+margin/2]
  points[1] = [margin*2, W/2-margin+margin/2]
  points[2] = [W-margin, W/2-margin+margin/2]
  points[3] = [W-margin*2, W/2+margin/2]
  points[4] = [margin, margin*2+margin/2]
  points[5] = [margin, margin+margin/2]
  points[6] = [margin*2, 0+margin/2]
  
  points[7] = [margin, W-margin+margin/2]
  points[8] = [margin*2, W-margin*2+margin/2]
  points[9] = [W-margin, W-margin*2+margin/2]
  points[10] = [W-margin*2, W-margin+margin/2]
  
  points[11] = [W-margin, margin/2]
  
  let g = 11
  if (grunge)
    g *= 2
  let i = 0
  for (; i < points.length; i++) {
    points[i][0] += pet(g)
    points[i][1] += pet(g)
  }
  
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  
  let flip = Math.random() > 0.5
  if (flip) {
    ctx.beginPath();
    ctx.moveTo(points[2][0], points[2][1])
    ctx.lineTo(points[11][0], points[11][1])
    if (grunge)
      ctx.lineWidth += pet(2)
    ctx.stroke()
    
    ctx.beginPath();
    ctx.moveTo(points[6][0], points[6][1])
    ctx.lineTo(points[11][0], points[11][1])
    if (grunge)
      ctx.lineWidth += pet(2)
    ctx.stroke()
  } else {
    ctx.beginPath();
    ctx.moveTo(points[0][0], points[0][1])
    ctx.lineTo(points[5][0], points[5][1])
    if (grunge)
      ctx.lineWidth += pet(2)
    ctx.stroke()
    
    ctx.beginPath();
    ctx.moveTo(points[5][0], points[5][1])
    ctx.lineTo(points[6][0], points[6][1])
    if (grunge)
      ctx.lineWidth += pet(2)
    ctx.stroke()
  }
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[7][0], points[7][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[8][0], points[8][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[2][0], points[2][1])
  ctx.lineTo(points[9][0], points[9][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[3][0], points[3][1])
  ctx.lineTo(points[10][0], points[10][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[1][0], points[1][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[2][0], points[2][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[6][0], points[6][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[2][0], points[2][1])
  ctx.lineTo(points[3][0], points[3][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[3][0], points[3][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.restore()
}

function point (x, y) {
  this.x = x
  this.y = y
}

function drawLine (ctx, pt1, pt2) {
  ctx.beginPath()
  ctx.moveTo(pt1.x, pt1.y)
  ctx.lineTo(pt2.x, pt2.y)
  ctx.stroke()
}

function person () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  ctx.lineWidth = 0.5+document.getElementById("speck_size").value/10
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let W = canvas.width
  let margin = W/8
  margin = 50 + (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 0.5+document.getElementById("speck_size").value/10
  let r = 47 + Math.random() * 11

  let points = []
  points[0] = new point(W/2 + margin/2, W/2+margin/2)
  points[1] = new point(W/2 - margin/2, W/2+margin/2)
  //armpits
  points[2] = new point(W/2 + margin/2.2, margin*1.5)
  points[3] = new point(W/2 - margin/2.2, margin*1.5)
  points[5] = new point(W/2, margin*1.5) // shoulders

  points[6] = new point(W/2, margin*0.7) // head
  //hands
  points[7] = new point(margin*1.7, W/2-margin/3)
  points[8] = new point(W - margin*1.7, W/2-margin/3)
  //elbows
  points[13] = new point(margin*1.8, W/2+margin/3)
  points[14] = new point(W - margin*1.8, W/2+margin/3)
  //legs
  points[9] = new point(W/2 + margin/3, W/2+margin/2)
  points[10] = new point(W/2 - margin/3, W/2+margin/2)
  // feet
  points[11] = new point(W/2 + margin/3, W - margin/2)
  points[12] = new point(W/2 - margin/3, W - margin/2)
  // knees
  points[15] = new point(W/2 + margin/3, W-margin*1.5)
  points[16] = new point(W/2 - margin/3, W-margin*1.5)

  // 2,3,5 get petted together
  let py = pet(24)
  let px = pet(24)
  points[2].x += px
  points[2].y += py
  points[3].x += px
  points[3].y += py
  points[5].x += px
  points[5].y += py
  
  points[0].x += pet(24)
  points[0].y += pet(24)
  points[1].x += pet(24)
  points[1].y += pet(24)
  points[6].x += pet(24)
  points[6].y += pet(24)
  points[7].x += pet(24)
  points[7].y += pet(24)
  points[8].x += pet(24)
  points[8].y += pet(24)
  points[9].x += pet(24)
  points[9].y += pet(24)
  points[10].x += pet(24)
  points[10].y += pet(24)
  points[11].x += pet(24)
  points[11].y += pet(24)
  points[12].x += pet(24)
  points[12].y += pet(24)
  points[13].x += pet(24)
  points[13].y += pet(24)
  points[14].x += pet(24)
  points[14].y += pet(24)
  points[15].x += pet(24)
  points[15].y += pet(24)
  points[16].x += pet(24)
  points[16].y += pet(24)

  drawLine(ctx, points[0], points[1])
  drawLine(ctx, points[1], points[3])
  drawLine(ctx, points[0], points[2])
  drawLine(ctx, points[2], points[8])
  drawLine(ctx, points[3], points[7])

  drawLine(ctx, points[14], points[8])
  drawLine(ctx, points[13], points[7])

  drawLine(ctx, points[9], points[15])
  drawLine(ctx, points[10], points[16])
  drawLine(ctx, points[15], points[11])
  drawLine(ctx, points[16], points[12])

  ctx.beginPath()
  ctx.arc(points[5].x, points[5].y, margin/2.2, Math.PI, 2*Math.PI)
  ctx.stroke()
  ctx.beginPath()
  ctx.ellipse(points[6].x, points[6].y,  margin/4, margin/3, pet(100)/100,  0, 2*Math.PI) //head
  ctx.stroke()
}

function lamp () {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  ctx.lineWidth = 0.5+document.getElementById("speck_size").value/10
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let W = canvas.width
  let margin = W/8
  margin = 50 + (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 0.5+document.getElementById("speck_size").value/10
  let r = 47 + Math.random() * 11

  let points = []
  points[0] = [W/2, margin]
  points[1] = [W/2, W/2]
  points[2] = [W/2, W-margin]

  points[3] = [W/2 - margin, W/2]
  points[4] = [W/2 - margin/3, margin]

  points[5] = [W/2 + margin, W/2]
  points[6] = [W/2 + margin/3, margin]

  points[7] = [W/2, W - margin]
  points[8] = [W/2, W/2-margin/2+25]

  points[9] = [W/2-20, W - 2*margin]
  points[10] = [W/2-20, W/2-margin/2+6]

  points[11] = [W/2, W/2-margin/2] //bulb

  let g = 11
  if (grunge)
    g *= 2
  let i = 0
  for (; i < points.length; i++) {
    points[i][0] += pet(g)
    points[i][1] += pet(g)
  }

  ctx.beginPath()
  ctx.moveTo(points[3][0], points[3][1])
  ctx.lineTo(points[4][0], points[4][1])
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(points[5][0], points[5][1])
  ctx.lineTo(points[6][0], points[6][1])
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(points[7][0], points[7][1])
  ctx.lineTo(points[8][0], points[8][1])
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(points[9][0], points[9][1])
  ctx.lineTo(points[10][0], points[10][1]+25)
  ctx.stroke()

  ctx.beginPath()
  ctx.arc(points[9][0], points[9][1], 6+pet(3), 0, 2*Math.PI)
  ctx.stroke()

  ctx.beginPath()
  ctx.arc(points[11][0], points[11][1]-28, 54+pet(8), 0, 2*Math.PI)
  ctx.stroke()

  let radiusX = margin/3+pet(20), radiusY = margin/6+pet(10)
  ctx.beginPath()
  ctx.ellipse(points[0][0], points[0][1], radiusX, radiusY, pet(10)/100, 0, 2* Math.PI )
  ctx.stroke()

  radiusX = margin+pet(10), radiusY = margin/3+pet(20)
  ctx.beginPath()
  ctx.ellipse(points[1][0], points[1][1], radiusX, radiusY, pet(30)/100, 0, 2* Math.PI )
  ctx.stroke()

  radiusX = margin/3+pet(10), radiusY = margin/6+pet(10)
  ctx.beginPath()
  ctx.ellipse(points[2][0], points[2][1], radiusX, radiusY, pet(10)/100, 0, 2* Math.PI )
  ctx.stroke()

  ctx.beginPath()
  ctx.ellipse(points[2][0], points[2][1]+20+pet(10), radiusX, radiusY, 0, 0, 2* Math.PI )
  ctx.stroke()
}

function birdhouse () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/5
  margin = 100 + (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  ctx.lineWidth = 0.5+document.getElementById("speck_size").value/10
  let r = 47 + Math.random() * 11

  let points = []
  points[0] = [margin, W/2+margin/2]
  points[1] = [margin*2, W/2-margin+margin/2]
  points[2] = [W-margin, W/2-margin+margin/2]
  points[3] = [W-margin*2, W/2+margin/2]
  
  points[4] = [(W/2), margin/2] //peak
  
  points[5] = [margin, margin+margin/2]
  points[6] = [margin*2, 0+margin/2]
  
  points[7] = [margin, W-margin+margin/2]
  points[8] = [margin*2, W-margin*2+margin/2]
  points[9] = [W-margin, W-margin*2+margin/2]
  points[10] = [W-margin*2, W-margin+margin/2]
  
  points[11] = [(W-margin*2+margin)/2 , (W-margin+margin/2+W/2+margin/2)/2]
  
  let g = 11
  if (grunge)
    g *= 2
  let i = 0
  for (; i < points.length; i++) {
    points[i][0] += pet(g)
    points[i][1] += pet(g)
  }
  
  ctx.lineCap = "round"
  ctx.strokeStyle = document.getElementById("paintcolor").value
  
  let flip = Math.random() > 0.5
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[4][0], points[4][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[4][0], points[4][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[2][0], points[2][1])
  ctx.lineTo(points[4][0], points[4][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[3][0], points[3][1])
  ctx.lineTo(points[4][0], points[4][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[7][0], points[7][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[8][0], points[8][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[2][0], points[2][1])
  ctx.lineTo(points[9][0], points[9][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[3][0], points[3][1])
  ctx.lineTo(points[10][0], points[10][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[1][0], points[1][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[1][0], points[1][1])
  ctx.lineTo(points[2][0], points[2][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[2][0], points[2][1])
  ctx.lineTo(points[3][0], points[3][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
   ctx.beginPath();
  ctx.moveTo(points[0][0], points[0][1])
  ctx.lineTo(points[3][0], points[3][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[9][0], points[9][1])
  ctx.lineTo(points[10][0], points[10][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()

  ctx.beginPath();
  ctx.moveTo(points[8][0], points[8][1])
  ctx.lineTo(points[9][0], points[9][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[7][0], points[7][1])
  ctx.lineTo(points[8][0], points[8][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.moveTo(points[7][0], points[7][1])
  ctx.lineTo(points[10][0], points[10][1])
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.beginPath();
  ctx.arc(points[11][0], points[11][1], r, 0, Math.PI * 2)
  if (grunge)
    ctx.lineWidth += pet(2)
  ctx.stroke()
  
  ctx.restore()
}


function necker () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/20
  let w4 = (W-2*margin)/document.getElementById("rows").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  if (Math.random() > 0.5) {
    //bottom
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
    
    //left side
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(w4+margin, margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.lineTo(margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[4]
    ctx.fill()
    
      //upper right
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)  // top Horizontal
    ctx.beginPath();
    ctx.moveTo(w4+margin, 0+margin)
    ctx.lineTo(W-margin, 0+margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
    
    // lower left
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(W-w4-margin, w4+margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.lineTo(margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    //top
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(w4+margin, margin)
    ctx.lineTo(W-margin, margin)
    ctx.lineTo(W-w4-margin, w4+margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    //right side
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(W-w4-margin, w4+margin)
    ctx.lineTo(W-margin, margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.closePath(+margin)
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
  } else {
      //top
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(w4+margin, margin)
    ctx.lineTo(W-margin, margin)
    ctx.lineTo(W-w4-margin, w4+margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    //right side
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(W-w4-margin, w4+margin)
    ctx.lineTo(W-margin, margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.closePath(+margin)
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
    
     // lower left square
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(W-w4-margin, w4+margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.lineTo(margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    //bottom
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(W-w4-margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
    
    //upper right square
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)  // top Horizontal
    ctx.beginPath();
    ctx.moveTo(w4+margin, 0+margin)
    ctx.lineTo(W-margin, 0+margin)
    ctx.lineTo(W-margin, W-w4-margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
   
    //left side
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, w4+margin)
    ctx.lineTo(w4+margin, margin)
    ctx.lineTo(w4+margin, W-w4-margin)
    ctx.lineTo(margin, W-margin)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[4]
    ctx.fill()
  }
  ctx.restore()
}

function elle () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  //ctx.save()
  clip()
  let margin = canvas.width/50 * (document.getElementById("rows").value)
  let W = canvas.width
  let w4 = (canvas.width -(2*margin))/4
  let w2 = (canvas.width -(2*margin))/2

  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['#ff0000', '#00ff00', '#FFFF00', '#FFA500', '#800080', "#0000ff"])
  let grunge = false//document.getElementById("grungy").checked
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)

  ctx.beginPath();
  ctx.moveTo(0+margin, W-w4-margin) // square in lower left
  ctx.lineTo(w4+margin, W-w4-margin)
  ctx.lineTo(w4+margin, W-margin)
  ctx.lineTo(0+margin, W-margin)
 // ctx.lineTo(w4, W-w4)
  ctx.closePath()
  //if (grunge)
    ctx.fillStyle = colors[0]//randomGradient(canvas, colors[0])
  ctx.fill()
  
  ctx.beginPath();
  ctx.moveTo(0+margin, w2+margin)
  ctx.lineTo(w2+margin, w2+margin)
  ctx.lineTo(w2+margin, W-margin)
  ctx.lineTo(w4+margin, W-margin)
  ctx.lineTo(w4+margin, W-w4-margin)
  ctx.lineTo(0+margin, W-w4-margin)
  ctx.closePath()
  //if (grunge)
    ctx.fillStyle = colors[1]//randomGradient(canvas, colors[0])
  ctx.fill()

  ctx.beginPath();
  ctx.moveTo(0+margin, w4+margin)
  ctx.lineTo(w2+w4+margin, w2-w4+margin)
  ctx.lineTo(w2+w4+margin, W-margin)
  ctx.lineTo(w2+margin, W-margin)
  ctx.lineTo(w2+margin, W-w2-margin)
  ctx.lineTo(0+margin, W-w2-margin)
  ctx.closePath()
  //if (grunge)
    ctx.fillStyle = colors[2]//randomGradient(canvas, colors[0])
  ctx.fill()
  
  ctx.beginPath();
  ctx.moveTo(0+margin, 0+margin)
  ctx.lineTo(W-margin, 0+margin)
  ctx.lineTo(W-margin, W-margin)
  ctx.lineTo(W-w4-margin, W-margin)
  ctx.lineTo(W-w4-margin, w4+margin)
  ctx.lineTo(0+margin, w4+margin)
  ctx.closePath()
  //if (grunge)
    ctx.fillStyle = colors[3]//randomGradient(canvas, colors[0])
  ctx.fill()
}

function flower () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/20
  let w4 = (W-2*margin)/(4 + (document.getElementById("rows").value/2))
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['#ff0000', '#00ff00', '#FFFF00', '#FFA500', '#800080', "#0000ff"])
  let grunge = document.getElementById("grungy").checked
  w4 *= 0.5
  let xf = w4 //* 1.0
  let r = W
  let inc = W/2
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  let i = 0, x = 0, y = 0

  if (Math.random() > 0.5) {
    x = 0, y = 0
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[0])
    ctx.fill()
    x = W, y = 0
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[1])
    ctx.fill()
    x = 0, y = W
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[2])
    ctx.fill()
    x = W, y = W
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[3])
    ctx.fill()
  } else {
    x = 0, y = W
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[2])
    ctx.fill()
    x = W, y = W
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[3])
    ctx.fill()
    
    x = 0, y = 0
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[0])
    ctx.fill()
    x = W, y = 0
    
    ctx.beginPath();
    ctx.moveTo(x, y) // \
    ctx.arc(x,y,r,0,2*Math.PI)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = randomGradient(canvas, colors[1])
    ctx.fill()
  }
}

function folded () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/20
  let w4 = (W-2*margin)/(4 + (document.getElementById("rows").value/2))
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  w4 *= 0.5
  let xf = w4 //* 1.0

  let p1 = [margin, margin] //top left
  let p2 = [w4+margin, margin]  // top
  let p3 = [margin, W-margin]
  let p4 = [w4+ margin, W-margin]
  
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(p1[0], p1[1]) // \
  ctx.lineTo(p2[0], p2[1])
  ctx.lineTo(p4[0], p4[1])
  ctx.lineTo(p3[0], p3[1])
  ctx.closePath()
  if (grunge)
    ctx.fillStyle = colors[4]
  ctx.fill()
  
  let maxloop = 7 + +document.getElementById("rows").value
  let i = 0
  for (;i < maxloop; i++) {
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p4[0], p4[1]) // /
    ctx.lineTo(p3[0], p3[1])
    ctx.lineTo(p1[0] + xf, p1[1])
    ctx.lineTo(p2[0] + xf, p2[1])
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[i%6]
    ctx.fill()
    
    p1[0] += xf
    p2[0] += xf
    p3[0] += xf
    p4[0] += xf
    
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1])
    ctx.lineTo(p2[0], p2[1])
    ctx.lineTo(p4[0], p4[1])
    ctx.lineTo(p3[0], p3[1])
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[(i+1)%6]
    ctx.fill()
  }
}

function pyramid () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/20
  let w4 = (W-2*margin)/(4 + (document.getElementById("rows").value/2))
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green"])
  let grunge = document.getElementById("grungy").checked
  w8 = w4*3

  let p1 = [margin, W/2 + W/4] //left
  let p2 = [W/2, margin]  // top
  let p3 = [W-margin, W/2 + W/4]
  let p4 = [W/2 + W/8-margin, W-margin]
  let p5 = [W/2-W/8+margin, W-W/4-W/8-margin]
  
  if (Math.random() > 0.5) {
   // left
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p2[0], p2[1]) // up
    ctx.lineTo(p4[0], p4[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
    // right
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p2[0], p2[1])
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p4[0], p4[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p2[0], p2[1]) // bottom left
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p5[0], p5[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    // top
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p2[0], p2[1]) //peak
    ctx.lineTo(p5[0], p5[1]) // up
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
   
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p4[0], p4[1]) // up
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p5[0], p5[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
    
 } else {
   
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p4[0], p4[1]) // up
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p5[0], p5[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
    
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p2[0], p2[1]) // bottom left
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p5[0], p5[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    // top
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p2[0], p2[1]) //peak
    ctx.lineTo(p5[0], p5[1]) // up
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
   
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p1[0], p1[1]) // bottom left
    ctx.lineTo(p2[0], p2[1]) // up
    ctx.lineTo(p4[0], p4[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
    // right
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(p2[0], p2[1])
    ctx.lineTo(p3[0], p3[1]) // up
    ctx.lineTo(p4[0], p4[1]) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
  }
}

function house () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  clip()
  let W = canvas.width
  let margin = W/20
  let w4 = (W-2*margin)/(4 + (document.getElementById("rows").value/2))
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'purple', "green", "gray"])
  let grunge = document.getElementById("grungy").checked
  w8 = w4*3

  let xf = W-w8
  let yf = W -(2*margin) - w8 - w8/2
  
  if (Math.random() > 0.6) {
    // upper right face
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(xf-margin,     W-margin-yf) // bottom left
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2-yf) //peak
    ctx.lineTo(xf+w8-margin,  W-w8-margin- yf)
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
    
    // floor
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin+w8, W-margin)
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.lineTo(xf-margin,     W-margin-yf) // bottom left
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    // left wall
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.lineTo(xf-margin,     W-margin - yf) // bottom left
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
    
   // left roof
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2 -yf) //peak
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[4]
    ctx.fill()

    // right roof
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(xf+w8-margin,  W-w8-margin-yf)
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2 -yf) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
    
    // right wall
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(margin+w8, W-margin) // bottom right
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.lineTo(xf+w8-margin,  W-w8-margin-yf)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    // lower left face
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(margin+w8, W-margin) // bottom right
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
  } else {
    // right roof
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(xf+w8-margin,  W-w8-margin-yf)
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2 -yf) //peak
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[5]
    ctx.fill()
    
    // right wall
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(margin+w8, W-margin) // bottom right
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.lineTo(xf+w8-margin,  W-w8-margin-yf)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[2]
    ctx.fill()
    
    // lower left face
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(w8+margin, W-w8-margin) // roof right
    ctx.lineTo(margin+w8, W-margin) // bottom right
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    // upper right face
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(xf-margin,     W-margin-yf) // bottom left
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2-yf) //peak
    ctx.lineTo(xf+w8-margin,  W-w8-margin- yf)
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[0]
    ctx.fill()
    
    // floor
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin+w8, W-margin)
    ctx.lineTo(xf-margin+w8,  W-margin-yf)
    ctx.lineTo(xf-margin,     W-margin-yf) // bottom left
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[1]
    ctx.fill()
    
    // left wall
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-margin) // bottom left
    ctx.lineTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.lineTo(xf-margin,     W-margin - yf) // bottom left
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[3]
    ctx.fill()
    
   // left roof
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath();
    ctx.moveTo(margin, W-w8-margin) // uroof left
    ctx.lineTo(margin+w8/2, W-margin-w8 - w8/2) //peak
    ctx.lineTo(xf-margin+w8/2,W-margin-w8 - w8/2 -yf) //peak
    ctx.lineTo(xf-margin,     W-w8-margin-yf) // up
    ctx.closePath()
    if (grunge)
      ctx.fillStyle = colors[4]
    ctx.fill()
  }
  ctx.restore()
}

function origamir () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  origami()
  ctx.restore()
}

function grunge33 () {
  let grunge = document.getElementById("grungy").checked
  return (!grunge || (grunge && Math.random() < 0.33))

}

function origami () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let len = W/2, maxy = W/2
  
  // four triangles
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, len)
  ctx.lineTo(W, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, len)
  ctx.lineTo(0, 0)
  ctx.lineTo(W, 0)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, len)
  ctx.lineTo(0, 0)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, len)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()

  // 4 rects
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)  // top Horizontal
  ctx.beginPath();
  ctx.moveTo(0, 0)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, len)
  ctx.lineTo(0, len)
  ctx.closePath()
  ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, len)
  ctx.lineTo(W, len)
  ctx.lineTo(W, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, 0)
  ctx.lineTo(len, 0)
  ctx.lineTo(len, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
  
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, 0)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, W)
  ctx.lineTo(len, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()

  // diamond
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, 0)
  ctx.lineTo(W, len)
  ctx.lineTo(len, W)
  ctx.lineTo(0, len)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
}


function origami4by4 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let len = W/2, maxy = W/2
  let quat = len/2
  
  // 4 rects
  // top Horizontal
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, 0)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, quat)
  ctx.lineTo(0, quat)
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, 0)
  ctx.lineTo(quat, 0)
  ctx.lineTo(quat, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, quat)
  ctx.lineTo(W, quat)
  ctx.lineTo(W, len)
  ctx.lineTo(0, len)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(quat, 0)
  ctx.lineTo(len, 0)
  ctx.lineTo(len, W)
  ctx.lineTo(quat, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, len)
  ctx.lineTo(W, len)
  ctx.lineTo(W, len + quat)
  ctx.lineTo(0, len + quat)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len, 0)
  ctx.lineTo(len+quat, 0)
  ctx.lineTo(len+quat, W)
  ctx.lineTo(len, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(0, len + quat)
  ctx.lineTo(W, len + quat)
  ctx.lineTo(W, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
    
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.beginPath();
  ctx.moveTo(len+quat, 0)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, W)
  ctx.lineTo(len+quat, W)
  ctx.closePath()
  if (grunge33())
    ctx.fill()
}

function strokes () {
  let increase = Math.PI * 2 / 40;
  let x = 0, y = 0, angle = 4.7;
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.save()
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let maxalpha = ctx.globalAlpha
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  let stroke_width = document.getElementById("speck_size").value/20
  let stroke_ct = +document.getElementById("number").value/600
  for (let t = 0; t < stroke_ct; t++) {
    let paths = [];
    let radius = Math.floor(Math.random() * 180) + 20;
    x = 0;
    y = 0;
    let x0 = x;
    let y0 = y;
    angle = Math.floor(Math.random() * 6.42);
    let centx = Math.random()*ctx.canvas.width;
    let centy = Math.random()*ctx.canvas.height;
    let edges = (3 * (Math.floor(Math.random()*6))+6);
    let maxradius = Math.random() * 200 + canvas.width/3;
    increase = Math.PI * 2/edges*0.98;
    points = [];
    bez = [];
    let xmut = -1;
    let ymut = -1;
    if (Math.random() < 0.5)
      xmut *= -1;
    if (Math.random() < 0.5)
      ymut *= -1;
    for (let i = 0; i < edges; i++) {
      radius = (Math.random() * maxradius) + maxradius * 0.8;
      x = radius * Math.cos(angle)+centx;
      y = radius * Math.sin(angle)+centy;
      points.push([x, y]);
      angle += increase;
    }
    paths.push(points);
    let pop = 60
    if (document.getElementById("grungy").checked)
      pop *= 2
    let offset = 20 + stroke_width * 26;
    let numpaths = 20 + Math.random()*30;
    for (let s = 0; s < numpaths; s++) {
      let path = [];
      for (let c = 0; c < points.length; c++) {
        path.push([points[c][0] + xmut*(offset + (pop * (Math.random()-0.5))), points[c][1] + ymut*(offset + (pop * (Math.random()-0.5)))]);
      }
      offset += (Math.random()-0.5) * stroke_width;
      paths.push(path);
    }
    radius = (canvas.width > canvas.height)? canvas.width/2: canvas.height/2;
    angle = Math.random()*6.27;
    let x1 = radius * Math.cos(angle)+centx;
    let y1 = radius * Math.sin(angle)+centy;
    let x2 = radius * Math.cos(angle+3.14)+centx;
    let y2 = radius * Math.sin(angle+3.14)+centy;
    for (let f = 1; f < paths.length; f++) {
      let pts = paths[f];
      ctx.beginPath();
      ctx.lineWidth = 1 + Math.random() * stroke_width;
      let i = 0;
      for (; i < pts.length; i++) {
        x = pts[i][0]
        y = pts[i][1]
        if (i == 0) {
          x0 = x;
          y0 = y;
          ctx.moveTo(x, y);
        } else
        if (i % 3 == 0)
          ctx.bezierCurveTo(pts[i-2][0], pts[i-2][1], pts[i-1][0], pts[i-1][1], pts[i][0], pts[i][1]);
      }
      ctx.globalAlpha = (maxalpha * 0.1 + Math.random() * maxalpha * 0.75)
      ctx.stroke();
    }
  }
  ctx.restore()
}

function rothko () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let w = canvas.width
  let rows = 8 - document.getElementById("rows").value
  let margin = Math.random() * rows * 19
  let gap = margin/2
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.fillRect(0, 0, w, w)
  let grunge = document.getElementById("grungy").checked
  clip()

  let numshapes = 1 + (Math.floor(Math.random() * 3))

  let hts = new Array(numshapes)
  let h = 0, H = w - (margin/numshapes)
  for (; h < numshapes; h++) {
    let part = 61+ Math.random() * H/numshapes
    hts[h] = part
    H -= part
  }
  if (H > margin)
    hts[1] += H - margin
  if (H < 0)
    hts[0] -= H
  let shapeheight = w/numshapes - (margin/numshapes)
  let i = 0, g = 0
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'white', 'purple', "green", 'black'])
  let top = margin
  for (; i < numshapes; i++) {
    let points = []
    shapeheight = hts[i]
    ctx.beginPath();
    ctx.moveTo(margin, top)
    ctx.lineTo(w-margin, top)
    ctx.lineTo(w-margin, top+shapeheight-margin)
    ctx.lineTo(margin, top+shapeheight-margin)
    points.push(margin, top)
    points.push(w-margin, top)
    points.push(w-margin, top+shapeheight-margin)
    points.push(margin, top+shapeheight-margin)
    ctx.closePath()
    ctx.fillStyle = randomColor()
    if (grunge)
      ctx.fillStyle = colors[i]
    ctx.fill()
    ctx.globalAlpha = document.getElementById("speck_opacity").value/200
    frameRect(points, ctx.fillStyle, margin)
    ctx.globalAlpha = document.getElementById("speck_opacity").value/100
    g += gap
    top += shapeheight
  }
  ctx.restore()
}

function seedRect () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let w = canvas.width
  let rows = 1
  let margin = 4 + Math.random() * 11
  let gap = margin/2
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let grunge = document.getElementById("grungy").checked
  clip()
  let h = 17, H = 23
  let shapeheight = 17 + Math.random() * 50
  let i = 0, g = 0
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'white', 'purple', "green", 'black'])
  let top = margin + 9
  let points = []
  ctx.beginPath();
  ctx.moveTo(margin, top)
  ctx.lineTo(w-margin, top)
  ctx.lineTo(w-margin, top+shapeheight-margin)
  ctx.lineTo(margin, top+shapeheight-margin)
  points.push(margin, top)
  points.push(w-margin, top)
  points.push(w-margin, top+shapeheight-margin)
  points.push(margin, top+shapeheight-margin)
  ctx.closePath()
  if (grunge)
    ctx.fillStyle = randomPick(colors)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/400
  frameRect(points, ctx.fillStyle, margin)
    ctx.fillStyle = randomColor()
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.restore()
}

function grid () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let w = canvas.width
  let r = 2 + Math.floor(Math.random() * 7)
  let margin = w/10
  let n = (canvas.width-margin/2)/r
  let noff = n/4
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  //ctx.save()
  clip()
  let grunge = document.getElementById("grungy").checked
  let colors = shuffle(['red', 'blue', 'yellow', 'orange', 'white', 'purple', "green", 'black'])
  let type = (Math.random() > 0.5)? "r": "c"
  let numshapes = r*r
  let i = 0, x = noff*1.25, y = noff*1.25
  for (; i < numshapes; i++) {
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    if (grunge) {
      shuffle(colors)
      ctx.fillStyle = colors[0]
    }
    ctx.beginPath();
    if (type == "rxxxxxxx") {
      ctx.moveTo(x, y)
      ctx.lineTo(x + n*0.75, y)
      ctx.lineTo(x + n*0.75, y + n*0.75)
      ctx.lineTo(x, y + n*0.75)
    } else
      ctx.arc(x+noff,y+noff, noff, 0, 2*Math.PI);
    ctx.closePath()
    ctx.fill()
    x += n
    if (i > 0 && i % r === (r-1)) {
      y += n
      x = noff*1.25
    }
  }
  ctx.restore()
}

function rays () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let D =  (5 + Math.floor(document.getElementById("speck_size").value/50))
  let grunge = document.getElementById("grungy").checked
  let W = canvas.width
  let H = canvas.height
  ctx.globalAlpha = document.getElementById("speck_opacity").value/200
  clip()
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = 0.5
  let x = Math.random() * W, y = Math.random() * H
  let w = 2 +Math.random()*14
  let p = 1+D*3
  let i = 0
  let s = 0
  let x2 = 0, y2 = 0
  while (s < 100) {
    x2 = (Math.random() - 0.5) * W * 4
    y2 = (Math.random() - 0.5) * W * 4
    ctx.beginPath()
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x2, y2)
    ctx.closePath()
    ctx.stroke()
    
    y += pet(89)
    x += pet(89)
    s++
  }
}

function walk () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let D =  (5 + Math.floor(document.getElementById("speck_size").value/80))
  let grunge = document.getElementById("grungy").checked
  let angledelta = 0.3
  if (grunge)
    angledelta = 0.8
  let W = canvas.width
  let H = canvas.height
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  ctx.fillStyle = document.getElementById("paintcolor").value
  let x = Math.random() * W, y = Math.random() * H
  let p = 1+D*1
  let i = 0
  let s = 0
  let angle = Math.random()*2*Math.PI;
  let stepsize = 1
  let w = 1 + Math.random()*D/10
  while (s < 2000) {
    w = 1 + Math.random()*D/25
    ctx.beginPath()
    if (s > 100  && s < 800 && Math.random() > 0.96) {
      D *=1.03
      p = 1+D/2
      stepsize = 2
    } else
    if (s > 800 && Math.random() > 0.9) {
      D /=1.03
      p = 1+D
      stepsize = 1
    }
    angle += (Math.random()-0.5) * angledelta
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y +pet(p))
    ctx.lineTo(x + w + pet(p), y+w +pet(p))
    ctx.lineTo(x + pet(p), y+w+pet(p))
    ctx.closePath()
    ctx.fill()
    x += 1 * Math.cos(angle)
    y += 1 * Math.sin(angle)
    w += 0.001
    s++
  }
}

function frame () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let D =  (5 + Math.floor(document.getElementById("speck_size").value/10))
  let grunge = document.getElementById("grungy").checked
  let W = canvas.width
  let H = canvas.height
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  ctx.fillStyle = document.getElementById("paintcolor").value
  let x = -1, y = -1
  let w = 6 +Math.random()*14
  let p = 6+D*1.2
  let i = 0
  while (y < canvas.height) {
    w = D +Math.random()*D/2
    ctx.beginPath()
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y +pet(p))
    ctx.lineTo(x + w + pet(p), y+w +pet(p))
    ctx.lineTo(x + pet(p), y+w+pet(p))
    ctx.closePath()
    ctx.fill()
    
    ctx.beginPath()
    ctx.moveTo(W - pet(p), y+pet(p))
    ctx.lineTo(W - w + pet(p), y +pet(p))
    ctx.lineTo(W - w + pet(p), y+w +pet(p))
    ctx.lineTo(W - pet(p), y+w+pet(p))
    ctx.closePath()
    ctx.fill()
    y += 2
  }
  x = 0, y = -1
  while (x < canvas.width) {
    w = D +Math.random()*D/2
    ctx.beginPath()
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y +pet(p))
    ctx.lineTo(x + w + pet(p), y+w +pet(p))
    ctx.lineTo(x + pet(p), y+w+pet(p))
    ctx.closePath()
    ctx.fill()
    
    ctx.beginPath()
    ctx.moveTo(x - pet(p), H-pet(p))
    ctx.lineTo(x - w + pet(p), H -pet(p))
    ctx.lineTo(x - w + pet(p), H-w -pet(p))
    ctx.lineTo(x - pet(p), H-w-pet(p))
    ctx.closePath()
    ctx.fill()
    x += 2
  }
  ctx.restore()
}

function frameRect (points, c, margin) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let D =  (5 + Math.floor(document.getElementById("speck_size").value/10))
  let grunge = document.getElementById("grungy").checked
  let H = distance(points[0], points[1], points[6], points[7])
  let W = distance(points[0], points[1], points[2], points[3])
  ctx.fillStyle = c
  let w = 6 +Math.random()*14
  let h = w/2
  let p = 6+D*1.2
  let x = points[0], y = points[1]

  while (y < points[5]-w) {
    w = D +Math.random()*D/2
    ctx.beginPath()
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y +pet(p))
    ctx.lineTo(x + w + pet(p), y+w +pet(p))
    ctx.lineTo(x + pet(p), y+w+pet(p))
    ctx.closePath()
    ctx.fill()
    
    ctx.beginPath()
    ctx.moveTo(points[2] - pet(p), y + pet(p))
    ctx.lineTo(points[2] - w + pet(p), y + pet(p))
    ctx.lineTo(points[2] - w + pet(p), y + w + pet(p))
    ctx.lineTo(points[2] - pet(p), y + w + pet(p))
    ctx.closePath()
    ctx.fill()
    y += 2
  }
  
  x = points[0], y = points[1]
  while (x < points[2]-w) {
    w = D +Math.random()*D/2
    ctx.beginPath()
    ctx.moveTo(x + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y+pet(p))
    ctx.lineTo(x + w + pet(p), y+w +pet(p))
    ctx.lineTo(x + pet(p), y+pet(p))
    ctx.closePath()
    ctx.fill()
    
    ctx.beginPath()
    ctx.moveTo(x + pet(p), points[5]-pet(p))
    ctx.lineTo(x + w + pet(p), points[5] -pet(p))
    ctx.lineTo(x + w + pet(p), points[5]-pet(p))
    ctx.lineTo(x + pet(p), points[5]-pet(p))
    ctx.closePath()
    ctx.fill()
    x += 2
  }
}

function tile (type) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let sides =  (2 + Math.floor(document.getElementById("speck_size").value/20))
  let w = canvas.width
  let n = canvas.width/sides
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  let colors = []
  let c = 0
  let nc = 1 + (Math.floor(Math.random() * 3))
  for (; c < nc; c++)
    colors.push(randomColor())
  if (type == "C2" || type == "B2") {
    colors.push(randomColor())
    colors.push(randomColor())
    colors.push(randomColor())
  }
  let numshapes = sides*sides
  let i = 0, x = 0, y = 0
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (type != "W")
    ctx.fillRect(0, 0, w, w)
  ctx.fillStyle = randomColor()//randomGradient(canvas, document.getElementById("paintcolor").value)
  let grunge = document.getElementById("grungy").checked
  let rc = randomColor()
  let pattern = [0,1,2,3,4,5,6,7,8,9,10,11]
  shuffle(pattern)
  for (; i < numshapes; i++) {
    ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)]
    if (grunge)
        ctx.fillStyle = randomGradient(canvas, colors[Math.floor(Math.random() * colors.length)])
    if (type == "D")
      dtile(x,y,n,pattern[i%5])
    else
    if (type == "M")
      mtile(x,y,n, pattern[i%8])
    else
    if (type == "C")
      ctile(x,y,n,pattern[i%4])
    else
    if (type == "C2") {
      ctile2(x,y,n, colors, grunge, pattern[i%4])
    } else
    if (type == "B2") {
      btile(x,y,n, colors, grunge)
    } else
    if (type == "W") {
      bwash(x,y,n)
    } else
      triangle(x, y, n, pattern[i%4])
    x += n
    if (i > 0 && i % sides === (sides-1)) {
      y += n
      x = 0
    }
  }
  ctx.restore()
}

function shuffle (array) {
  return array.sort(() => Math.random() - 0.5);
}

function circle (x, y, w) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let cx = canvas.width/2 + (Math.random()-0.5) * 200
  let cy = canvas.height/2 + (Math.random()-0.5) * 200
  let r = 10 + Math.floor(document.getElementById("speck_size").value)
  clip()
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (document.getElementById("grungy").checked)
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.beginPath()
  ctx.moveTo(cx, cy)
  ctx.arc (cx, cy, r, 0, 2*Math.PI)
  ctx.closePath()
  ctx.fill()

  ctx.restore()
}

function sides () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let w = 21+document.getElementById("speck_size").value/1
  w += 41 * Math.random()
  let x = 0, y = 0
  let x2 = w
  let y2 = canvas.height
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (document.getElementById("grungy").checked)
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  
  ctx.beginPath()
  ctx.moveTo(x, y)
  ctx.lineTo(x2, y)
  ctx.lineTo(x2, y2)
  ctx.lineTo(x, y2)
  ctx.closePath()
  ctx.fill()
}

function sides2 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let w = 21+document.getElementById("speck_size").value/3
  w += 41 * Math.random()
  let x = canvas.width * Math.random() - w, y = 0
  let x2 = x + w
  let y2 = canvas.height
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (document.getElementById("grungy").checked)
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.beginPath()
  ctx.moveTo(x, y)
  ctx.lineTo(x2, y)
  ctx.lineTo(x2, y2)
  ctx.lineTo(x, y2)
  ctx.closePath()
  ctx.fill()
}

function square (x, y, w) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let cx = canvas.width/2 + (Math.random()-0.5) * 200
  let cy = canvas.height/2 + (Math.random()-0.5) * 200
  let len = 10 + 2 * Math.floor(document.getElementById("speck_size").value)
  clip()
  cx -= len/2
  cy -= len/2
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (document.getElementById("grungy").checked)
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.beginPath()
  ctx.moveTo(cx, cy)
  ctx.lineTo(cx+len, cy)
  ctx.lineTo(cx+len, cy+len)
  ctx.lineTo(cx, cy+len)
  ctx.closePath()
  ctx.fill()
  ctx.restore()
}

function bwash (x, y, w) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.save()
  if (Math.random() > 0.01) {
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.lineTo(x+w, y)
    ctx.lineTo(x+w, y+w)
    ctx.lineTo(x, y+w)
    ctx.closePath()
    ctx.fill()
  }
  ctx.restore()
}

function btile (x, y, w, colors, grunge) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.save
  if (grunge) {
    x += pet(13), y += pet(13)
  }
  if (Math.random() > 0.1) {
    shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.lineTo(x+w, y)
    ctx.lineTo(x+w, y+w)
    ctx.lineTo(x, y+w)
    ctx.closePath()
    ctx.fill()
  }
  if (Math.random() > 0.0) {
    
    shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x+w/2,y+w/2)
    ctx.arc (x+w/2, y+w/2, w/2.1 - (Math.random() * w/3), 0, 2*Math.PI)
    ctx.closePath()
    ctx.fill()
  }
  ctx.restore()
}

function ctile2 (x, y, w, colors, grunge, i) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let q = i%4
  ctx.save()
  if (q == 0) {
    if (grunge)
      shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.arc (x, y, w, 0, 0.5*Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[1]
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.arc (x, y, 2*w/3, 0, 0.5*Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.arc (x, y, w/3, 0, 0.5*Math.PI)
    ctx.closePath()
    ctx.fill()
  } else
  if (q == 1) {
    if (grunge)
      shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x,y+w)
    ctx.arc (x, y+w, w, 1.5*Math.PI, 0)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[1]
    ctx.beginPath()
    ctx.moveTo(x,y+w)
    ctx.arc (x, y+w, 2*w/3, 1.5*Math.PI, 0)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x,y+w)
    ctx.arc (x, y+w, w/3, 1.5*Math.PI, 0)
    ctx.closePath()
    ctx.fill()
  } else
  if (q == 2) {
    if (grunge)
      shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x+w,y)
    ctx.arc (x+w, y, w, 0.5*Math.PI, Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[1]
    ctx.beginPath()
    ctx.moveTo(x+w,y)
    ctx.arc (x+w, y, 2*w/3, 0.5*Math.PI, Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x+w,y)
    ctx.arc (x+w, y, w/3, 0.5*Math.PI, Math.PI)
    ctx.closePath()
    ctx.fill()
  } else
  if (q == 3) {
    if (grunge)
      shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x+w,y+w)
    ctx.arc (x+w, y+w, w, Math.PI, 1.5*Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[1]
    ctx.beginPath()
    ctx.moveTo(x+w,y+w)
    ctx.arc (x+w, y+w, 2*w/3, Math.PI, 1.5*Math.PI)
    ctx.closePath()
    ctx.fill()
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.moveTo(x+w,y+w)
    ctx.arc (x+w, y+w, w/3, Math.PI, 1.5*Math.PI)
    ctx.closePath()
    ctx.fill()
  } else
  if (q == 4) {
    if (grunge)
      shuffle(colors)
    ctx.fillStyle = colors[0]
    ctx.beginPath()
    ctx.fillRect(x,y,w,w)
    ctx.closePath()
    if (Math.random() < 0.5) {
      ctx.fillStyle = colors[1]
      ctx.beginPath()
      ctx.moveTo(x+w/3, y)
      ctx.lineTo(x+2*w/3, y)
      ctx.lineTo(x+2*w/3, y+w)
      ctx.lineTo(x+w/3, y+w)
      ctx.closePath()
      ctx.fill()
    } else {
      ctx.fillStyle = colors[1]
      ctx.beginPath()
      ctx.moveTo(x, y+w/3)
      ctx.lineTo(x+w, y+w/3)
      ctx.lineTo(x+w, y+2*w/3)
      ctx.lineTo(x, y+2*w/3)
      ctx.closePath()
      ctx.fill()
    }
  }
  ctx.restore()
}

function ctile (x, y, w, i) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let q = i % 4//Math.floor(Math.random() * 4)
  ctx.beginPath()
  if (q == 1) {
    ctx.moveTo(x,y)
    ctx.arc (x, y, w, 0, 0.5*Math.PI)
  } else
  if (q == 0) {
    ctx.moveTo(x,y+w)
    ctx.arc (x, y+w, w, 1.5*Math.PI, 0)
  } else
  if (q == 3) {
    ctx.moveTo(x+w,y)
    ctx.arc (x+w, y, w, 0.5*Math.PI, Math.PI)
  } else
  if (q == 2) {
    ctx.moveTo(x+w,y+w)
    ctx.arc (x+w, y+w, w, Math.PI, 1.5*Math.PI)
  } else
    ctx.fillRect(x,y,w,w)
  ctx.closePath()
  ctx.fill()
}

function dtile (x, y, w, i) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let q = i%5
  ctx.beginPath()
  if (q == 0) {
    ctx.arc (x+w/2, y, w/2, 0, Math.PI)
  } else
  if (q == 1) {
    ctx.arc (x, y+w/2, w/2, 1.5*Math.PI, 0.5*Math.PI)
    
  } else
  if (q == 2) {
    ctx.arc (x+w, y+w/2, w/2, 0.5*Math.PI, 1.5*Math.PI)
    
  } else
  if (q == 3) {
    ctx.arc (x+w/2, y+w, w/2, Math.PI, 0)
  } else
    ctx.arc (x+w/2, y+w/2, w/2, 2*Math.PI, 0)
  ctx.closePath()
  ctx.fill()
}

function mtile (x, y, w, i) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");

  let q = i%8
  ctx.beginPath()
  if (q == 0) {
    ctx.moveTo (x, y)
    ctx.lineTo(x+w, y)
    ctx.lineTo(x+w/2, y+w/2)
  } else
  if (q == 1) {
    ctx.moveTo (x, y)
    ctx.lineTo(x, y+w)
    ctx.lineTo(x+w/2, y+w/2)
  } else
  if (q == 2) {
    ctx.moveTo (x+w, y)
    ctx.lineTo(x+w, y+w)
    ctx.lineTo(x+w/2, y+w/2)
  } else
  if (q == 3) {
    ctx.moveTo (x+w, y)
    ctx.lineTo(x, y)
    ctx.lineTo(x+w/2, y+w/2)
  } else
  if (q == 4) {
    ctx.arc (x+w/2, y, w/2, 0, Math.PI)
  } else
  if (q == 5) {
    ctx.arc (x, y+w/2, w/2, 1.5*Math.PI, 0.5*Math.PI)
    
  } else
  if (q == 6) {
    ctx.arc (x+w, y+w/2, w/2, 0.5*Math.PI, 1.5*Math.PI)
    
  } else
  if (q == 7) {
    ctx.arc (x+w/2, y+w, w/2, Math.PI, 0)
  }
  ctx.closePath()
  ctx.fill()
}

function triangle (x, y, w, i) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  // draw a triangle in one or four orientations
  // pick 3 corners |_ -| _| |-
  
  let q = i % 4
  ctx.beginPath()
  if (q == 0) {
    ctx.moveTo (x, y)
    ctx.lineTo(x+w, y)
    ctx.lineTo(x+w, y+w)
  } else
  if (q == 1) {
    ctx.moveTo (x, y)
    ctx.lineTo(x, y+w)
    ctx.lineTo(x+w, y+w)
  } else
  if (q == 2) {
    ctx.moveTo (x+w, y)
    ctx.lineTo(x+w, y+w)
    ctx.lineTo(x, y+w)
  } else {
    ctx.moveTo (x+w, y)
    ctx.lineTo(x, y)
    ctx.lineTo(x, y+w)
  }
  ctx.closePath()
  ctx.fill()
}

function albers () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let f1 = W/9.6
  let f2 = 2* f1
  let f3 = 3 * f1
  let f4 = 4 *f1
  let len = W/2, maxy = W/2
  let quat = len/2
  let top = f1/4
  let t = top
  // 4 rects
  ctx.save()
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let grunge = document.getElementById("grungy").checked
  
  top = 0
  clip()
  
  ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(0+top, 0 + top)
  ctx.lineTo(W-top, 0 + top)
  ctx.lineTo(W-top, W-top)
  ctx.lineTo(0+top, W-top)
  ctx.closePath()
  ctx.fill()
  
  top += t*2
  ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(f1, f1+top)
  ctx.lineTo(W-f1, f1+top)
  ctx.lineTo(W-f1, W-f1+top)
  ctx.lineTo(f1, W-f1+top)
  ctx.closePath()
  ctx.fill()
  
  top += t * 2
  ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(f2, f2+top)
  ctx.lineTo(W-f2, f2+top)
  ctx.lineTo(W-f2, W-f2+top)
  ctx.lineTo(f2, W-f2+top)
  ctx.closePath()
  ctx.fill()
  
  top += t*2
  ctx.fillStyle = randomColor()
  if (grunge)
    ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.beginPath();
  ctx.moveTo(f3, f3+top)
  ctx.lineTo(W-f3, f3+top)
  ctx.lineTo(W-f3, W-f3+top)
  ctx.lineTo(f3, W-f3+top)
  ctx.closePath()
  ctx.fill()
  ctx.restore()
}

function concentriccirc() {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let r = canvas.width/2
  let f1 = r/4
  let x = r, y = r
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.fillRect(0,0,canvas.width,canvas.height)
  ctx.beginPath();
  ctx.arc(x, y, r, 0, 2*Math.PI);
  ctx.closePath()
  ctx.fill()

  r -= f1
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.arc(x, y, r, 0, 2*Math.PI);
  ctx.closePath()
  ctx.fill()

  r -= f1
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.arc(x, y, r, 0, 2*Math.PI);
  ctx.closePath()
  ctx.fill()

  r -= f1
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.arc(x, y, r, 0, 2*Math.PI);
  ctx.closePath()
  ctx.fill()
  ctx.restore()
}

function concentric () {
  if (Math.random() > 0.5)
    concentriccirc()
  else
    concentricrect()
}

function concentricrect () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let f1 = W/8
  let f2 = 2* f1
  let f3 = 3 * f1
  let len = W/2, maxy = W/2
  let quat = len/2
  // 4 rects
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let grunge = document.getElementById("grungy").checked

  clip()
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(0, 0)
  ctx.lineTo(W, 0)
  ctx.lineTo(W, W)
  ctx.lineTo(0, W)
  ctx.closePath()
  ctx.fill()

  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(f1, f1)
  ctx.lineTo(W-f1, f1)
  ctx.lineTo(W-f1, W-f1)
  ctx.lineTo(f1, W-f1)
  ctx.closePath()
  ctx.fill()

  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(f2, f2)
  ctx.lineTo(W-f2, f2)
  ctx.lineTo(W-f2, W-f2)
  ctx.lineTo(f2, W-f2)
  ctx.closePath()
  ctx.fill()

  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  if (grunge)
    ctx.fillStyle = randomColor()
  ctx.beginPath();
  ctx.moveTo(f3, f3)
  ctx.lineTo(W-f3, f3)
  ctx.lineTo(W-f3, W-f3)
  ctx.lineTo(f3, W-f3)
  ctx.closePath()
  ctx.fill()
  ctx.restore()
}

function chips () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let maxdist = Math.pow(Math.pow(cx, 2) + Math.pow(cy, 2), 0.5) +200
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.strokeStyle = document.getElementById("paintcolor").value
  for (var t = 0; t < 5; t++) {
    var radius = 13
    x = 0;
    y = 0;
    var x0 = x;
    var y0 = y;
    angle = Math.floor(Math.random() * 6.42);
    ctx.beginPath();
    var cent = Math.random()*ctx.canvas.width+50;
    var centy = Math.random()*ctx.canvas.height+50;
    var edges = 3+Math.random()*26;
    let max = Math.PI * 2
    let increase = Math.PI * 2/edges;
    for (var i = 0; i < 100; i++) {
      increase += Math.random()/50
      radius = 13 + (13/2 * Math.random())
      x = radius * Math.cos(angle)+cent;
      y = radius * Math.sin(angle)+centy;
      ctx.lineTo(x, y);
      angle += increase;
      if (angle >= max)
        break;
    }
    ctx.closePath();
    ctx.fill()
  }
}

function chaze () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let G = document.getElementById("grungy").checked
  let multiplier = 1.5
  if (G)
    multiplies = 3
  clip()
  let x = canvas.width/2 + pet(170)
  let y = canvas.height/2 + pet(170)
  let x1 = canvas.width/2 + pet(300)
  let y1 = canvas.height/2 + pet(300)
  let r = x * (multiplier + Math.random()/2)
  let r1 = r/5
  let rg = ctx.createRadialGradient(x, y, r, x1, y1, r1)
  let col1 = document.getElementById("paintcolor").value
  let col2 = "rgba("+hexToR(col1)+", "+hexToG(col1)+", "+hexToB(col1)+", 0.0)";// transparent
  rg.addColorStop(0.01, col1);
  rg.addColorStop(document.getElementById("speck_opacity").value/100, col2);
  ctx.fillStyle = rg
  ctx.fillRect(0,0,canvas.width, canvas.height)
  ctx.restore()
}

function rectify () {
  let width = document.getElementById("speck_size").value/5
  width = (100 - width + 2)
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let W = 2 + Math.floor(document.getElementById("speck_size").value/10)
  let wdivs = W
  let cw = canvas.width
  let ch = canvas.height
  let w = cw/wdivs
  let hdivs = Math.round(wdivs * ch/cw)
  let h = ch/hdivs
  let i = 0, x = w, y = 0
  let N =(1+wdivs) * (1+hdivs)
  for (; i < N; i++) {
    if (Math.random() < 0.5)
      hazeRect(x, y, x+w, y-h)
    x += w
    if (x >= (wdivs)*w) {
      x = 0
      y += h
    }
  }
}

function hazeRect (x1, y1, x2, y2) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.fillStyle = randomGradientRect(canvas, document.getElementById("paintcolor").value, x1, y1, x2, y2)
  let sx = (x1<x2)? x1:x2
  let lx = (x1>x2)? x1:x2
  
  let sy = (y1<y2)? y1:y2
  let ly = (y1>y2)? y1:y2
  
  ctx.fillRect(sx,sy,lx-sx,ly-sy)
}

function haze () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  ctx.fillRect(0,0,canvas.width, canvas.height)
  ctx.restore()
}

function fill () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  clip()
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.fillRect(0,0,canvas.width, canvas.height)
  ctx.restore()
}

function hazeo () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  let G = document.getElementById("grungy").checked
  if ((G && Math.random() > 0.7) || !G)
    ctx.fillRect(0,0,canvas.width, canvas.height)
}

function rc () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalCompositeOperation = "source-over"
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  let cx = canvas.height/2, cy = canvas.width/2
  ocanvas.height = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.width = (canvas.height > canvas.width)? canvas.height: canvas.width
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  let swap = canvas.height
  canvas.height = canvas.width
  canvas.width = swap
  syncBackground(canvas)
  cx = canvas.height/2, cy = canvas.width/2
  ctx.translate(cy, cx)
  ctx.rotate(Math.PI * 0.5)
  ctx.translate(-cx,-cy)
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
  refreshMode(ctx)
}

function rcc () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalCompositeOperation = "source-over"
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  let cx = canvas.height/2, cy = canvas.width/2
  ocanvas.height = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.width = (canvas.height > canvas.width)? canvas.height: canvas.width
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  let swap = canvas.height
  canvas.height = canvas.width
  canvas.width = swap
  syncBackground(canvas)
  cx = canvas.height/2, cy = canvas.width/2
  ctx.translate(cy, cx)
  ctx.rotate(Math.PI * -0.5)
  ctx.translate(-cx,-cy)
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
  refreshMode(ctx)
}

function flipH () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalCompositeOperation = "source-over"
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  ctx.translate(canvas.width, 0)
  ctx.scale(-1,1)
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
  refreshMode(ctx)
}

function flipV () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  ctx.globalCompositeOperation = "source-over"
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  ctx.translate(0, canvas.height)
  ctx.scale(1,-1)
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
  refreshMode(ctx)
}

function flipStrip () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let w = 40 + Math.random() * canvas.width/2
  let x = (canvas.width) * Math.random()
  octx.clearRect(0,0,canvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  octx.clearRect(0,0,x,ocanvas.height)
  octx.clearRect(x+w,0,ocanvas.width,ocanvas.height)
  ctx.translate(0, canvas.height)
  ctx.scale(1,-1)
  ctx.clearRect(x,0,w,canvas.height)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
}

function flipStripH () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let h = 40 + Math.random() * canvas.height/2
  let y = (canvas.height) * Math.random()
  octx.clearRect(0,0,canvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  octx.clearRect(0,0,canvas.width,y)
  octx.clearRect(0,y+h,ocanvas.width,ocanvas.height)
  ctx.translate(canvas.width, 0)
  ctx.scale(-1,1)
  ctx.clearRect(0,y,canvas.width, h)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a
}

function pixelado () {
  slices()
  rc()
  slices()
  rcc()
}

function shred () {
  blasco()
  rc()
  blasco()
  rcc()/*
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  octx.drawImage(canvas, 0, 0)
  ctx.drawImage(ocanvas, 0, h)
  ctx.drawImage(ocanvas, h, h)
  ctx.drawImage(ocanvas, h, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
 // ctx.setTransform(1,0,0,1,0,0)
  ctx.globalAlpha = a*/
}

function slices () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  let count = ch/h - 1
  let y = 0, i = 0
  for (;i < count; i++) {
    sliceH(y, h, ctx, octx, canvas, ocanvas)
    y += h
  }
  ctx.globalAlpha = a
}

function sliceH (y, h, ctx, octx, canvas, ocanvas) {
  octx.clearRect(0,0,canvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  octx.clearRect(0,0,canvas.width,y)
  octx.clearRect(0,y+h,ocanvas.width,ocanvas.height)
  ctx.translate(0,2*y+h)
  ctx.scale(1,-1)
  ctx.clearRect(0,y,canvas.width, h)
  ctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  ctx.setTransform(1,0,0,1,0,0)
}

function pasta () {
  pastaSlice()
  rc()
  pastaSlice()
  rcc()
}

function closediv (N, d) {
  if (N % d === 0)
    return d
  let i = 0
  let results = []
  for (; i < N; i++) {
    if (N % i == 0)
      results.push(i)
  }
  let min = N
  i = 0
  for (; i < results.length; i++) {
    if (results[i] - d >= 0)
      return results[i]
  }
  return d
}

function pastaSlice () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.drawImage(canvas, 0, 0)
  canvas.width *= 2
  canvas.height /= 2
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  //h = closediv(canvas.height, h)
  let count = ch/h*2
  let y = 0, yon =0, i = 0
  for (;i < count; i++) {
    ctx.drawImage(ocanvas, 0, y, ocanvas.width, h, 0, yon, canvas.width/2, h);
    ctx.drawImage(ocanvas, 0, y+h, ocanvas.width, h, canvas.width/2, yon, canvas.width/2, h);
    y += h*2
    yon += h
  }
  ctx.globalAlpha = a
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}
 
function reverse () { // rotate canvas at touch x,y. concentric circles
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  let h = 2 + Math.floor(document.getElementById("speck_size").value/10)
  let n = canvas.width/h/2
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  octx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let cx = canvas.width/2
  let cy = canvas.height/2
  let x = 0, y = 0
  let x2 = canvas.width, y2 = canvas.height
  let i = 0
  let angle = Math.PI
  if (grunge)
    angle /= 2
  octx.drawImage(ocanvas, 0,0)

  for (; i < n; i++) {
    ctx.save()
    ctx.beginPath()
    ctx.moveTo(x,y)
    ctx.lineTo(x2,y)
    ctx.lineTo(x2,y2)
    ctx.lineTo(x,y2)
    ctx.closePath()
    ctx.clip()
    octx.translate(cx, cy)
    octx.rotate(angle);
    octx.translate(-cx,-cy)
    octx.drawImage(canvas, 0, 0)
    ctx.drawImage(ocanvas, 0,0)
    ctx.restore()
    x += h
    y += h
    x2 -= h
    y2 -= h
  }
  ctx.globalAlpha = a
  octx = ocanvas.getContext('2d')
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function rotateCent () { // rotate canvas at touch x,y. concentric circles
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  let radius = 4 + Math.floor(document.getElementById("speck_size").value/2)
  let r0 = radius
  let n = canvas.width/radius
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  octx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let x = canvas.width/2
  let y = canvas.height/2
  x = LASTCLICK[0]
  y = LASTCLICK[1]
  let i = 0
  let angle = -Math.PI/n
  for (; i < n/2; i++) {
    octx.translate(x, y)
    octx.rotate(angle);
    octx.translate(-x,-y)
    ctx.save()
    octx.drawImage(canvas, 0, 0)
    ctx.beginPath()
    ctx.arc(x, y, radius, 0, 2*Math.PI)
    ctx.closePath()
    ctx.clip()
    ctx.drawImage(ocanvas, 0,0)
    octx.translate(x,y)
    octx.rotate(-angle);
    octx.translate(-x,-y)
    ctx.restore()
    radius += r0
  }
  ctx.globalAlpha = a
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function rotateCirc () { // grip of rotated circles
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  let n = 2 + Math.floor(document.getElementById("speck_size").value/20)
  // 27 ... 2 => 2 ... 27
  // max+min - n
  n = (27 + 2) - n
  let a = ctx.globalAlpha
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  let h = canvas.height/n
  let w = canvas.width/n
  let x = w/2
  let y = h/2
  let i = 0
  for (; i < n*n; i++) {
    if (i > 0 && i % (n) == 0) {
      x = w/2
      y += h
    }
    let angle = (Math.PI * (Math.random() - 0.5) * Math.PI/2)
    let radius = canvas.width/(n+1)/2
    if (grunge) {
      radius += pet(radius/2)
      x += pet(radius/2)
      y += pet(radius/2)
    }
    octx.translate(x, y)
    octx.rotate(angle);
    octx.translate(-x,-y)
    ctx.save()
    octx.drawImage(canvas, 0, 0)
    ctx.beginPath()
    ctx.arc(x, y, radius, 0, 2*Math.PI)
    ctx.closePath()
    ctx.clip()
    ctx.drawImage(ocanvas, 0,0)
    octx.translate(x,y)
    octx.rotate(-angle);
    octx.translate(-x,-y)
    ctx.restore()
    x += w
  }
  ctx.globalAlpha = a
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function dots () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  ctx.fillStyle = document.getElementById("paintcolor").value
  let ch = canvas.height
  let h = 2 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = h/2
  let r = w/2
  let t = 0
  if (grunge) {
    t = 2
    r *= 0.7
  }
  let count = (canvas.height/h + 2) * (canvas.width/w + 2)
  let newline = Math.floor(canvas.width/w)+2
  let counter = 0
  let x = 0, y = 0
  let i = 0
  for (;i < count; i++) {
    ctx.beginPath()
    ctx.arc(x+w/2+pet(t),y+h/2+pet(t),r+pet(w/5),0,Math.PI*2)
    ctx.closePath()
    ctx.fill()
    x += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = -w/2
      y += h
      off *= -1
      x += off/2
    }
  }
}

function diamonds () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = 0

  let count = 4*(1+canvas.height/h) * (1+canvas.width/w)
  let newline = 2*Math.floor(canvas.width/w) + 1
  let counter = 0
  let x = 0, y = 0
  let i = 0
  ctx.save()
  ctx.beginPath()
  for (;i < count; i++) {
    ctx.moveTo(x+w/4,y)
    ctx.lineTo(x+w/2, y+h/4)
    ctx.lineTo(x+w/4, y+h/2)
    ctx.lineTo(x, y+h/4)
    x += w/2
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = 0
      y += h/2
    }
  }
  ctx.closePath()
  ctx.clip()
  ctx.clearRect(0,0,canvas.width, canvas.height)
  ctx.restore()
}

function checkerboard () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = -1
  let count = 2*(1+canvas.height/h) * (1+canvas.width/w)
  let newline = Math.floor(canvas.width/w) + 1
  let counter = 0
  let x = 0, y = 0
  let i = 0
  ctx.save()
  ctx.beginPath()
  for (;i < count; i++) {
    ctx.moveTo(x,y)
    ctx.lineTo(x+w/2, y)
    ctx.lineTo(x+w/2, y+h/2)
    ctx.lineTo(x, y+h/2)
    x += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      if (off < 0)
        x = w/2
      else
        x = 0
      y += h/2
      off *= -1
    }
  }
  ctx.closePath()
  ctx.clip()
  ctx.clearRect(0,0,canvas.width, canvas.height)
  ctx.restore()
}

function dashes (canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h/4
  let off = h/4
  let r = w/2
  let t = r
  if (grunge) {
    t = r*2
    r *= 1.4
  }
  ctx.lineCap = "round"
  ctx.lineWidth = r
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let count = canvas.height/h * canvas.width/w * 4.3
  let newline = Math.floor(canvas.width/w) + 2
  let counter = 0
  let x = 0, y = 0
  let i = 0
  for (;i < count; i++) {
    ctx.save()
    ctx.beginPath()
    ctx.moveTo(x+pet(t), y+pet(t))
    ctx.lineTo(x+w/2+pet(t),y+pet(t))
    ctx.stroke()
    x += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = 0
      y += h/4
    }
  }
}
  
function holes2 (canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 2 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = h/2
  let r = w/2
  let t = r
  if (grunge) {
    t = r*2
    r *= 1.4
  }
  let count = canvas.height/h * canvas.width/w
  let newline = Math.floor(canvas.width/w)
  let counter = 0
  let x = w, y = h/2
  let xo = 0, yo = 0, i = 0
  for (;i < count; i++) {
    ctx.save()
    ctx.beginPath()
    ctx.arc(x+w/2+pet(t),y+h/2+pet(t),r+pet(w/5),0,Math.PI*2)
    ctx.closePath()
    ctx.clip()
    ctx.clearRect(0,0,canvas.width, canvas.height)
    ctx.restore()
    x += w*1.8
    xo += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = w
      xo = 0
      y += 1.5*h
      yo += h
      off *= -1
      x =+ off
    }
  }
}

function holes () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let ch = canvas.height
  let h = 2 + Math.floor(document.getElementById("speck_size").value/4)
  let w = h
  let off = h/2
  let r = w/2
  let t = 0
  if (grunge) {
    t = r
    r *= 1.4
  }
  let count = canvas.height/h * canvas.width/w
  let newline = Math.floor(canvas.width/w)
  let counter = 0
  let x = w, y = h/2
  let xo = 0, yo = 0, i = 0
  for (;i < count; i++) {
    ctx.save()
    ctx.beginPath()
    ctx.arc(x+w/2+pet(t),y+h/2+pet(t),r+pet(w/5),0,Math.PI*2)
    ctx.closePath()
    ctx.clip()
    ctx.clearRect(0,0,canvas.width, canvas.height)
    ctx.restore()
    x += w*2
    xo += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = w
      xo = 0
      y += 2*h
      yo += h
      off *= -1
      x =+ off
    }
  }
}

function samplec () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.drawImage(canvas, 0, 0)
  ctx.clearRect(0,0,ocanvas.width,canvas.height)
  canvas.width /= 2
  canvas.height /= 2
  syncBackground(canvas)
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  let w = h
  let count = canvas.height/h * canvas.width/w
  let newline = Math.floor(canvas.width/w)
  let counter = 0
  let x = w, y = h
  let xo = 0, yo = 0, i = 0
  for (;i < count; i++) {
    ctx.save()
    ctx.beginPath()
    ctx.arc(xo+w/2,yo+h/2,w/2,0,Math.PI*2)
    ctx.closePath()
    ctx.clip()
    //if (i % 4 == 0)
    //  ctx.clearRect(0,0,canvas.width, canvas.height)
    //if (i % 4 == 0)
    ctx.drawImage(ocanvas, x, y, w, h, xo, yo, w, h);
    ctx.restore()
    x += w*2
    xo += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = w
      xo = 0
      y += 2*h
      yo += h
    }
  }
  ctx.globalAlpha = a
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function sample () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.drawImage(canvas, 0, 0)
  ctx.clearRect(0,0,ocanvas.width,canvas.height)
  canvas.width /= 2
  canvas.height /= 2
  syncBackground(canvas)
  let ch = canvas.height
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  let w = h
  let count = canvas.height/h * canvas.width/w
  let newline = Math.floor(canvas.width/w)
  let counter = 0
  let x = w, y = h
  let xo = 0, yo = 0, i = 0
  for (;i < count; i++) {
    ctx.drawImage(ocanvas, x, y,  w, h, xo, yo, w, h);
    x += w*2
    xo += w
    counter++
    if (i > 0 && newline == counter) {
      counter = 0
      x = w
      xo = 0
      y += 2*h
      yo += h
    }
  }
  ctx.globalAlpha = a
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function zoom () {
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  octx.drawImage(canvas, 0, 0)
  if (grunge) {
    canvas.width /= 1.2
    canvas.height /= 1.2
  } else {
    canvas.width *= 1.2
    canvas.height *= 1.2
  }
  syncBackground(canvas)
  ctx.drawImage(ocanvas,0,0,canvas.width,canvas.height)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  document.getElementById("cs").innerHTML = canvas.width + "X" + canvas.height
  LASTCLICK[0] = myCanvas.width/2
  LASTCLICK[1] = myCanvas.height/2
}

function blasco () {
  let h = 4 + Math.floor(document.getElementById("speck_size").value/2)
  let ocanvas = document.getElementById('off')
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let temp = document.createElement("CANVAS")
  let tempctx = temp.getContext("2d")
  let a = ctx.globalAlpha
  let grunge = document.getElementById("grungy").checked
  ctx.globalAlpha = 1.0
  ocanvas.height = canvas.height
  ocanvas.width = canvas.width
  temp.height = canvas.height * 2 + h*2
  temp.width = canvas.width
  let ch = canvas.height
  let count = ch/h - 1
  let y = 0, i = 0
  for (;i < count; i++) {
    if (grunge) {
      if (i % 2 == 0) {
        sliceHC(y, h, ctx, octx, canvas, ocanvas, temp, tempctx, grunge)
        y += h
      } else
        y += h
    } else {
      sliceHC(y, h, ctx, octx, canvas, ocanvas, temp, tempctx, grunge)
        y += h
    }
  }
  
  if (grunge) {
    canvas.height *= 1
    canvas.height += 2*h
  } else {
    canvas.height *= 2
    canvas.height += 2*h
  }
  syncBackground(canvas)
  ctx.drawImage(temp, 0, 0)
  ctx.globalAlpha = a
  ctx.setTransform(1,0,0,1,0,0)
}

function sliceHC (y, h, ctx, octx, canvas, ocanvas, t, tctx, g) {
  octx.clearRect(0,0,canvas.width,ocanvas.height)
  octx.drawImage(canvas, 0, 0)
  octx.clearRect(0,0,canvas.width,y)
  octx.clearRect(0,y+h,ocanvas.width,ocanvas.height)
  if (g)
    tctx.translate(0,h)
  else
    tctx.translate(0,y+h)
  tctx.clearRect(0,y,canvas.width, h)
  tctx.drawImage(ocanvas, 0, 0)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  tctx.setTransform(1,0,0,1,0,0)
}

function randomGradientRect(canvas, col1, x1, y1, x2, y2) {
  let centx = Math.random() * canvas.width;
  let centy = Math.random() * canvas.height;
  let radius = canvas.width/2;
  let angle = Math.random()*6.27;
  let p = (x1-x2)
 // col1 = petColor(col1, 25)
  /*if (Math.random() > 0.95) {
    let temp = x2
    x2 = x1
    x1 = temp
    temp = y2
    y2 = y1
    y1 = temp
  }*/
  // peterb col1
  
  let my_gradient = canvas.getContext('2d').createLinearGradient(x1-pet(p), y1-pet(p), x2+pet(p), y2+pet(p));
  let col2 = "rgba("+hexToR(col1)+", "+hexToG(col1)+", "+hexToB(col1)+", 0.0)";// transparent
  my_gradient.addColorStop(0,col1);
  my_gradient.addColorStop(1,col2);
  return my_gradient;
}

function petColor (c, p) {
  let r = hexToR(c) + +pet(p).toString()
  let g = hexToG(c) + +pet(p).toString()
  let b = hexToB(c) + +pet(p).toString()
  let R = ('0'+(Math.round(r)).toString(16)).slice(-2),
      G = ('0'+(Math.round(g)).toString(16)).slice(-2),
      B = ('0'+(Math.round(b)).toString(16)).slice(-2);
  //console.log("#"+R+G+B)
  return "#"+R+G+B
}

function randomGradient(canvas, col1) {
  let x1 = 0, y1 = 0, x2 = 0, y2 = 0;
  let centx = Math.random() * canvas.width;
  let centy = Math.random() * canvas.height;
  let radius = canvas.width/2;
  let angle = Math.random()*6.27;
  x1 = radius * Math.cos(angle)+centx;
  y1 = radius * Math.sin(angle)+centy;
  x2 = radius * Math.cos(angle+3.14)+centx;
  y2 = radius * Math.sin(angle+3.14)+centy;
  let my_gradient = canvas.getContext('2d').createLinearGradient(x1, y1, x2, y2);
  if (col1 === undefined)
    col1 = randomColor();

  let col2 = "rgba("+hexToR(col1)+", "+hexToG(col1)+", "+hexToB(col1)+", 0.0)";// transparent
  my_gradient.addColorStop(0,col1);
  my_gradient.addColorStop(1,col2);
  return my_gradient;
}

function randomGradientLeft(canvas, col1) {
  let x1 = 0, y1 = 0, x2 = 0, y2 = 0;
  let centx = -1//Math.random() * canvas.width;
  let centy = Math.random() * canvas.height;
  let radius = canvas.width/2;
  let angle = Math.random()*6.27;
  x1 = radius * Math.cos(angle)+centx;
  y1 = 0//radius * Math.sin(angle)+centy;
  x2 = radius * Math.cos(angle+3.14)+centx;
  y2 = 0//radius * Math.sin(angle+3.14)+centy;
  
  console.log(x1,x2)
  let my_gradient = canvas.getContext('2d').createLinearGradient(x1, y1, x2, y2);
  if (col1 === undefined)
    col1 = randomColor();

  let col2 = "rgba("+hexToR(col1)+", "+hexToG(col1)+", "+hexToB(col1)+", 0.0)";// transparent
  my_gradient.addColorStop(0,col1);
  my_gradient.addColorStop(1,col2);
  return my_gradient;
}

function hexToR(h) { return parseInt((cutHex(h)).substring(0,2),16) }
function hexToG(h) { return parseInt((cutHex(h)).substring(2,4),16) }
function hexToB(h) { return parseInt((cutHex(h)).substring(4,6),16) }
function cutHex(h) { return (h.charAt(0)=="#") ? h.substring(1,7) : h}

function hrips () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let centerx = canvas.width / 2;
  let centery = canvas.height / 2;
  let thickness = document.getElementById("speck_size").value
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  //ctx.save()
  clip()
  ctx.fillStyle = document.getElementById("paintcolor").value
  let yincrement = 4;
  let numshapes = 1
  for (let t = 0; t < numshapes; t++) {
    let points = [];
    let width = 1 + Math.random()*3;
    ctx.lineWidth = 3+Math.random()*11;
    let x = -20;
    let y = Math.random() * canvas.height * 1.5
    y //+= thickness
    let x0 = x;
    let y0 = y;
    ctx.beginPath();
    ctx.moveTo(x, y);
    points.push([x,y]);
    let direction = 0.8;
    if (y < centery)
      direction = -0.8;
    let yincrement = 1 + Math.random() * 3;
    let jump = 3 + Math.random() * 4;
    while (x < canvas.width+20) {
      y += (Math.random()-0.5) * yincrement;
      x += 1 + 3 * Math.random();
      if (Math.random() < 0.1)
        x += 3 + Math.random() * 7;
      if (Math.random() < 0.5)
        y -= jump * (Math.random()*direction);
      ctx.lineTo(x+Math.random()*4,y+(1+width + Math.random() * 5));
      points.push([x,y]);
      if (Math.random() < 0.05) {
        direction *= -1;
      }
    }
    y -= thickness
    while (x > -20) {
      y -= (Math.random()-0.5) * yincrement;
      x -= 1 + 3 * Math.random();
      if (Math.random() < 0.040)
        x -= 7 + Math.random() * 7;
      if (Math.random() < 0.5)
        y += jump * (Math.random()*direction);
      ctx.lineTo(x+Math.random()*4,y+(1+width + Math.random() * 5));
      points.push([x,y]);
      if (Math.random() < 0.1) {
        direction *= -1;
      }
    }
    ctx.fillStyle = document.getElementById("paintcolor").value
    if (document.getElementById("grungy").checked)
      ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
    ctx.closePath();
    ctx.fill();
  }
  ctx.restore()
}

function smudge (type) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let xoff = -W, yoff = -W
  let len = W/2, maxy = W/2
  let off = document.getElementById("offscreen");
  let ctoff = off.getContext("2d");
  let canvasoff = document.getElementById("offscreen");
  let ctxoff = canvasoff.getContext("2d");
  let n = 0, x = 0, y = 0
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100 //* 0.75
  let smudge_size = 2 + Math.random()*13
 // let num = 1 + document.getElementById("number").value/300
  let dx = pet(smudge_size*3), dy = pet(smudge_size*3)
  let smudge_ct = 1 + document.getElementById("number").value/150
  clip()
  for (; n < smudge_ct; n++) {
    if (type === "streaks")
      offstreaks()
    else
    if (type === "horizontal")
      offhorizontal()
    else
    if (type === "horizontal2")
      offhorizontal2()
    else
    if (type === "arcs")
      offarcs()
    else
    if (type === "stars")
      offstars()
    else
      offspecks()
    x = Math.random()*canvas.width
    y = Math.random()*canvas.height
    dx = pet(13), dy = pet(13)
    let i = 0
    let moves = smudge_size
   
    for (; i < moves; i++) {
      ctx.drawImage(canvasoff, x,   y)

      ctx.drawImage(canvasoff, x-W, y-W)
      ctx.drawImage(canvasoff, x,   y-W)
      ctx.drawImage(canvasoff, x+W, y-W)
      
      ctx.drawImage(canvasoff, x-W, y+W)
      ctx.drawImage(canvasoff, x,   y+W)
      ctx.drawImage(canvasoff, x+W, y+W)
      
      ctx.drawImage(canvasoff, x-W, y)
      ctx.drawImage(canvasoff, x+W, y)
      
      x += dx + pet(23)
      y += dy + pet(23)
    }
  }
  ctxoff.clearRect(0,0,canvasoff.width, canvasoff.height)
  ctx.restore()
}

function fog (type) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let H = canvas.height
  let xoff = -W, yoff = -H
  let len = W/2, maxy = W/2
  let canvasoff = document.getElementById("offscreen");
  let ctxoff = canvasoff.getContext("2d");
  let n = 0, x = 0, y = 0
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100 //* 0.75
  let smudge_size = 51 + Math.random()*100
  let colors = []
  let grunge = document.getElementById("grungy").checked
  if (grunge)
    colors.push(randomColor())
  else
    colors.push(document.getElementById("paintcolor").value)
  clip()
  let smudge_ct = 1 + document.getElementById("number").value/100
  ctxoff.save()
  for (; n < smudge_ct; n++) {
    x = Math.random() * (W + 40) - 256
    y = Math.random() * (H + 40) - 256
    offbrush(colors)
    let i = 0
    let moves = 30//smudge_size * 8
    for (; i < moves; i++) {
      ctx.drawImage(canvasoff, x += pet(41), y += pet(41))
    }
  }
  ctxoff.restore()
  ctxoff.clearRect(0,0,canvasoff.width, canvasoff.height)
  ctx.restore()
}

function upstroke (type) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let W = canvas.width
  let xoff = -W, yoff = -W
  let len = W/2, maxy = W/2
  let off = document.getElementById("offscreen");
  let ctoff = off.getContext("2d");
  let canvasoff = document.getElementById("offscreen");
  let ctxoff = canvasoff.getContext("2d");
  let n = 0, x = 0, y = -40
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100 //* 0.75
  let smudge_size = 121 + Math.random()*100
  let wiggle = 3
  let grunge = document.getElementById("grungy").checked
  if (grunge)
    wiggle *= 2
  let dx = pet(smudge_size*3), dy = pet(smudge_size*3)
  let smudge_ct = 1 + document.getElementById("number").value/1000
  clip()
  let colors = []
  let nc = 1 + (Math.floor(Math.random() * 4))
  let c = 0
  for (; c < nc; c++)
    colors.push(randomColor())
  
  for (; n < smudge_ct; n++) {
    x = Math.random()*canvas.width - 256// half of offcanvas width???

    let bias = (Math.random() - 0.5)/25
    
    offbrush(colors)
    y = W +50//-(180 + Math.random() * W/2)
    let i = 0
    let moves = (W)
    for (; i < moves; i++) {
      ctx.drawImage(canvasoff, x, y)
      x += pet(wiggle)
      x += bias
      y -= 2
    }
  }
  ctxoff.clearRect(0,0,canvasoff.width, canvasoff.height)
  ctx.restore()
}

function offbrush (colors) {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let x = 0, y = 0
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)
  ctx.globalAlpha = 0.01
  let maxradius = 1 + document.getElementById("speck_size").value/3
  let d = 41 + Math.random() * maxradius
  d *= 3
  let count = 25
  ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)]
  //cx = maxradius/2
 // cy = maxradius/2
  for (let j = 0; j < count; j++) {
   // ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)]
    ctx.beginPath();
    x = cx + pet(d)*Math.cos(Math.random()*6.28)
    y = cy + pet(d)*Math.sin(Math.random()*6.28)
    ctx.arc(x, y, Math.random()*maxradius, 0, 2*Math.PI);
    ctx.fill();
  }
}

function offstars () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let csize = ctx.canvas.height
  let x = 0, y = 0
  ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height)
  ctx.globalAlpha = 0.1
  let maxWidth = 0.15 + document.getElementById("speck_size").value/500
  ctx.strokeStyle = document.getElementById("paintcolor").value
  if (document.getElementById("grungy").checked)
    maxWidth *= 2
  ctx.globalAlpha = 0.1
  let s = 0
  let count = 7
  for (; s < count; s++) {
    x = Math.random() * canvas.width;
    y = Math.random() * canvas.height;
    let spokes = 7 + Math.random() * 9
    let spokelength = 20 + 51 * Math.random()
    for (let i = 0; i < spokes; i++) {
      ctx.lineWidth = maxWidth * Math.random()
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x+Math.cos(Math.random()*6.28)*pet(spokelength), y+Math.sin(Math.random()*6.28)*pet(spokelength));
      ctx.stroke()
    }
  }
}

function offhorizontal () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let csize = ctx.canvas.height
  let x = 0, y = 0
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.globalAlpha = 0.1
  let maxWidth = 0.15 + document.getElementById("speck_size").value/500
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let grunge = document.getElementById("grungy").checked
  if (grunge)
    maxWidth *= 2
  ctx.lineWidth = 0.1
  let count = 21
  let ybump = 0
  for (let j = 0; j < count; j++) {
    ctx.lineWidth = maxWidth * Math.random()
    ctx.beginPath()
    y = Math.random() * csize
    ctx.moveTo(Math.random() * cx, y)
    ybump = pet(43)
    ctx.lineTo(cx + Math.random() * cx/3, y + ybump)
    ctx.stroke()
  }
}

function offhorizontal2 () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let csize = ctx.canvas.height
  let x = 0, y = 0
  ctx.clearRect(0,0,canvas.width,canvas.height)
  ctx.globalAlpha = 0.1
  let maxWidth = 0.35 + document.getElementById("speck_size").value/500
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let grunge = document.getElementById("grungy").checked
  if (grunge)
    maxWidth *= 2
  ctx.lineWidth = 0.1
  let count = 21
  let ybump = 0
  for (let j = 0; j < count; j++) {
    ctx.lineWidth = maxWidth * Math.random()
    ctx.beginPath()
    y = Math.random() * csize
    ctx.moveTo(Math.random() * cx, y)
    ybump = pet(13)
    ctx.lineTo(cx + Math.random() * cx/3, y + ybump)
    ctx.stroke()
  }
}

function offstreaks () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let csize = ctx.canvas.height
  let x = 0, y = 0
  ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height)
  ctx.globalAlpha = 0.1
  let maxWidth = 0.15 + document.getElementById("speck_size").value /500
  if (document.getElementById("grungy").checked)
    maxWidth *= 2
  ctx.strokeStyle = document.getElementById("paintcolor").value
  //ctx.lineWidth = 0.1
  let count = 7
  for (let j = 0; j < count; j++) {
    ctx.lineWidth = maxWidth * Math.random()
    ctx.beginPath()
    ctx.moveTo(Math.random() * cx, Math.random() * csize)
    ctx.lineTo(cx + Math.random() * cx, Math.random() * csize)
    ctx.stroke()
  }
}

function offarcs () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let x = 0, y = 0
  let s = 0, e = 0
  ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height)
  ctx.globalAlpha = 0.15
  let maxWidth = 0.15 + document.getElementById("speck_size").value /500
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = 0.1
  let maxradius = 17 + document.getElementById("speck_size").value /2
  if (document.getElementById("grungy").checked)
    maxradius *= 2
  let d = 40 + Math.random() * 39
  let count = 53
  for (let j = 0; j < count; j++) {
    ctx.beginPath();
    ctx.lineWidth = maxWidth * Math.random()
    x = cx + pet(d)*Math.cos(Math.random()*0.5)
    y = cy + pet(d)*Math.sin(Math.random()*0.5)
    e = Math.random()*6.28
    s = e+Math.random()*1.5
    ctx.arc(x, y, Math.random()*maxradius, e, s);
    ctx.stroke();
  }
}

function offspecks () {
  let canvas = document.getElementById("offscreen");
  let ctx = canvas.getContext("2d");
  let cx = ctx.canvas.width/2;
  let cy = ctx.canvas.height/2;
  let x = 0, y = 0
  ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height)
  ctx.globalAlpha = 0.075
  let maxradius = 1 + document.getElementById("speck_size").value /20
  ctx.fillStyle = document.getElementById("paintcolor").value
  let d = 1 + Math.random() * 41
  let count = 7
  for (let j = 0; j < 7; j++) {
    ctx.beginPath();
    x = cx + pet(d)*Math.cos(Math.random()*6.28)
    y = cy +pet(d)*Math.sin(Math.random()*6.28)
    ctx.arc(x, y, Math.random()*maxradius, 0, 2*Math.PI);
    ctx.fill();
  }
}

function specksRadial () {
  let grunge = document.getElementById("grungy").checked
  let num = document.getElementById("number").value
  let speck_size = 0.1+ document.getElementById("speck_size").value/100
  let r0 = speck_size
  let speck_opacity = document.getElementById("speck_opacity").value/100
  let flatness = false//document.getElementById("flatten").value
  let canvas = document.getElementById("myCanvas");
  let dist = document.getElementById("distro").value
  let cx = canvas.width/2, cy = canvas.height/2
  let ctx = canvas.getContext("2d");
  let canvas_w = canvas.width
  let canvas_h = canvas.height
  let x = 0, y = 0
  let f = flatness/100 * canvas.height/2
  ctx.globalAlpha = speck_opacity
  let alpha0 = ctx.globalAlpha
 // let maxY = canvas.height/2
  ctx.fillStyle = document.getElementById("paintcolor").value
  if (dist != "gaussian")
    clip()
  for (let j = 0; j < num; j++) {
    ctx.beginPath();
    if (dist == "gaussian") {
      x = randn_bm(0, canvas_w, 1)
      y = randn_bm(0, canvas_h, 1)
      if (flatness > 1) {
        x = randn_bm(f, canvas_size - f, 1)
      }
    } else {
      x = Math.random() * canvas_w
      y = Math.random() * canvas_h
    }
    ctx.arc(x, y, speck_size, 0, 2*Math.PI);
    ctx.closePath();
    if (grunge) {
      speck_size = r0 + Math.random() * r0 * 3
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0
    }
    ctx.fill()
  }
  ctx.restore()
}

function hatches (cross) {
  let grunge = document.getElementById("grungy").checked
  //clearCanvas()
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  let x = -50, y = -50;
  let x_inc = 20, y_inc = 20
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  alpha0 = ctx.globalAlpha
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = document.getElementById("speck_size").value/(5*6.25)
  linewidth0 = ctx.lineWidth
  let radius = document.getElementById("speck_size").value/(2*6.25)
  let rows = document.getElementById("rows").value*8
  let inc = 512/rows
  numlines = 0;
  x = inc, y = inc // should try different initial offset
  x_inc = inc, y_inc = inc
  //ctx.save()
  clip()
  for (var i = 0; i < 1000; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.0
      ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
    }
    ctx.beginPath();
    ctx.moveTo(-20, y)
    ctx.lineTo(x, -20)
    ctx.stroke();
    x += x_inc
    y += y_inc
  }
  if (cross) {
    i = 0, x = -50, y = canvas.height + 50
    for (var i = 0; i < 1000; i++) {
      if (grunge) {
        ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.0
        ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
      }
      ctx.beginPath();
      ctx.moveTo(-20, y)
      ctx.lineTo(x, canvas.height+20)
      ctx.stroke();
      x += x_inc
      y -= y_inc
    }
  }
  ctx.restore()
}

function caption () {
  let grunge = document.getElementById("grungy").checked
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  let cx = canvas.width/2, cy = canvas.height/2
  let styles = ["normal", "100", "500", "900", "bold", "italic", "lighter", "oblique"]
  let faces = ["monospace"]//, "sans-serif", "serif", "courier", "ariel", "times"]
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let text = document.getElementById("caption").value
  let size = document.getElementById("speck_size").value/6.25
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.font = size+"px sans-serif"
  ctx.font = randomPick(styles)+" "+size+"pt " + randomPick(faces)
  let x = 40, y = canvas.height - 40
  ctx.fillText(text, x, y)
}

function character () {
  let grunge = document.getElementById("grungy").checked
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100

  let styles = ["normal", "100", "500", "900", "bold", "italic", "lighter", "oblique"]
  let faces = ["monospaced", "sans-serif", "serif", "courier", "ariel", "times"]

  let x = -32, y = -32, x0 = x, y0 = y, off = 0;
  let numlines = 0;
  let x_inc = 16, y_inc = 16
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let alpha0 = ctx.globalAlpha
  ctx.fillStyle = document.getElementById("paintcolor").value
  ctx.strokeStyle = document.getElementById("paintcolor").value
  let text = document.getElementById("atext").value
  let radius = document.getElementById("speck_size").value/6.25
  let rad0 = radius
  let rows = Math.pow(2, 9-document.getElementById("rows").value)
  let inc = rows
  let maxy = canvas.height/2
  numlines = 0;
  x_inc = inc, y_inc = inc
  clip()
  ctx.font = radius+"px sans-serif"
  ctx.font = randomPick(styles)+" "+radius+"pt " + randomPick(faces)
  for (var i = 0; i < 24000; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0
      radius = rad0 + Math.random() * rad0/3
      ctx.font = radius+"px"
      text = String.fromCharCode(32 + Math.floor(Math.random() * 96)) // 32 - 127 = ascii
    }
    if (grunge && Math.random() < 0.1)
      ctx.strokeText(text, x, y)
    else
      ctx.fillText(text, x, y)
    x += x_inc;
    if (i % (160) === 0) {
      numlines++;
      if (numlines % 2 === 0)
        off = x_inc/2;
      else
        off = 0;
      x = off - (radius/2);
      y += inc;
    }
  }
  ctx.restore()
}

function halftone () {
  let grunge = document.getElementById("grungy").checked
  //clearCanvas()
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  let x = -32, y = -32, x0 = x, y0 = y, off = 0;
  let numlines = 0;
  let x_inc = 16, y_inc = 16
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let alpha0 = ctx.globalAlpha
  ctx.fillStyle = document.getElementById("paintcolor").value
  let radius = 0.2+document.getElementById("speck_size").value/62.5
  let rad0 = radius
  let rows = Math.pow(2, 9-document.getElementById("rows").value)
  let inc = rows
  let maxy = canvas.height/2
  numlines = 0;
  x_inc = inc, y_inc = inc
  clip()
  for (var i = 0; i < 24000; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0
      radius = rad0 + Math.random() * rad0/3
    }
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, 2*Math.PI);
    ctx.closePath();
    ctx.fill();
    x += x_inc;
    if (i % (160) === 0) {
      numlines++;
      if (numlines % 2 === 0)
        off = x_inc/2;
      else
        off = 0;
      x = off;
      y += inc;
    }
  }
  ctx.restore()
}

function straightLines (cross) { // vertical lines
  let grunge = document.getElementById("grungy").checked
 // clearCanvas()
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  let x = -50, y = -50;
  let x_inc = 20, y_inc = 20
  ctx.globalAlpha = (document.getElementById("speck_opacity").value) /100
  alpha0 = ctx.globalAlpha
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = document.getElementById("speck_size").value/(5*6.25)
  linewidth0 = ctx.lineWidth
  let radius = document.getElementById("speck_size").value/12.5
  let rows = document.getElementById("rows").value*8
  let inc = 512/rows
  numlines = 0;
  x = -20, y = 0 + ctx.lineWidth/2 // should try different initial offset
  x_inc = inc, y_inc = inc
  let maxy = canvas.height/2
  clip()
  let i = 0
  for (; i < 1000; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.3
      ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
    }
    ctx.beginPath();
    ctx.moveTo(-20, y)
    ctx.lineTo(canvas.width+20, y)
    ctx.stroke();
    y += y_inc
  }
  if (cross) {
    i = 0, x = -20, y = -20
    for (; i < 1000; i++) {
      if (grunge) {
        ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.3
        ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
      }
      ctx.beginPath();
      ctx.moveTo(x, y)
      ctx.lineTo(x, canvas.height+20)
      ctx.stroke();
      x += x_inc
      y = -20
    }
  }
  ctx.restore()
}

function skinnyLines () { // vertical lines
  let grunge = document.getElementById("grungy").checked
 // clearCanvas()
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext('2d');
  let x = -50, y = -50;
  let x_inc = 20, y_inc = 20
  ctx.globalAlpha = (document.getElementById("speck_opacity").value) /100
  alpha0 = ctx.globalAlpha
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = 1
  linewidth0 = ctx.lineWidth
  let radius = document.getElementById("speck_size").value/(2*6.25)
  let rows = document.getElementById("rows").value*8
  let inc = ctx.lineWidth*3//512/rows
  numlines = 0;
  x = -20, y = 0 + ctx.lineWidth/2 // should try different initial offset
  x_inc = inc, y_inc = inc
  let maxy = canvas.height * 2
  clip()
  let i = canvas.height/2
  for (; i < maxy; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.3
      ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
    }
    ctx.beginPath();
    ctx.moveTo(-20, y)
    ctx.lineTo(canvas.width+20, y)
    ctx.stroke();
    y += y_inc + pet(2)
  }
  ctx.restore()
}

function eye () { // vertical lines
  let grunge = document.getElementById("grungy").checked
 // clearCanvas()
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext('2d')
  let x = canvas.width/2 + pet(9), y = canvas.height/2 + pet(9);
  let r = 0.5, rinc = 3.9
  ctx.globalAlpha = (document.getElementById("speck_opacity").value) /100
  alpha0 = ctx.globalAlpha
  ctx.strokeStyle = document.getElementById("paintcolor").value
  ctx.lineWidth = 0.5
  linewidth0 = ctx.lineWidth
  let radius = document.getElementById("speck_size").value/(2*6.25)
  let rows = document.getElementById("rows").value*8
  numlines = 0;
  let end = 0, start = 0
  clip()
  let i = 0
  for (; i < 1000; i++) {
    if (grunge) {
      ctx.globalAlpha = alpha0 + (Math.random() - 0.5) * alpha0/1.3
      ctx.lineWidth = linewidth0 + Math.random() * linewidth0/4
    }
    ctx.beginPath();
    start = Math.random() *2 * Math.PI
    end = start + 3.14
    ctx.arc(x,y, r, start, end)
    ctx.stroke();
    r += rinc + pet(1)
  }
  ctx.restore()
}

function blobs () {
  let grunge = document.getElementById("grungy").checked
  let increase = Math.PI * 2 / 40;
  let x = 350, y = 270, angle = 4.7;
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let centx = ctx.canvas.width/2;
  let centy = ctx.canvas.height/2;
  let cx = centx, cy = centy
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let alpha0 = ctx.globalAlpha
  let numshapes = 25
  ctx.fillStyle = document.getElementById("paintcolor").value
  numshapes = 1 + document.getElementById("number").value/10
  
  let radius = 1
  clip()
  for (let t = 0; t < numshapes; t++) {
    x = 0;
    y = 0;
    let x0 = x;
    let y0 = y;
    angle = Math.floor(Math.random() * 6.42);
    centx = Math.random()*ctx.canvas.width+5;
    centy = Math.random()*ctx.canvas.height+5
    let edges = 19 * Math.random() + 9;
    let rmax = document.getElementById("speck_size").value/20 // max = 500
    let maxradius = 1 + rmax * Math.random();
    let r0 = maxradius
    increase = Math.PI * 2/edges*0.98;
    points = [];
    bez = [];
    radius = (Math.random() * maxradius) + maxradius * 0.9;
    for (let i = 0; i < edges; i++) {
      if (grunge) {
        maxradius = r0 + (Math.random()) * r0 * 2
      }
      //radius = (Math.random() * maxradius) + maxradius * 0.9;
      radius += pet(maxradius/1)
      x = radius * Math.cos(angle)+centx;
      y = radius * Math.sin(angle)+centy;
      points.push([x, y]);
      angle += increase;
    }
    let W = canvas.width
    drawPath(points, 0, 0)
    drawPath(points, -W, -W)
    drawPath(points, 0, -W)
    drawPath(points, W, -W)

    drawPath(points, -W, +W)
    drawPath(points, 0, +W)
    drawPath(points, W, +W)

    drawPath(points, -W, 0)
    drawPath(points, +W, 0)
  }
  ctx.restore()
}

function tatter () {
  let grunge = document.getElementById("grungy").checked
  let increase = Math.PI * 2 / 40;
  let x = 0, y = 0, angle = 0
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let centx = ctx.canvas.width/2;
  let centy = ctx.canvas.height/2;
  let cx = centx, cy = centy
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let numshapes = 1 + document.getElementById("number").value/5
  ctx.fillStyle = document.getElementById("paintcolor").value
  let radius = 1
  for (let t = 0; t < numshapes; t++) {
    x = 0;
    y = 0;
    let y0 = y;
    angle = Math.floor(Math.random() * 6.42);
    centx = Math.random()*ctx.canvas.width+5;
    y0 = canvas.height*3/4 + Math.random() * canvas.height*1/4
    if (grunge)
      y0 = canvas.height/2 + Math.random() * canvas.height/4
    centy = y0 + Math.random()*y0 + 60
    if (100/(canvas.height-centy)/(canvas.height/2) * Math.random() > 0.0004) {
      let edges = 11 * Math.random() + 9;
      let rmax = document.getElementById("speck_size").value/20 // max = 500
      let maxradius = Math.abs(1 + 500/(1+(canvas.height+10-centy)))
      increase = Math.PI * 2/edges*0.98;
      let points = [];
      let i = 0
      for (; i < edges; i++) {
        radius = (Math.random() * maxradius/1.5) + maxradius;
        x = radius * Math.cos(angle)+centx;
        y = radius * Math.sin(angle)+centy;
        points.push([x, y]);
        angle += increase;
      }
      drawPath(points, 0, 0, ctx)
    }
  }
}



function scratch () { // based on blobs
  let grunge = document.getElementById("grungy").checked
  let increase = Math.PI * 2 / 40;
  let x = 0, y = 0, angle = 4.7;
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let centx = 20 + Math.random() * canvas.width - 40
  let centy = ctx.canvas.height/2;
  let cx = centx, cy = centy
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let alpha0 = ctx.globalAlpha
  let numshapes = 1 + document.getElementById("number").value/20
  ctx.fillStyle = document.getElementById("paintcolor").value
  let radius = 1
  for (let t = 0; t < numshapes; t++) {
    x = 0;
    y = 0;
    angle = Math.floor(Math.random() * 6.42);
    centy = Math.random()*ctx.canvas.height+5
    let edges = 19 * Math.random() + 9;
    let rmax = document.getElementById("speck_size").value/20 // max = 500
    let maxradius = 1 + rmax * Math.random();
    let r0 = maxradius
    increase = Math.PI * 2/edges*0.98;
    points = [];
    radius = (Math.random() * maxradius) + maxradius * 0.9;
    for (let i = 0; i < edges; i++) {
      if (grunge) {
        maxradius = r0 + (Math.random()) * r0 * 2
      }
      radius += pet(maxradius)
      x = radius * Math.cos(angle)+centx;
      y = radius * Math.sin(angle)+centy;
      points.push([x, y]);
      angle += increase;
    }
    //let W = canvas.width
    drawPath(points, 0, 0)
  }
}


function drawBlobAt (ctx, x, y, r) {
  let x0 = x;
  let y0 = y;
  angle = Math.floor(Math.random() * 6.42);
  centx = Math.random()*ctx.canvas.width+5;
  centy = Math.random()*ctx.canvas.height+5
  let edges = 39 * Math.random() + 9;
  let rmax = document.getElementById("speck_size").value/50 // max = 500
  let maxradius = 1 + rmax * Math.random();
  //r = 55
  let r0 = r
  increase = Math.PI * 2/edges*0.98;
  points = [];
  points.push([x,y])
  radius = (Math.random() * maxradius) + maxradius * 0.9;
  for (let i = 0; i < edges; i++) {
    radius += pet(maxradius)
    x = radius * Math.cos(angle)+x;
    y = radius * Math.sin(angle);
    points.push([x, y]);
    angle += increase;
  }
  drawPath(points, 0, 0, ctx)
}

function drawCircleAt(ctx,x,y,r) {
  ctx.beginPath()
  ctx.moveTo(x, y)
  ctx.arc(x,y,r,0,Math.PI*2)
  ctx.closePath()
  ctx.fill()
}

function drawRectAt(ctx,x,y,r) {
  ctx.beginPath()
  x -= r
  y -= r
  r *= 2
  ctx.moveTo(x, y)
  ctx.lineTo(x+r, y)
  ctx.lineTo(x+r, y+r)
  ctx.lineTo(x, y+r)
  ctx.closePath()
  ctx.fill()
}

function drawXAt(ctx,x,y,r) {
  ctx.beginPath()
  x -= r
  y -= r
  let h = r*2
  ctx.moveTo(x+h/4, y)
  ctx.lineTo(x+h/2, y+h/4)
  ctx.lineTo(x+h*3/4, y)
  ctx.lineTo(x+h, y+h/4)
  
  ctx.lineTo(x+h*3/4, y+h/2)
  ctx.lineTo(x+h, y+h*3/4)

  ctx.lineTo(x+h*3/4, y+h)
  ctx.lineTo(x+h/2, y+h*3/4)
  ctx.lineTo(x+h/4, y+h)
  
  ctx.lineTo(x, y+h*3/4)
  ctx.lineTo(x+h/4, y+h/2)
  ctx.lineTo(x, y+h/4)

  ctx.closePath()
  ctx.fill()
}

function drawDiamondAt(ctx,x,y,r) {
  ctx.beginPath()
  x -= r
  y -= r
  let h = r*2
  ctx.moveTo(x+h/2, y)
  ctx.lineTo(x+h, y+h/2)
  
  ctx.lineTo(x+h/2, y+h)

  ctx.lineTo(x, y+h/2)

  ctx.closePath()
  ctx.fill()
}


function drawTriangleAt(ctx,x,y,r) {
  ctx.beginPath()
  x -= r
  y -= r
  ctx.moveTo(x+r, y)
  r*=2
  ctx.lineTo(x+r, y+r)
  ctx.lineTo(x, y+r)
  ctx.closePath()
  ctx.fill()
}

function card () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let h = canvas.height;
  let w = canvas.width;
  let centerx = ctx.canvas.width / 2;
  let centery = ctx.canvas.height / 2;
  let x = centerx/2
  let y = centery/2
  let r = h/5
  let colors = []
  let i = 0
  for (; i < 2; i++)
    colors.push(randomColor())
  ctx.fillStyle = randomGradient(canvas);
  //ctx.save()
  clip()
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let grunge = document.getElementById("grungy").checked
  if (grunge) {
    colors = ["red", "blue", "yellow", "green"]
  }

  ctx.fillStyle = randomPick(colors)
  let f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
  y = h * 0.75
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
    
  x = h * 0.75
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
  y = h * 0.25
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  //pushColor(randomPick(colors))
  ctx.restore()
}

function card2 () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let h = canvas.height;
  let w = canvas.width;
  let centerx = ctx.canvas.width / 2;
  let centery = ctx.canvas.height / 2;
  let x = centerx/3
  let y = centery/3
  let r = h/6 - 12
  let colors = []
  let i = 0
  for (; i < 3; i++)
    colors.push(randomColor())
  ctx.fillStyle = randomGradient(canvas);
  //ctx.save()
  clip()
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let grunge = document.getElementById("grungy").checked
  if (grunge) {
    colors = ["red", "blue", "yellow", "green", "orange"]
  }

  ctx.fillStyle = randomPick(colors)
  let f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
  x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
   x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
    
    
  x = centerx/3, y =  centery/3 + h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
  x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
    
  x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
    
  // botton row
   
  x = centerx/3, y =  centery/3 + h * 2/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  
  x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
    
  x += h * 1/3
  ctx.fillStyle = randomPick(colors)
  f = (Math.floor(Math.random() * 4))
  if (f == 0)
    drawCircleAt(ctx,x,y,r)
  else
  if (f == 1)
    drawTriangleAt(ctx,x,y,r)
  else
  if (f == 2)
    drawRectAt(ctx,x,y,r)
  else
    drawXAt(ctx,x,y,r)
  //pushColor(randomPick(colors))
  ctx.restore()
}


function randomWord () {
  return randomPick(words.split("\n"))
}

function shape () {// right side only
  var radvar = 0;
  var increase = Math.PI * 2 / 40;
  var x = 350, y = 270, angle = 4.7;
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  var h = canvas.height;
  var w = canvas.width;
  var centerx = ctx.canvas.width / 2;
  var centery = ctx.canvas.height / 2;
  ctx.fillStyle = randomGradient(canvas);
 // ctx.save()
  clip()
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let grunge = document.getElementById("grungy").checked
  let numshapes = 1;//Math.random() * max_shapes() + 2;
  let ia = 0
  ctx.fillStyle = document.getElementById("paintcolor").value;
  if (grunge)
    ctx.fillStyle = randomGradient(canvas, document.getElementById("paintcolor").value)
  for (var t = 0; t < numshapes; t++) {
    let radius = 10//Math.floor(Math.random() * 350) + 320;
    x = 0;
    y = 0;
    var x0 = x;
    var y0 = y;
    let turn = 0
    angle = Math.floor(Math.random() * 6.42);
    ctx.beginPath();
    var centx = ctx.canvas.width + 50 //(Math.random() > 0.5)? ctx.canvas.width + 50 * Math.random(): Math.random() * -50;
    var centy = ctx.canvas.height/2;
    var edges = Math.random()*121+Math.random()*121;
    var maxradius = canvas.height/2+ Math.random() * canvas.height/4;
    increase = Math.PI * 2/edges;
    ctx.beginPath();
    let rfactor = 2
    let mfactor = maxradius
    for (var i = 0; i < edges-1; i++) {
      rfactor =  maxradius/40 + Math.random() *11
      if (Math.random()> 0.63)
        mfactor += (Math.random() - 0.5) * maxradius/9
      radius = Math.random() * rfactor + mfactor;
      x = radius * Math.cos(angle)+centx;
      y = radius * Math.sin(angle)+centy;
      centx = centx+pet(23)
      centy = centy+pet(23)
      if (i == 0) {
        x0 = x;
        y0 = y;
      }
      ctx.lineTo(x, y);
      ia = increase + Math.PI/180 * pet(6);
      angle += ia
      turn += ia
      if(turn >= 6.28)
        break;
    }
    ctx.lineTo(x0, y0);
    ctx.closePath();
    ctx.fill();
  }
  ctx.restore()
}

function drawPath(points, offsetX, offsetY, c) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  if (c)
    ctx = c
  let x = 0, y = 0, x0 = 0, y0 = 0
  ctx.beginPath()
  let i = 0;
  for (; i < points.length; i++) {
    x = points[i][0] + offsetX;
    y = points[i][1] + offsetY;
    if (i == 0) {
      x0 = x;
      y0 = y;
      ctx.moveTo(x, y);
    } else
    ctx.lineTo(x,y)
  }
  ctx.closePath();
  ctx.fill();
}

function fade () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let cx = ctx.canvas.width/2
  let cy = ctx.canvas.height/2
  let w = canvas.width, h = canvas.height
  let maxdist = 101 + Math.random() * w/2
  maxdist = Math.pow(Math.pow(cx, 2) + Math.pow(cy, 2), 0.5)
  let d = 1000
  let data = ctx.getImageData(0,0,canvas.width,canvas.height)
  let i = 0, x = 0, y = 0
  let len = w * h
  for (;i < len; i++) {
    x = i % w
    if (x === 0)
      y += 1
    d = Math.random() * w
    let px = data.data.slice(i*4, i*4+4)
    px[3] *= d/maxdist
    data.data.set(px, i*4)
  }
  ctx.putImageData(data, 0, 0);
}

function downFade () {
  rc()
  leftFade()
  rcc()
}

function leftFade () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let cx = ctx.canvas.width/2 + pet(150)
  let cy = ctx.canvas.height/2 + pet(150)
  let rightx = canvas.width
  let w = canvas.width, h = canvas.height
  let maxdist = Math.pow(Math.pow(cx, 2) + Math.pow(cy, 2), 0.5)
  maxdist *= 1.2
  let d = 1000
  let data = ctx.getImageData(0,0,canvas.width,canvas.height)
  let i = 0, x = 0, y = 0
  let len = w * h
  for (;i < len; i++) {
    x = i % w
    if (x === 0)
      y += 1
    d = lindistance((x*1.5), 0)
    let px = data.data.slice(i*4, i*4+4)
    px[3] *= d/maxdist
    //setPixel(data, i, px)
    data.data.set(px, i*4)
  }
  ctx.putImageData(data, 0, 0);
}

function edgeGrey () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  ocanvas.width = canvas.width
  ocanvas.height = canvas.height
  octx.drawImage(canvas,0,0)
  greyScale(ocanvas)
  vig(ocanvas)
  ctx.drawImage(ocanvas,0,0)
}

function edgeDarken () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  ocanvas.width = canvas.width
  ocanvas.height = canvas.height
  octx.drawImage(canvas,0,0)
  adjustBrightness(-10, ocanvas)
  vig(ocanvas)
  ctx.drawImage(ocanvas,0,0)
}

function edgeBlur () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  ocanvas.width = canvas.width
  ocanvas.height = canvas.height
  octx.drawImage(canvas,0,0)
  blurCanvas(ocanvas)
  blurCanvas(ocanvas)
  vig(ocanvas)
  ctx.drawImage(ocanvas,0,0)
}

function vig (canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let cx = ctx.canvas.width/2 + pet(150)
  let cy = ctx.canvas.height/2 + pet(150)

  cx = LASTCLICK[0]
  cy = LASTCLICK[1]
  let s = document.getElementById("speck_size").value // up to 500
  // decrease d as s increases?
  let w = canvas.width, h = canvas.height
  let maxdist = Math.pow(Math.pow(cx, 2) + Math.pow(cy, 2), 0.5)
  maxdist *= 1.2
  let d = 1000
  let data = ctx.getImageData(0,0,canvas.width,canvas.height)
  let i = 0, x = 0, y = 0
  let len = w * h
  for (;i < len; i++) {
    x = i % w
    if (x === 0)
      y += 1
    d = distance(x, y, cx, cy)
    let px = data.data.slice(i*4, i*4+4)
    px[3] *= d/maxdist
    data.data.set(px, i*4)
  }
  ctx.putImageData(data, 0, 0);
}

function jump () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let c = canvas.width/2
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let i = 0
  let px = canvas.width/4 +Math.random() * canvas.width/3
  let py = canvas.height/4 +Math.random() * canvas.height/3
  if (Math.random() > 0.5)
    px *= -1
    
  if (Math.random() > 0.5)
    py *= -1
  if (document.getElementById("grungy").checked) {
    //p = 100
  }
  ctx.save()
  for (; i < 1; i++) {
    ctx.translate(px, py)
    //ctx.rotate((Math.random() - 0.5) * rotation * Math.PI);
    
    ctx.drawImage(ctx.canvas, 0,0)
  }
  ctx.restore()
}

function smear () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let c = canvas.width/2
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let i = 0
  let p = 50, rotation = 0.04
  if (document.getElementById("grungy").checked) {
    p = 100
    rotation *= 2
  }
  ctx.save()
  for (; i < 1; i++) {
    ctx.translate(c+pet(40), c+pet(40));
    ctx.rotate((Math.random() - 0.5) * rotation * Math.PI);
    ctx.translate(-c+pet(40), -c+pet(40));
    ctx.drawImage(ctx.canvas, pet(p), pet(p))
  }
  ctx.restore()
}

function edgeSmear () {
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let numshapes = 2 + Math.log(document.getElementById("number").value)/2
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let cx = canvas.height/2, cy = canvas.width/2
  ocanvas.height = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.width = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.height += 50
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  let c = ocanvas.height * 0.5
  octx.fillStyle = randomGradient(ocanvas, document.getElementById("paintcolor").value)
  octx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let x = canvas.width/100 * Math.random()
  let y = 4
  let r = 17
  let i = 0
  let p = 61
  if (document.getElementById("grungy").checked)
    p *= 3
  for (; i < numshapes; i++) {
    octx.fillStyle = randomGradient(ocanvas, document.getElementById("paintcolor").value)
    octx.globalAlpha = Math.random()
    drawBlobAt (octx, x+pet(p), y, r+pet(17))
  }
  i = 0
  let N = (Math.log(canvas.height+1) * 11.3) - 46
  for (; i < N; i++) {
    octx.globalAlpha = Math.random()
    octx.translate(c, c+3+pet(1))
    octx.translate(-c, -c)
    octx.drawImage(octx.canvas, 0, 0)
  }
  ctx.drawImage(ocanvas, 0, -50)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function smeardownOff () {
  let ocanvas = document.createElement("CANVAS")
  let octx = ocanvas.getContext('2d')
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d")
  let numshapes = 2 + Math.log(document.getElementById("number").value)/2
  ctx.globalAlpha = document.getElementById("speck_opacity").value/100
  let cx = canvas.height/2, cy = canvas.width/2
  ocanvas.height = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.width = (canvas.height > canvas.width)? canvas.height: canvas.width
  ocanvas.height += 50
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
  let c = ocanvas.height * 0.5
  octx.fillStyle = randomGradient(ocanvas, document.getElementById("paintcolor").value)
  octx.globalAlpha = (document.getElementById("speck_opacity").value)/100
  let x = canvas.width * Math.random()
  let y = 4
  let r = 17
  let i = 0
  let p = 61
  if (document.getElementById("grungy").checked)
    p *= 3
  for (; i < numshapes; i++) {
    octx.fillStyle = randomGradient(ocanvas, document.getElementById("paintcolor").value)
    octx.globalAlpha = Math.random()
    drawBlobAt (octx, x+pet(p), y, r+pet(17))
  }
  i = 0
  let N = (Math.log(canvas.height+1) * 11.3) - 46
  for (; i < N; i++) {
    octx.globalAlpha = Math.random()
    octx.translate(c, c+3+pet(1))
    octx.translate(-c, -c)
    octx.drawImage(octx.canvas, 0, 0)
  }
  ctx.drawImage(ocanvas, 0, -50)
  octx.clearRect(0,0,ocanvas.width,ocanvas.height)
}

function smeardown () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let c = canvas.width/3
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/400
  let i = 0
  let p = 5
  if (document.getElementById("grungy").checked) {
    p = 11
  }
  ctx.save()
  for (; i < 33; i++) {
    ctx.translate(c+pet(1), c+3+pet(1))
    ctx.translate(-c, -c);
    ctx.drawImage(ctx.canvas, 0, 0)
  }
  ctx.restore()
}

function smearsideways () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let c = canvas.height/2
  ctx.globalAlpha = (document.getElementById("speck_opacity").value)/400
  let i = 0
  let p = 5
  if (document.getElementById("grungy").checked) {
    p = 11
  }
  ctx.save()
  for (; i < 33; i++) {
    ctx.translate(c+3+pet(1), c+pet(1))
    ctx.rotate(0 * Math.PI);
    ctx.translate(-c, -c);
    ctx.drawImage(ctx.canvas,3, pet(p))
  }
  ctx.restore()
}

function refreshMode (ctx) {
  let selectElement = document.getElementById("mode");
  ctx.globalCompositeOperation = selectElement.value
}

function syncBackground (canvas) {
  let bkg = document.getElementById("background");
  bkg.style.height = canvas.height +"px"
  bkg.style.width = canvas.width +"px"
}

function resizeCanvas () {
  clearCanvas()
  let canvas_size = 256 * document.getElementById("canvas_size").value
  let canvas = document.getElementById("myCanvas");
  canvas.height = canvas_size
  canvas.width = canvas_size
  syncBackground(canvas)
  document.getElementById("cs").innerHTML = canvas.width + "px"
  LASTCLICK[0] = myCanvas.width/2
  LASTCLICK[1] = myCanvas.height/2
}

function clearCanvas () {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width, canvas.height)
}

function saveAs () {
  //console.log(document.getElementById("myCanvas").height)
  document.getElementById("downloader").download = "image.png";
  document.getElementById("downloader").href = document.getElementById("myCanvas").toDataURL("image/png").replace(/^data:image\/[^;]/, 'data:application/octet-stream');
}

function pet(v) {
  return (Math.random() -0.5) * v;
}

function distance (x1, y1, x2, y2) {
  return Math.pow(Math.pow(x1-x2, 2) + Math.pow(y1-y2, 2), 0.5)
}

function lindistance(x1,x2) {
  return Math.abs(x1,x2)
}

function updateDist () {
  let d = document.getElementById("distribution").value
  let el = document.getElementById("dist")
  if (d == 0)
    el.innerHTML = "gaussian"
  else
    el.innerHTML = "square"
}

function transparenter() {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let pixels = imgData.data;
  let i = 0
  for (; i < pixels.length; i += 4) {
    pixels[i + 3] *= 0.9;
  }
  ctx.putImageData(imgData, 0, 0);
}

function adjustBrightness(n, canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let pixels = imgData.data;
  let i = 0
  for (; i < pixels.length; i += 4) {
    pixels[i] += n;
    pixels[i + 1] += n;
    pixels[i + 2] += n;
  }
  ctx.putImageData(imgData, 0, 0);
}

function saturationScale (sv) {
  let canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let dA = imageData.data; // raw pixel data in array
  //var sv = 1.25; // saturation value. 0 = grayscale, 1 = original
  var luR = 0.3086; // constant to determine luminance of red. Similarly, for green and blue
  var luG = 0.6094;
  var luB = 0.0820;
  var az = (1 - sv)*luR + sv;
  var bz = (1 - sv)*luG;
  var cz = (1 - sv)*luB;
  var dz = (1 - sv)*luR;
  var ez = (1 - sv)*luG + sv;
  var fz = (1 - sv)*luB;
  var gz = (1 - sv)*luR;
  var hz = (1 - sv)*luG;
  var iz = (1 - sv)*luB + sv;
  let i = 0
  for(; i < dA.length; i += 4) {
      var red = dA[i]; // Extract original red color [0 to 255]. Similarly for green and blue below
      var green = dA[i + 1];
      var blue = dA[i + 2];
      var saturatedRed = (az*red + bz*green + cz*blue);
      var saturatedGreen = (dz*red + ez*green + fz*blue);
      var saturateddBlue = (gz*red + hz*green + iz*blue);
      dA[i] = saturatedRed;
      dA[i + 1] = saturatedGreen;
      dA[i + 2] = saturateddBlue;
  }
  ctx.putImageData(imageData, 0, 0);
}

function greyScale(canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas");
  let ctx = canvas.getContext("2d");
  let imgData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
  let pixels = imgData.data;
  let i = 0
  for (; i < pixels.length; i += 4) {
    let lightness = parseInt((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3);
    pixels[i] = lightness;
    pixels[i + 1] = lightness;
    pixels[i + 2] = lightness;
  }
  ctx.putImageData(imgData, 0, 0);
}

function randomKernel () {
  let wts = [0,1,2,3,4,5,1/2]
  let sum = 0, i = 0
  let k = []
  for (; i < 9; i++) {
    k.push(randomPick(wts) * Math.floor(2*(Math.random() - 0.5)))
    sum += k[i]
  }
  if (sum != 0) {
    let sum2 = 0
    i = 0
    for (; i < 9; i++) {
      k[i] /= sum
      sum2 += k[i]
    }
      console.log(k, sum2)

  }
  return k
}

function randomConvolution () {
  let k = randomKernel()
  convolutionMatrix(k, 0)
}

function blurCanvas (canvas) {
  let k = [1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]
  convolutionMatrix(k, 0, canvas)
}

function sharpenCanvas () {
  let k = [0,-1,0,
          -1,5,-1,
          0,-1,0]
  
  convolutionMatrix(k, 0)
}

function convolutionMatrix (kernel, offset, canvas) {
  if (!canvas)
    canvas = document.getElementById("myCanvas")
  let i = 0
  let ctx = canvas.getContext("2d")
  let input = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let output = ctx.createImageData(input)
  let w = input.width, h = input.height
  let iD = input.data, oD = output.data
  for (let y = 1; y < h - 1; y += 1) {
    for (let x = 1; x < w - 1; x += 1) {
      for (let c = 0; c < 3; c += 1) {
        i = (y * w + x) * 4 + c
        oD[i] = offset +
        (kernel[0] * iD[i - w * 4 - 4] +
          kernel[1] * iD[i - w * 4] +
          kernel[2] * iD[i - w * 4 + 4] +
          kernel[3] * iD[i - 4] +
          kernel[4] * iD[i] +
          kernel[5] * iD[i + 4] +
          kernel[6] * iD[i + w * 4 - 4] +
          kernel[7] * iD[i + w * 4] +
          kernel[8] * iD[i + w * 4 + 4])
      }
      oD[(y * w + x) * 4 + 3] = 255
    }
  }
  ctx.putImageData(output, 0, 0)
}

function sobel() {
  let canvas = document.getElementById("myCanvas")
  let ctx = canvas.getContext("2d")
  let imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)
  let pixels = imageData.data
  let i = 0
  let data = imageData.data

  let width = imageData.width;
  let height = imageData.height;

  const kernelX = [
    [-1,0,1],
    [-2,0,2],
    [-1,0,1]
  ];

  const kernelY = [
    [-1,-2,-1],
    [0,0,0],
    [1,2,1]
  ];

  let sobelData = [];
  let grayscaleData = [];
  function bindPixelAt(data) {
    return function(x, y, i) {
      i = i || 0;
      return data[((width * y) + x) * 4 + i];
    };
  }
  let pixelAt = bindPixelAt(data);
  let x, y;

  for (y = 0; y < height; y++) {
    for (x = 0; x < width; x++) {
      var r = pixelAt(x, y, 0);
      var g = pixelAt(x, y, 1);
      var b = pixelAt(x, y, 2);
      var avg = (r + g + b) / 3;
      grayscaleData.push(avg, avg, avg, 255);
    }
  }

  pixelAt = bindPixelAt(grayscaleData);

  for (y = 0; y < height; y++) {
    for (x = 0; x < width; x++) {
      let pixelX = (
        (kernelX[0][0] * pixelAt(x - 1, y - 1)) +
        (kernelX[0][1] * pixelAt(x, y - 1)) +
        (kernelX[0][2] * pixelAt(x + 1, y - 1)) +
        (kernelX[1][0] * pixelAt(x - 1, y)) +
        (kernelX[1][1] * pixelAt(x, y)) +
        (kernelX[1][2] * pixelAt(x + 1, y)) +
        (kernelX[2][0] * pixelAt(x - 1, y + 1)) +
        (kernelX[2][1] * pixelAt(x, y + 1)) +
        (kernelX[2][2] * pixelAt(x + 1, y + 1))
      );

      let pixelY = (
        (kernelY[0][0] * pixelAt(x - 1, y - 1)) +
        (kernelY[0][1] * pixelAt(x, y - 1)) +
        (kernelY[0][2] * pixelAt(x + 1, y - 1)) +
        (kernelY[1][0] * pixelAt(x - 1, y)) +
        (kernelY[1][1] * pixelAt(x, y)) +
        (kernelY[1][2] * pixelAt(x + 1, y)) +
        (kernelY[2][0] * pixelAt(x - 1, y + 1)) +
        (kernelY[2][1] * pixelAt(x, y + 1)) +
        (kernelY[2][2] * pixelAt(x + 1, y + 1))
      );

      let magnitude = Math.sqrt((pixelX * pixelX) + (pixelY * pixelY))>>>0;

      sobelData.push(magnitude, magnitude, magnitude, 255);
    }
  }

  let clampedArray = sobelData;
  clampedArray = new Uint8ClampedArray(sobelData);
  ctx.putImageData(toImageData(clampedArray,width,height), 0, 0)
  invertColors()
}

function toImageData(data, width, height) {
  if (typeof ImageData === 'function' && Object.prototype.toString.call(data) === '[object Uint16Array]') {
    return new ImageData(data, width, height);
  } else {
    if (typeof window === 'object' && typeof window.document === 'object') {
      var canvas = document.createElement('canvas');

      if (typeof canvas.getContext === 'function') {
        var context = canvas.getContext('2d');
        var imageData = context.createImageData(width, height);
        imageData.data.set(data);
        return imageData;
      } else {
        return new FakeImageData(data, width, height);
      }
    } else {
      return new FakeImageData(data, width, height);
    }
  }
};

function FakeImageData(data, width, height) {
  return {
    width: width,
    height: height,
    data: data
  };
}
  
</script>
<!--script src="wordlist2.js"></script-->
</body>
</html>